(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{6653:function(e,t,r){"use strict";r.d(t,{L:function(){return o},c:function(){return i}});var a=r(5474),n=r(666);function o(){return localStorage.getItem(n.px)}async function s(){return await (0,a.gw)(2e3),{code:n.mI,message:"Mock",data:{nickName:"Mock",token:"Mock"}}}async function i(e,t){if(n.M7)return await s();let r=await fetch("".concat(n.FH,"/member/login"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:e,password:t})});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));return await r.json()}},7454:function(e,t,r){"use strict";var a=r(9268),n=r(6394),o=r.n(n),s=r(6006),i=r(7613),c=r.n(i);let l=(0,s.memo)((0,s.forwardRef)((e,t)=>{let{src:r,...n}=e;return(0,a.jsx)(o(),{...n,ref:t,unoptimized:!0,src:"string"==typeof r&&r.startsWith("/")&&c().basePath?"".concat(c().basePath).concat(r):r})}));l.displayName="CustomImage",t.Z=l},6831:function(e,t,r){"use strict";var a=r(9268),n=r(6006),o=r(3368),s=r(1576),i=r.n(s),c=r(8683),l=r.n(c),u=r(9153);let d=(0,n.memo)(e=>{let{className:t,children:r,type:n,loading:s,disabled:c,onClick:d,looks:m,icon:f,...p}=e;return(0,a.jsxs)("button",{...p,className:"close"===f?l()("h-8 w-8 bg-close bg-4 bg-center bg-no-repeat opacity-50 hover:opacity-75",t):l()("rounded px-3 py-1.5",{[i().primary]:!m||m===u.L.primary,[i().danger]:m===u.L.danger,[i().dark]:m===u.L.dark,"bg-green-700 text-white":m===u.L.green},t),disabled:s||c,onClick:d,type:n,children:[s&&(0,a.jsx)(o.Z,{size:o.v.small})," ",r]})});d.displayName="Button",t.Z=d},1263:function(e,t,r){"use strict";var a=r(9268),n=r(6006),o=r(8683),s=r.n(o);let i=(0,n.memo)((0,n.forwardRef)((e,t)=>{let{className:r,type:n,value:o,onChange:i,onKeyDown:c,disabled:l,placeholder:u}=e;return(0,a.jsx)("input",{className:s()("rounded border border-solid border-gray-300 p-1",r),type:n,value:o,onChange:e=>{let t=e.target.value;null==i||i(t)},onKeyDown:c,disabled:l,placeholder:u,ref:t})}));t.Z=i},7007:function(e,t,r){"use strict";var a=r(9268),n=r(6006),o=r(8431),s=r(3194),i=r(4209),c=r.n(i),l=r(6831),u=r(8683),d=r.n(u);function m(e){let{title:t,children:r,footer:n,width:o,isCloseButtonShow:s,maskClosable:i,onClose:u}=e;return(0,a.jsx)("div",{className:d()(c().backgroundMask,"z-[1500]"),onClick:i?u:void 0,children:(0,a.jsxs)("div",{className:"my-12 divide-y divide-solid rounded bg-white",style:{width:o},onClick:e=>{e.stopPropagation()},children:[t&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 text-xl font-medium",children:[t,s&&(0,a.jsx)(l.Z,{className:"p-2",icon:"close",onClick:u})]}),r&&(0,a.jsx)("div",{className:"p-4",children:r}),n&&(0,a.jsx)("div",{className:"p-4",children:n})]})})}let f=(0,n.memo)(e=>{let{title:t,children:r,footer:n,open:s=!1,width:i,isCloseButtonShow:c,maskClosable:l=!0,onClose:u}=e;return s&&(0,o.createPortal)((0,a.jsx)(m,{title:t,footer:n,width:i,isCloseButtonShow:c,maskClosable:l,onClose:u,children:r}),document.body)});f.displayName="Modal";let p=(0,n.memo)(e=>{let{content:t,onOk:r,okButtonProps:o,onCancel:s,cancelButtonProps:i}=e,[u,d]=(0,n.useState)(!1),[f,p]=(0,n.useState)(!1),h=(0,n.useCallback)(async()=>{d(!0),await (null==r?void 0:r()),d(!1)},[r]),b=(0,n.useCallback)(async()=>{p(!0),await (null==s?void 0:s()),p(!1)},[s]);return(0,a.jsxs)(m,{children:[t,(0,a.jsxs)("div",{className:c().buttonGroup,children:[(0,a.jsx)(l.Z,{...o,loading:u,disabled:f,onClick:h,children:"確定"}),(0,a.jsx)(l.Z,{...i,loading:f,disabled:u,onClick:b,children:"取消"})]})]})});p.displayName="ConfirmModal";let h="confirmModal";f.confirm=e=>{let{content:t,onOk:r,okButtonProps:n,onCancel:o,cancelButtonProps:i}=e,c=document.getElementById(h);c||((c=document.createElement("div")).id=h),document.body.appendChild(c);let l=(0,s.createRoot)(c);l.render((0,a.jsx)(p,{content:t,onOk:async()=>{try{await (null==r?void 0:r()),l.unmount()}catch(e){}},okButtonProps:n,onCancel:async()=>{await (null==o?void 0:o()),l.unmount()},cancelButtonProps:i}))},t.Z=f},3368:function(e,t,r){"use strict";r.d(t,{v:function(){return n}});var a,n,o=r(9268),s=r(6006),i=r(8683),c=r.n(i);(a=n||(n={})).small="small",a.medium="medium";let l=(0,s.memo)(e=>{let{spinning:t=!0,size:r=n.medium,expand:a=!1,children:s}=e;return(0,o.jsxs)("div",{className:c()("relative inline-block",{"h-full w-full":a}),children:[s,t&&(0,o.jsx)("div",{className:c()("inset-0 flex items-center justify-center",{"absolute bg-white opacity-70":s,"static bg-transparent":!s}),children:(0,o.jsx)("div",{className:c()("animate-spin rounded-full border-solid border-slate-100 border-t-blue-500",{"h-2.5 w-2.5 border-2":r===n.small,"h-10 w-10 border-4":r===n.medium})})})]})});l.displayName="Spin",t.Z=l},8302:function(e,t,r){"use strict";var a=r(9268),n=r(6006),o=r(6462),s=r(3368),i=r(8683),c=r.n(i);let l=(0,n.memo)(e=>{let{className:t,rowKeyName:r="id",columns:i=[],dataSource:l=[],loading:u=!1}=e,d=(0,n.useMemo)(()=>i.map(e=>[e.dataIndex||(0,o.Z)(),e]),[i]),m=(0,n.useMemo)(()=>(0,a.jsx)("tr",{children:d.map(e=>{let[t,{title:r}]=e;return(0,a.jsx)("th",{className:"border-b border-solid border-gray-800 p-2 text-start",children:r},t)})}),[d]),f=(0,n.useMemo)(()=>l.map(e=>(0,a.jsx)("tr",{className:"even:bg-black/5",children:d.map(t=>{let[r,{dataIndex:n,render:o}]=t;return(0,a.jsx)("td",{className:"border-b border-solid border-gray-300 p-2",children:o?o(n&&e[n],e):n&&e[n]},r)})},e[r])),[d,l,r]);return(0,a.jsx)(s.Z,{spinning:u,expand:!0,children:(0,a.jsx)("div",{className:c()("overflow-auto",t),children:(0,a.jsx)("table",{className:"w-full border-collapse",children:(0,a.jsxs)("tbody",{children:[m,f]})})})})});l.displayName="Table",t.Z=l},1897:function(e,t,r){"use strict";var a=r(9268),n=r(8683),o=r.n(n),s=r(6006);let i=(0,s.memo)((0,s.forwardRef)((e,t)=>{let{className:r,value:n,onChange:s}=e;return(0,a.jsx)("textarea",{className:o()("rounded border border-solid border-gray-300 p-1",r),value:n,onChange:e=>{null==s||s(e.target.value)},ref:t})}));t.Z=i},315:function(e,t,r){"use strict";r.d(t,{Z:function(){return y}});var a=r(9268),n=r(6006),o=r(7454),s=r(1904),i=r(3368),c=r(5503),l=r(5474),u=r(666),d=r(6653);async function m(){return await (0,l.gw)(2e3),{code:u.mI,message:"Mock",data:"/images/mock/朝日夫婦.jpeg"}}async function f(e){if(u.M7)return await m();let t=new FormData;t.append("file",e);let r=await fetch("".concat(u.FH,"/file/upload/image"),{method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat((0,d.L)())},body:t});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));return await r.json()}async function p(){return await (0,l.gw)(2e3),{code:u.mI,message:"Mock",data:"/videos/mock/朝日夫婦.mp4"}}async function h(e){if(u.M7)return await p();let t=new FormData;t.append("file",e);let r=await fetch("".concat(u.FH,"/file/upload/video"),{method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat((0,d.L)())},body:t});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));return await r.json()}async function b(){return await (0,l.gw)(2e3),{code:u.mI,message:"Mock",data:"/panoramas/mock/朝日夫婦.jpeg"}}async function g(e){if(u.M7)return await b();let t=new FormData;t.append("file",e);let r=await fetch("".concat(u.FH,"/file/upload/panorama"),{method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat((0,d.L)())},body:t});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));return await r.json()}let w=(0,n.memo)(e=>{let{className:t,accept:r,fileType:l,value:d,onChange:m}=e,{data:p,loading:b,run:w}=(0,s.Q)(async e=>{switch(l){case c.p.IMAGE:{let t=await f(e);if(t.code===u.mI)return null==m||m(t.data),t.data;break}case c.p.VIDEO:{let t=await h(e);if(t.code===u.mI)return null==m||m(t.data),t.data;break}case c.p.PANORAMA:{let t=await g(e);if(t.code===u.mI)return null==m||m(t.data),t.data}}}),y=(0,n.useRef)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{className:"hidden",type:"file",accept:r,ref:y,onChange:async e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&await w(r)}}),(0,a.jsx)(i.Z,{spinning:b,children:(0,a.jsx)(o.Z,{className:"h-24 w-24 cursor-pointer object-cover",src:d||p||"/images/mock/add-image.png",width:100,height:100,alt:"add",onClick:()=>{y.current.click()}})})]})});w.displayName="Upload";var y=w},1904:function(e,t,r){"use strict";r.d(t,{Q:function(){return o}});var a=r(6006),n=r(6462);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{manual:!0},r=(0,a.useRef)(t.manual),[o,s]=(0,a.useState)({loading:!1,data:void 0}),i=(0,a.useRef)(),c=(0,a.useRef)(!1),l=(0,a.useRef)(),u=(0,a.useCallback)(async function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];let o=(0,n.Z)();i.current=o,c.current=!0,l.current=r,s(e=>{let{data:t}=e;return{loading:!0,data:t}});let u=await e(...r);if(o!==i.current)throw Error("canceled");return s({loading:!1,data:u}),u},[e]),d=(0,a.useRef)(u),m=(0,a.useCallback)(async()=>{if(c.current)return await u(...l.current);throw Error("Run should be called first")},[u]),f=(0,a.useCallback)(()=>{let e=(0,n.Z)();i.current=e,s({loading:!1,data:void 0})},[]);return(0,a.useEffect)(()=>{r.current||d.current(...[])},[]),(0,a.useMemo)(()=>({run:u,refresh:m,reset:f,...o}),[u,m,f,o])}},7613:function(e){"use strict";e.exports={output:"export",basePath:"/historic-site-portal-demo-test"}},2624:function(e,t,r){"use strict";var a,n;r.d(t,{L:function(){return a}}),(n=a||(a={})).none="none",n.console="console",n.message="message"},9153:function(e,t,r){"use strict";var a,n;r.d(t,{L:function(){return a}}),(n=a||(a={})).primary="primary",n.dark="dark",n.danger="danger",n.green="green"},5503:function(e,t,r){"use strict";var a,n;r.d(t,{p:function(){return a}}),(n=a||(a={}))[n.VIDEO=0]="VIDEO",n[n.PANORAMA=1]="PANORAMA",n[n.IMAGE=2]="IMAGE"},666:function(e,t,r){"use strict";r.d(t,{FH:function(){return a},M7:function(){return o},mI:function(){return s},px:function(){return n}});let a="https://historical-site-backend-18d1df54380f.herokuapp.com",n="token",o=!1,s="S001"},5474:function(e,t,r){"use strict";r.d(t,{cM:function(){return i},gw:function(){return s},rn:function(){return c},sG:function(){return l}});var a=r(2624),n=r(5326),o=r.n(n);let s=async e=>{await new Promise(t=>setTimeout(t,e))},i=(e,t)=>{switch(t){case a.L.none:break;case a.L.console:case a.L.message:console.log(e)}};function c(e){return e?o()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}let l=(async()=>{}).constructor},1576:function(e){e.exports={primary:"Button_primary__Nhi6i",danger:"Button_danger__214td",dark:"Button_dark__Djc0e"}},4209:function(e){e.exports={backgroundMask:"Modal_backgroundMask__9WqVi",buttonGroup:"Modal_buttonGroup__PS_fc"}}}]);