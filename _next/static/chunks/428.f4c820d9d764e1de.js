"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[428],{9428:function(t,e,n){n.r(e),n.d(e,{AbstractAdapter:function(){return p.F6},AbstractPlugin:function(){return p.Vw},AutorotatePlugin:function(){return L},CompassPlugin:function(){return tQ},CubemapAdapter:function(){return rj},CubemapTilesAdapter:function(){return r1},CubemapVideoAdapter:function(){return oi},EquirectangularTilesAdapter:function(){return oO},EquirectangularVideoAdapter:function(){return oH},GalleryPlugin:function(){return ef},GyroscopePlugin:function(){return ez},LensflarePlugin:function(){return oB.o},MapPlugin:function(){return ry},MarkersPlugin:function(){return tU},ReactPhotoSphereViewer:function(){return oF},ResolutionPlugin:function(){return eZ},SettingsPlugin:function(){return nf},StereoPlugin:function(){return nC},VideoPlugin:function(){return n6},VirtualTourPlugin:function(){return iU},VisibleRangePlugin:function(){return iW}});var i,r,o,a,s,l,c=function(){return(c=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},u=n(6006),p=n(4418);function h(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}h("/* add css styles here (optional) */\n.view-container {\n    position: relative;\n    overflow: hidden;\n}"),h('/*!\n * PhotoSphereViewer 5.4.4\n * @copyright 2014-2015 J\xe9r\xe9my Heleine\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/styles/index.scss */\n.psv-container {\n  --psv-core-loaded: true;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  background: radial-gradient(#fff 0%, #fdfdfd 16%, #fbfbfb 33%, #f8f8f8 49%, #efefef 66%, #dfdfdf 82%, #bfbfbf 100%);\n  overflow: hidden;\n}\n.psv-container * {\n  box-sizing: content-box;\n}\n.psv-canvas-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 0;\n  transition: opacity linear 100ms;\n}\n.psv-canvas {\n  display: block;\n}\n.psv-loader-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 80;\n}\n.psv-loader {\n  --psv-loader-border: 3px;\n  --psv-loader-tickness: 10px;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: rgba(255, 255, 255, 0.7);\n  width: 150px;\n  height: 150px;\n}\n.psv-loader-canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  color: rgba(61, 61, 61, 0.5);\n  z-index: -1;\n}\n.psv-loader-text {\n  font: 600 16px sans-serif;\n}\n.psv-navbar {\n  display: flex;\n  position: absolute;\n  z-index: 90;\n  bottom: -40px;\n  left: 0;\n  width: 100%;\n  height: 40px;\n  background: rgba(61, 61, 61, 0.5);\n  transition: bottom ease-in-out 0.1s;\n  font: 16px sans-serif;\n  cursor: default;\n}\n.psv-navbar--open {\n  bottom: 0;\n}\n.psv-navbar,\n.psv-navbar * {\n  box-sizing: content-box;\n}\n.psv-button {\n  flex: 0 0 auto;\n  padding: 10px;\n  position: relative;\n  cursor: pointer;\n  height: 20px;\n  width: 20px;\n  background: transparent;\n  color: rgba(255, 255, 255, 0.7);\n}\n.psv-button--active {\n  background: rgba(255, 255, 255, 0.2);\n}\n.psv-button--disabled {\n  pointer-events: none;\n  opacity: 0.5;\n}\n.psv-button-svg {\n  width: 100%;\n  transform: scale(1);\n  transition: transform 200ms ease;\n  vertical-align: initial;\n}\n.psv-button:not(.psv-button--disabled):focus-visible {\n  outline: 2px solid #007cff;\n  outline-offset: -2px;\n}\n.psv-container:not(.psv--is-touch) .psv-button--hover-scale:not(.psv-button--disabled):hover .psv-button-svg {\n  transform: scale(1.2);\n}\n.psv-move-button + .psv-move-button {\n  margin-left: -10px;\n}\n.psv-custom-button {\n  width: auto;\n  min-width: 20px;\n}\n.psv-caption {\n  flex: 1 1 100%;\n  color: rgba(255, 255, 255, 0.7);\n  overflow: hidden;\n  text-align: center;\n  cursor: unset;\n  padding: unset;\n  height: unset;\n  width: unset;\n}\n.psv-caption-content {\n  display: inline-block;\n  padding: 10px;\n  white-space: nowrap;\n}\n.psv-zoom-range.psv-button {\n  width: 80px;\n  height: 1px;\n  margin: 10px 0;\n  padding: 9.5px 0;\n  max-width: 600px;\n}\n.psv-zoom-range-line {\n  position: relative;\n  width: 80px;\n  height: 1px;\n  background: rgba(255, 255, 255, 0.7);\n  transition: all 0.3s ease;\n}\n.psv-zoom-range-handle {\n  position: absolute;\n  border-radius: 50%;\n  top: -3px;\n  width: 7px;\n  height: 7px;\n  background: rgba(255, 255, 255, 0.7);\n  transform: scale(1);\n  transition: transform 0.3s ease;\n}\n.psv-zoom-range:not(.psv-button--disabled):hover .psv-zoom-range-line {\n  box-shadow: 0 0 2px rgba(255, 255, 255, 0.7);\n}\n.psv-zoom-range:not(.psv-button--disabled):hover .psv-zoom-range-handle {\n  transform: scale(1.3);\n}\n.psv-notification {\n  position: absolute;\n  z-index: 100;\n  bottom: -40px;\n  display: flex;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 100%;\n  padding: 0 2em;\n  opacity: 0;\n  transition-property: opacity, bottom;\n  transition-timing-function: ease-in-out;\n  transition-duration: 200ms;\n}\n.psv-notification-content {\n  max-width: 50em;\n  background: rgba(61, 61, 61, 0.8);\n  border-radius: 4px;\n  padding: 0.5em 1em;\n  font: 14px sans-serif;\n  color: rgb(255, 255, 255);\n}\n.psv-notification--visible {\n  opacity: 100;\n  bottom: 80px;\n}\n.psv-overlay {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  z-index: 110;\n  inset: 0;\n  background: radial-gradient(#fff 0%, #fdfdfd 16%, #fbfbfb 33%, #f8f8f8 49%, #efefef 66%, #dfdfdf 82%, #bfbfbf 100%);\n  opacity: 0.8;\n  cursor: default;\n}\n.psv-overlay-image {\n  margin-bottom: 4vh;\n}\n.psv-overlay-image svg {\n  width: 50vw;\n}\n@media (orientation: landscape) {\n  .psv-overlay-image svg {\n    width: 25vw;\n  }\n}\n.psv-overlay-title {\n  color: black;\n  font: 30px sans-serif;\n  text-align: center;\n}\n.psv-overlay-text {\n  color: rgba(0, 0, 0, 0.8);\n  font: 20px sans-serif;\n  opacity: 0.8;\n  text-align: center;\n}\n.psv-panel {\n  position: absolute;\n  z-index: 90;\n  right: 0;\n  height: 100%;\n  width: 400px;\n  max-width: calc(100% - 9px);\n  background: rgba(10, 10, 10, 0.7);\n  transform: translate3d(100%, 0, 0);\n  opacity: 0;\n  transition-property: opacity, transform;\n  transition-timing-function: ease-in-out;\n  transition-duration: 100ms;\n  cursor: default;\n  margin-left: 9px;\n}\n.psv--has-navbar .psv-panel {\n  height: calc(100% - 40px);\n}\n.psv-panel-close-button {\n  display: none;\n  position: absolute;\n  top: -1px;\n  right: 0;\n  width: 19.2px;\n  height: 19.2px;\n  padding: 6.4px;\n  background: transparent;\n  color: #fff;\n  transition: background 300ms ease-in-out;\n  cursor: pointer;\n}\n.psv-panel-close-button svg {\n  transition: transform 300ms ease-in-out;\n}\n.psv-panel-close-button:hover {\n  background: rgba(0, 0, 0, 0.9);\n}\n.psv-panel-close-button:hover svg {\n  transform: scale(-1);\n}\n.psv-panel-resizer {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: -9px;\n  width: 9px;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.9);\n  cursor: col-resize;\n}\n.psv-panel-resizer::before {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 1px;\n  margin-top: -14.5px;\n  width: 1px;\n  height: 1px;\n  box-shadow:\n    1px 0 #fff,\n    3px 0px #fff,\n    5px 0px #fff,\n    1px 2px #fff,\n    3px 2px #fff,\n    5px 2px #fff,\n    1px 4px #fff,\n    3px 4px #fff,\n    5px 4px #fff,\n    1px 6px #fff,\n    3px 6px #fff,\n    5px 6px #fff,\n    1px 8px #fff,\n    3px 8px #fff,\n    5px 8px #fff,\n    1px 10px #fff,\n    3px 10px #fff,\n    5px 10px #fff,\n    1px 12px #fff,\n    3px 12px #fff,\n    5px 12px #fff,\n    1px 14px #fff,\n    3px 14px #fff,\n    5px 14px #fff,\n    1px 16px #fff,\n    3px 16px #fff,\n    5px 16px #fff,\n    1px 18px #fff,\n    3px 18px #fff,\n    5px 18px #fff,\n    1px 20px #fff,\n    3px 20px #fff,\n    5px 20px #fff,\n    1px 22px #fff,\n    3px 22px #fff,\n    5px 22px #fff,\n    1px 24px #fff,\n    3px 24px #fff,\n    5px 24px #fff,\n    1px 26px #fff,\n    3px 26px #fff,\n    5px 26px #fff,\n    1px 28px #fff,\n    3px 28px #fff,\n    5px 28px #fff;\n  background: transparent;\n}\n.psv-panel-content {\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  color: rgb(220, 220, 220);\n  font: 16px sans-serif;\n  overflow: auto;\n}\n.psv-panel-content:not(.psv-panel-content--no-margin) {\n  padding: 1em;\n}\n.psv-panel-content--no-interaction {\n  user-select: none;\n  pointer-events: none;\n}\n.psv-panel--open {\n  transform: translate3d(0, 0, 0);\n  opacity: 1;\n  transition-duration: 0.2s;\n}\n.psv-panel--open .psv-panel-close-button,\n.psv-panel--open .psv-panel-resizer {\n  display: block;\n}\n@media screen and (max-width: 400px) {\n  .psv-panel {\n    width: 100% !important;\n    max-width: none;\n  }\n  .psv-panel-resizer {\n    display: none !important;\n  }\n}\n.psv-panel-menu {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.psv-panel-menu-title {\n  flex: none;\n  display: flex;\n  align-items: center;\n  font: 24px sans-serif;\n  margin: 24px 12px;\n}\n.psv-panel-menu-title svg {\n  width: 24px;\n  height: 24px;\n  margin-right: 12px;\n}\n.psv-panel-menu-list {\n  flex: 1;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  overflow-x: hidden;\n}\n.psv-panel-menu-item {\n  min-height: 1.5em;\n  padding: 0.5em 1em;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  transition: background 0.1s ease-in-out;\n}\n.psv-panel-menu-item--active {\n  outline: 1px solid currentcolor;\n  outline-offset: -1px;\n}\n.psv-panel-menu-item-icon {\n  flex: none;\n  height: 1.5em;\n  width: 1.5em;\n  margin-right: 0.5em;\n}\n.psv-panel-menu-item-icon img {\n  max-width: 100%;\n  max-height: 100%;\n}\n.psv-panel-menu-item-icon svg {\n  width: 100%;\n  height: 100%;\n}\n.psv-panel-menu-item:focus-visible {\n  outline: 2px solid #007cff;\n  outline-offset: -2px;\n}\n.psv-panel-menu--stripped .psv-panel-menu-item:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n.psv-panel-menu--stripped .psv-panel-menu-item:nth-child(odd),\n.psv-panel-menu--stripped .psv-panel-menu-item:nth-child(odd)::before {\n  background: rgba(255, 255, 255, 0.1);\n}\n.psv-panel-menu--stripped .psv-panel-menu-item:nth-child(even),\n.psv-panel-menu--stripped .psv-panel-menu-item:nth-child(even)::before {\n  background: transparent;\n}\n.psv-container:not(.psv--is-touch) .psv-panel-menu-item:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n.psv-tooltip {\n  position: absolute;\n  z-index: 50;\n  box-sizing: border-box;\n  max-width: 200px;\n  background: rgba(61, 61, 61, 0.8);\n  border-radius: 4px;\n  padding: 0.5em 1em;\n  opacity: 0;\n  transition-property: opacity, transform;\n  transition-timing-function: ease-in-out;\n  transition-duration: 100ms;\n  cursor: default;\n}\n.psv-tooltip-content {\n  color: rgb(255, 255, 255);\n  font: 14px sans-serif;\n  text-shadow: 0 1px #000;\n}\n.psv-tooltip-arrow {\n  position: absolute;\n  height: 0;\n  width: 0;\n  border: 7px solid transparent;\n}\n.psv-tooltip--top-left,\n.psv-tooltip--top-center,\n.psv-tooltip--top-right {\n  transform: translate3d(0, 5px, 0);\n}\n.psv-tooltip--top-left .psv-tooltip-arrow,\n.psv-tooltip--top-center .psv-tooltip-arrow,\n.psv-tooltip--top-right .psv-tooltip-arrow {\n  border-top-color: rgba(61, 61, 61, 0.8);\n}\n.psv-tooltip--bottom-left,\n.psv-tooltip--bottom-center,\n.psv-tooltip--bottom-right {\n  transform: translate3d(0, -5px, 0);\n}\n.psv-tooltip--bottom-left .psv-tooltip-arrow,\n.psv-tooltip--bottom-center .psv-tooltip-arrow,\n.psv-tooltip--bottom-right .psv-tooltip-arrow {\n  border-bottom-color: rgba(61, 61, 61, 0.8);\n}\n.psv-tooltip--left-top,\n.psv-tooltip--center-left,\n.psv-tooltip--left-bottom {\n  transform: translate3d(5px, 0, 0);\n}\n.psv-tooltip--left-top .psv-tooltip-arrow,\n.psv-tooltip--center-left .psv-tooltip-arrow,\n.psv-tooltip--left-bottom .psv-tooltip-arrow {\n  border-left-color: rgba(61, 61, 61, 0.8);\n}\n.psv-tooltip--right-top,\n.psv-tooltip--center-right,\n.psv-tooltip--right-bottom {\n  transform: translate3d(-5px, 0, 0);\n}\n.psv-tooltip--right-top .psv-tooltip-arrow,\n.psv-tooltip--center-right .psv-tooltip-arrow,\n.psv-tooltip--right-bottom .psv-tooltip-arrow {\n  border-right-color: rgba(61, 61, 61, 0.8);\n}\n.psv-tooltip--left-top,\n.psv-tooltip--top-left {\n  box-shadow: -3px -3px 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--top-center {\n  box-shadow: 0 -3px 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--right-top,\n.psv-tooltip--top-right {\n  box-shadow: 3px -3px 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--left-bottom,\n.psv-tooltip--bottom-left {\n  box-shadow: -3px 3px 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--bottom-center {\n  box-shadow: 0 3px 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--right-bottom,\n.psv-tooltip--bottom-right {\n  box-shadow: 3px 3px 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--center-left {\n  box-shadow: -3px 0 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--center-right {\n  box-shadow: 3px 0 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--visible {\n  transform: translate3d(0, 0, 0);\n  opacity: 1;\n}');var f=n(5033);function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==d(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===d(e)?e:String(e)}(i.key),i)}}function m(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function w(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}function k(t,e){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=_(t);if(e){var r=_(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return P(t)}(this,n)}}function P(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}/*!
 * PhotoSphereViewer.AutorotatePlugin 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var x=Object.defineProperty;!function(t,e){for(var n in e)x(t,n,{get:e[n],enumerable:!0})}({},{AutorotateEvent:function(){return O}});var S=function(t){w(n,t);var e=E(n);function n(t){var i;return b(this,n),(i=e.call(this,n.type)).autorotateEnabled=t,i}return m(n)}(p.$N);S.type="autorotate";var O=S,M=function(t){w(n,t);var e=E(n);function n(t){var i,r;return b(this,n),(r=e.call(this,t,{className:"psv-autorotate-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 41" overflow="visible"><g fill="currentColor" transform-origin="center" transform="scale(1.3)"><path d="M40.5 14.1c-.1-.1-1.2-.5-2.899-1-.101 0-.2-.1-.2-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.4 2.7.9.1 0 .2.1.2.199C6.3 34.4 12.9 39 20.5 39c7.601 0 14.101-4.6 16.9-11.1 0-.101.1-.101.2-.2 1.699-.6 2.699-1 2.8-1l.6-.3V14.3l-.5-.2zM20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.8-1-8.8-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5C9.7 7 14.8 4 20.5 4zm0 33c-5.9 0-11.1-3.1-14-7.899-.2-.301.1-.601.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.601-2 .3-.1.5.2.399.5A16.422 16.422 0 0 1 20.5 37zm18.601-12.1c0 .1-.101.3-.2.3-2.5.9-10.4 3.6-18.4 3.6-7.1 0-15.6-2.699-18.3-3.6C2.1 25.2 2 25 2 24.9V16c0-.1.1-.3.2-.3 2.6-.9 10.6-3.6 18.2-3.6 7.5 0 15.899 2.7 18.5 3.6.1 0 .2.2.2.3v8.9z"/><path d="M18.7 24l6.4-3.7c.3-.2.3-.7 0-.8l-6.4-3.8c-.3-.2-.7 0-.7.4v7.4c0 .5.4.7.7.5z"/></g><!--Created by Nick Bluth from the Noun Project--></svg>\n',iconActive:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 41" overflow="visible"><g fill="currentColor" transform-origin="center" transform="scale(1.3)"><path d="M40.5 14.1c-.1-.1-1.2-.5-2.898-1-.102 0-.202-.1-.202-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.399 2.7.899.1 0 .2.101.2.199C6.3 34.4 12.9 39 20.5 39c7.602 0 14.102-4.6 16.9-11.1 0-.102.1-.102.199-.2 1.699-.601 2.699-1 2.801-1l.6-.3V14.3l-.5-.2zM6.701 11.5C9.7 7 14.8 4 20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.799-1-8.799-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5zM25.1 20.3L18.7 24c-.3.2-.7 0-.7-.5v-7.4c0-.4.4-.6.7-.4l6.399 3.8c.301.1.301.6.001.8zm9.4 8.901A16.421 16.421 0 0 1 20.5 37c-5.9 0-11.1-3.1-14-7.898-.2-.302.1-.602.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.602-2 .298-.1.5.198.398.499z"/></g><!--Created by Nick Bluth from the Noun Project--></svg>\n'})).plugin=r.viewer.getPlugin("autorotate"),null===(i=r.plugin)||void 0===i||i.addEventListener(O.type,P(r)),r}return m(n,[{key:"destroy",value:function(){var t;null===(t=this.plugin)||void 0===t||t.removeEventListener(O.type,this),g(_(n.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin}},{key:"handleEvent",value:function(t){t instanceof O&&this.toggleActive(t.autorotateEnabled)}},{key:"onClick",value:function(){this.plugin.isEnabled()&&(this.plugin.config.autostartOnIdle=!1),this.plugin.toggle()}}]),n}(p.T9);M.id="autorotate";var T=p.P6.getConfigParser({autostartDelay:2e3,autostartOnIdle:!0,autorotateSpeed:p.P6.parseSpeed("2rpm"),autorotatePitch:null,autorotateZoomLvl:null,keypoints:null,startFromClosest:!0},{autostartOnIdle:function(t,e){var n=e.rawConfig;return t&&p.P6.isNil(n.autostartDelay)?(p.P6.logWarn("autostartOnIdle requires a non null autostartDelay"),!1):t},autorotateSpeed:function(t){return p.P6.parseSpeed(t)},autorotatePitch:function(t){return p.P6.isNil(t)?null:p.P6.parseAngle(t,!0)},autorotateZoomLvl:function(t){return p.P6.isNil(t)?null:f.M8C.clamp(t,0,100)}});function j(t){return[t.yaw,t.pitch]}var L=function(t){w(n,t);var e=E(n);function n(t,i){var r;return b(this,n),(r=e.call(this,t,i)).state={initialStart:!0,enabled:!1,idx:-1,curve:[],startStep:null,endStep:null,startTime:null,stepDuration:null,remainingPause:null,lastTime:null,tooltip:null},r.state.initialStart=!p.P6.isNil(r.config.autostartDelay),r}return m(n,[{key:"init",value:function(){g(_(n.prototype),"init",this).call(this),this.video=this.viewer.getPlugin("video"),this.markers=this.viewer.getPlugin("markers"),this.config.keypoints&&(this.setKeypoints(this.config.keypoints),delete this.config.keypoints),this.viewer.addEventListener(p.U3.StopAllEvent.type,this),this.viewer.addEventListener(p.U3.BeforeRenderEvent.type,this),this.video||this.viewer.addEventListener(p.U3.KeypressEvent.type,this)}},{key:"destroy",value:function(){this.viewer.removeEventListener(p.U3.StopAllEvent.type,this),this.viewer.removeEventListener(p.U3.BeforeRenderEvent.type,this),this.viewer.removeEventListener(p.U3.KeypressEvent.type,this),delete this.video,delete this.markers,delete this.keypoints,g(_(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){switch(t.type){case p.U3.StopAllEvent.type:this.stop();break;case p.U3.BeforeRenderEvent.type:this.__beforeRender(t.timestamp);break;case p.U3.KeypressEvent.type:t.key===p.tl.KEY_CODES.Space&&this.viewer.state.keyboardEnabled&&(this.toggle(),t.preventDefault())}}},{key:"setKeypoints",value:function(t){var e=this;if(t){if(t.length<2)throw new p.Il("At least two points are required");this.keypoints=t.map(function(t,n){var i,r={position:null,markerId:null,pause:0,tooltip:null};if("string"==typeof t?r.markerId=t:p.P6.isExtendedPosition(t)?i=t:(r.markerId=t.markerId,r.pause=t.pause,i=t.position,t.tooltip&&"object"===d(t.tooltip)?r.tooltip=t.tooltip:"string"==typeof t.tooltip&&(r.tooltip={content:t.tooltip})),r.markerId){if(!e.markers)throw new p.Il("Keypoint #".concat(n," references a marker but the markers plugin is not loaded"));var o=e.markers.getMarker(r.markerId);r.position=j(o.state.position)}else if(i)r.position=j(e.viewer.dataHelper.cleanPosition(i));else throw new p.Il("Keypoint #".concat(n," is missing marker or position"));return r})}else this.keypoints=null;this.isEnabled()&&(this.stop(),this.start())}},{key:"isEnabled",value:function(){return this.state.enabled}},{key:"start",value:function(){this.isEnabled()||(this.viewer.stopAll(),this.keypoints?this.config.startFromClosest&&this.__shiftKeypoints():this.__animate(),this.state.initialStart=!1,this.state.enabled=!0,this.dispatchEvent(new O(!0)))}},{key:"stop",value:function(){this.isEnabled()&&(this.__hideTooltip(),this.__reset(),this.viewer.stopAnimation(),this.viewer.dynamics.position.stop(),this.viewer.dynamics.zoom.stop(),this.state.enabled=!1,this.dispatchEvent(new O(!1)))}},{key:"toggle",value:function(){this.isEnabled()?this.stop():this.start()}},{key:"reverse",value:function(){this.isEnabled()&&!this.keypoints&&(this.config.autorotateSpeed=-this.config.autorotateSpeed,this.__animate())}},{key:"__animate",value:function(){var t=this;(p.P6.isNil(this.config.autorotateZoomLvl)?Promise.resolve(!0):this.viewer.animate({zoom:this.config.autorotateZoomLvl,speed:"".concat(2*this.viewer.config.zoomSpeed,"rpm")})).then(function(e){if(e){var n;t.viewer.dynamics.position.roll({yaw:t.config.autorotateSpeed<0},Math.abs(t.config.autorotateSpeed/t.viewer.config.moveSpeed)),t.viewer.dynamics.position.goto({pitch:null!==(n=t.config.autorotatePitch)&&void 0!==n?n:t.viewer.config.defaultPitch},Math.abs(t.config.autorotateSpeed/t.viewer.config.moveSpeed))}})}},{key:"__reset",value:function(){this.state.idx=-1,this.state.curve=[],this.state.startStep=null,this.state.endStep=null,this.state.startTime=null,this.state.stepDuration=null,this.state.remainingPause=null,this.state.lastTime=null,this.state.tooltip=null}},{key:"__beforeRender",value:function(t){(this.state.initialStart||this.config.autostartOnIdle)&&this.viewer.state.idleTime>0&&t-this.viewer.state.idleTime>this.config.autostartDelay&&this.start(),this.isEnabled()&&this.keypoints&&(this.state.startTime||(this.state.endStep=j(this.viewer.getPosition()),this.__nextStep(),this.state.startTime=t,this.state.lastTime=t),this.__nextFrame(t))}},{key:"__shiftKeypoints",value:function(){var t,e,n=j(this.viewer.getPosition()),i=this.__findMinIndex(this.keypoints,function(t){return p.P6.greatArcDistance(t.position,n)});(e=this.keypoints).push.apply(e,function(t){if(Array.isArray(t))return v(t)}(t=this.keypoints.splice(0,i))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}},{key:"__incrementIdx",value:function(){this.state.idx++,this.state.idx===this.keypoints.length&&(this.state.idx=0)}},{key:"__showTooltip",value:function(){var t=this.keypoints[this.state.idx];if(t.tooltip){var e=this.viewer.dataHelper.vector3ToViewerCoords(this.viewer.state.direction);this.state.tooltip=this.viewer.createTooltip({content:t.tooltip.content,position:t.tooltip.position,top:e.y,left:e.x})}else if(t.markerId){var n=this.markers.getMarker(t.markerId);n.showTooltip(),this.state.tooltip=n.tooltip}}},{key:"__hideTooltip",value:function(){if(this.state.tooltip){var t=this.keypoints[this.state.idx];t.tooltip?this.state.tooltip.hide():t.markerId&&this.markers.getMarker(t.markerId).hideTooltip(),this.state.tooltip=null}}},{key:"__nextPoint",value:function(){var t=[];if(-1===this.state.idx){var e=j(this.viewer.getPosition());t.push(e,e,this.keypoints[0].position,this.keypoints[1].position)}else for(var n=-1;n<3;n++){var i=this.state.idx+n<0?this.keypoints[this.keypoints.length-1]:this.keypoints[(this.state.idx+n)%this.keypoints.length];t.push(i.position)}for(var r=[new f.FM8(t[0][0],t[0][1])],o=0,a=1;a<=3;a++){var s=t[a-1][0]-t[a][0];s>Math.PI?o+=1:s<-Math.PI&&(o-=1),0!==o&&1===a&&(r[0].x-=2*o*Math.PI,o=0),r.push(new f.FM8(t[a][0]+2*o*Math.PI,t[a][1]))}var l=new f.gti(r).getPoints(48).map(function(t){return[t.x,t.y]});this.state.curve=l.slice(17,33),-1!==this.state.idx?(this.state.remainingPause=this.keypoints[this.state.idx].pause,this.state.remainingPause?this.__showTooltip():this.__incrementIdx()):this.__incrementIdx()}},{key:"__nextStep",value:function(){0===this.state.curve.length&&(this.__nextPoint(),this.state.endStep[0]=p.P6.parseAngle(this.state.endStep[0])),this.state.startStep=this.state.endStep,this.state.endStep=this.state.curve.shift();var t=p.P6.greatArcDistance(this.state.startStep,this.state.endStep);this.state.stepDuration=1e3*t/Math.abs(this.config.autorotateSpeed),0===t&&this.__nextStep()}},{key:"__nextFrame",value:function(t){var e=t-this.state.lastTime;if(this.state.lastTime=t,this.state.remainingPause){if(this.state.remainingPause=Math.max(0,this.state.remainingPause-e),this.state.remainingPause>0)return;this.__hideTooltip(),this.__incrementIdx(),this.state.startTime=t}var n=(t-this.state.startTime)/this.state.stepDuration;n>=1&&(this.__nextStep(),n=0,this.state.startTime=t),this.viewer.rotate({yaw:this.state.startStep[0]+(this.state.endStep[0]-this.state.startStep[0])*n,pitch:this.state.startStep[1]+(this.state.endStep[1]-this.state.startStep[1])*n})}},{key:"__findMinIndex",value:function(t,e){var n=0,i=Number.MAX_VALUE;return t.forEach(function(t,r){var o=e(t);o<i&&(i=o,n=r)}),n}}]),n}(p.Yc);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach(function(e){z(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function z(t,e,n){return(e=D(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function U(){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=X(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function H(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,D(i.key),i)}}function B(t,e,n){return e&&H(t.prototype,e),n&&H(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function D(t){var e=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==C(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===C(e)?e:String(e)}function V(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function Y(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G(t,e)}function G(t,e){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=X(t);if(e){var r=X(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return q(t)}(this,n)}}function q(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}L.id="autorotate",L.configParser=T,L.readonlyOptions=["keypoints"],(0,p.KI)(M,"start"),p.Of.lang[M.id]="Automatic rotation";/*!
 * PhotoSphereViewer.MarkersPlugin 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var F=Object.defineProperty;!function(t,e){for(var n in e)F(t,n,{get:e[n],enumerable:!0})}({},{EnterMarkerEvent:function(){return ti},GotoMarkerDoneEvent:function(){return Q},HideMarkersEvent:function(){return tp},LeaveMarkerEvent:function(){return te},MarkerVisibilityEvent:function(){return $},MarkersPluginEvent:function(){return K},RenderMarkersListEvent:function(){return ty},SelectMarkerEvent:function(){return to},SelectMarkerListEvent:function(){return ts},SetMarkersEvent:function(){return tf},ShowMarkersEvent:function(){return td},UnselectMarkerEvent:function(){return tc}});var K=function(t){Y(n,t);var e=W(n);function n(){return V(this,n),e.apply(this,arguments)}return B(n)}(p.$N),Z=function(t){Y(n,t);var e=W(n);function n(t,i){var r;return V(this,n),(r=e.call(this,n.type)).marker=t,r.visible=i,r}return B(n)}(K);Z.type="marker-visibility";var $=Z,J=function(t){Y(n,t);var e=W(n);function n(t){var i;return V(this,n),(i=e.call(this,n.type)).marker=t,i}return B(n)}(K);J.type="goto-marker-done";var Q=J,tt=function(t){Y(n,t);var e=W(n);function n(t){var i;return V(this,n),(i=e.call(this,n.type)).marker=t,i}return B(n)}(K);tt.type="leave-marker";var te=tt,tn=function(t){Y(n,t);var e=W(n);function n(t){var i;return V(this,n),(i=e.call(this,n.type)).marker=t,i}return B(n)}(K);tn.type="enter-marker";var ti=tn,tr=function(t){Y(n,t);var e=W(n);function n(t,i,r){var o;return V(this,n),(o=e.call(this,n.type)).marker=t,o.doubleClick=i,o.rightClick=r,o}return B(n)}(K);tr.type="select-marker";var to=tr,ta=function(t){Y(n,t);var e=W(n);function n(t){var i;return V(this,n),(i=e.call(this,n.type)).marker=t,i}return B(n)}(K);ta.type="select-marker-list";var ts=ta,tl=function(t){Y(n,t);var e=W(n);function n(t){var i;return V(this,n),(i=e.call(this,n.type)).marker=t,i}return B(n)}(K);tl.type="unselect-marker";var tc=tl,tu=function(t){Y(n,t);var e=W(n);function n(){return V(this,n),e.call(this,n.type)}return B(n)}(K);tu.type="hide-markers";var tp=tu,th=function(t){Y(n,t);var e=W(n);function n(t){var i;return V(this,n),(i=e.call(this,n.type)).markers=t,i}return B(n)}(K);th.type="set-markers";var tf=th,tv=function(t){Y(n,t);var e=W(n);function n(){return V(this,n),e.call(this,n.type)}return B(n)}(K);tv.type="show-markers";var td=tv,tg=function(t){Y(n,t);var e=W(n);function n(t){var i;return V(this,n),(i=e.call(this,n.type)).markers=t,i}return B(n)}(K);tg.type="render-markers-list";var ty=tg,tm=function(t){Y(n,t);var e=W(n);function n(t){var i;return V(this,n),(i=e.call(this,t,{className:"psv-markers-button",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 9 81 81"><path fill="currentColor" d="M50.5 90S22.9 51.9 22.9 36.6 35.2 9 50.5 9s27.6 12.4 27.6 27.6S50.5 90 50.5 90zm0-66.3c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11z"/><!--Created by Rohith M S from the Noun Project--></svg>\n',hoverScale:!0,collapsable:!0,tabbable:!0})).plugin=i.viewer.getPlugin("markers"),i.plugin&&(i.plugin.addEventListener(td.type,q(i)),i.plugin.addEventListener(tp.type,q(i)),i.toggleActive(!0)),i}return B(n,[{key:"destroy",value:function(){this.plugin&&(this.plugin.removeEventListener(td.type,this),this.plugin.removeEventListener(tp.type,this)),U(X(n.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin}},{key:"handleEvent",value:function(t){t instanceof td?this.toggleActive(!0):t instanceof tp&&this.toggleActive(!1)}},{key:"onClick",value:function(){this.plugin.toggleAllMarkers()}}]),n}(p.T9);tm.id="markers";var tb='<svg xmlns="http://www.w3.org/2000/svg" viewBox="9 9 81 81"><path fill="currentColor" d="M37.5 90S9.9 51.9 9.9 36.6 22.2 9 37.5 9s27.6 12.4 27.6 27.6S37.5 90 37.5 90zm0-66.3c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11zM86.7 55H70c-1.8 0-3.3-1.5-3.3-3.3s1.5-3.3 3.3-3.3h16.7c1.8 0 3.3 1.5 3.3 3.3S88.5 55 86.7 55zm0-25h-15a3.3 3.3 0 0 1-3.3-3.3c0-1.8 1.5-3.3 3.3-3.3h15c1.8 0 3.3 1.5 3.3 3.3 0 1.8-1.5 3.3-3.3 3.3zM56.5 73h30c1.8 0 3.3 1.5 3.3 3.3 0 1.8-1.5 3.3-3.3 3.3h-30a3.3 3.3 0 0 1-3.3-3.3 3.2 3.2 0 0 1 3.3-3.3z"/><!--Created by Rohith M S from the Noun Project--></svg>\n',tw="http://www.w3.org/2000/svg",tk="psvMarker",tE=p.P6.dasherize(tk),tP="marker",t_="markersList",tx={amount:2,duration:100,easing:"linear"},tS=function(t){Y(n,t);var e=W(n);function n(t){var i;return V(this,n),(i=e.call(this,t,{className:" psv-markers-list-button",icon:tb,hoverScale:!0,collapsable:!0,tabbable:!0})).plugin=i.viewer.getPlugin("markers"),i.plugin&&(i.viewer.addEventListener(p.U3.ShowPanelEvent.type,q(i)),i.viewer.addEventListener(p.U3.HidePanelEvent.type,q(i))),i}return B(n,[{key:"destroy",value:function(){this.viewer.removeEventListener(p.U3.ShowPanelEvent.type,this),this.viewer.removeEventListener(p.U3.HidePanelEvent.type,this),U(X(n.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin}},{key:"handleEvent",value:function(t){t instanceof p.U3.ShowPanelEvent?this.toggleActive(t.panelId===t_):t instanceof p.U3.HidePanelEvent&&this.toggleActive(!1)}},{key:"onClick",value:function(){this.plugin.toggleMarkersList()}}]),n}(p.T9);function tO(t){for(var e=[t[0]],n=0,i=1;i<t.length;i++){var r=t[i-1][0]-t[i][0];r>Math.PI?n+=1:r<-Math.PI&&(n-=1),e.push([t[i][0]+2*n*Math.PI,t[i][1]])}return e}function tM(t){var e=tO(t).reduce(function(t,e){return[t[0]+e[0],t[1]+e[1]]});return[p.P6.parseAngle(e[0]/t.length),e[1]/t.length]}tS.id="markersList";var tT=new f.Pa4,tj=new f.Pa4,tL=new f.Pa4,tC=new f.Pa4,tR=new f.Pa4,tI=new f.Pa4,tz=((i=tz||{}).image="image",i.imageLayer="imageLayer",i.videoLayer="videoLayer",i.html="html",i.element="element",i.polygon="polygon",i.polygonPixels="polygonPixels",i.polyline="polyline",i.polylinePixels="polylinePixels",i.square="square",i.rect="rect",i.circle="circle",i.ellipse="ellipse",i.path="path",i),tA=function(){function t(e,n,i){var r=this;if(V(this,t),this.viewer=e,this.plugin=n,this.state={dynamicSize:!1,anchor:null,visible:!1,staticTooltip:!1,position:null,position2D:null,positions3D:null,size:null},!i.id)throw new p.Il("missing marker id");if(this.type=t.getType(i),this.isNormal())this.element=document.createElement("div");else if(this.isPolygon())this.element=document.createElementNS(tw,"polygon");else if(this.isPolyline())this.element=document.createElementNS(tw,"polyline");else if(this.isSvg()){var o="square"===this.type?"rect":this.type,a=document.createElementNS(tw,o);this.element=document.createElementNS(tw,"svg"),this.domElement.appendChild(a)}else this.is3d()&&(this.element=this.__createMesh());this.is3d()||(this.element.id="psv-marker-".concat(i.id),this.element[tk]=this),(this.isNormal()||this.isSvg())&&this.domElement.addEventListener("transitionend",function(){r.domElement.style.transition=""}),this.update(i),"videoLayer"===this.type&&this.viewer.needsContinuousUpdate(!0)}return B(t,[{key:"id",get:function(){return this.config.id}},{key:"data",get:function(){return this.config.data}},{key:"domElement",get:function(){return this.is3d()?null:this.element}},{key:"threeElement",get:function(){return this.is3d()?this.element:null}},{key:"video",get:function(){if("videoLayer"===this.type)return this.threeElement.children[0].material.map.image;p.P6.logWarn("Marker ".concat(this.id," is not a video marker"))}},{key:"destroy",value:function(){this.hideTooltip(),this.is3d()?delete this.threeElement.children[0].userData[tk]:delete this.element[tk],"videoLayer"===this.type&&this.viewer.needsContinuousUpdate(!1)}},{key:"is3d",value:function(){return"imageLayer"===this.type||"videoLayer"===this.type}},{key:"isNormal",value:function(){return"image"===this.type||"html"===this.type||"element"===this.type}},{key:"isPoly",value:function(){return this.isPolygon()||this.isPolyline()}},{key:"isPolyPixels",value:function(){return"polygonPixels"===this.type||"polylinePixels"===this.type}},{key:"isPolyAngles",value:function(){return"polygon"===this.type||"polyline"===this.type}},{key:"isPolygon",value:function(){return"polygon"===this.type||"polygonPixels"===this.type}},{key:"isPolyline",value:function(){return"polyline"===this.type||"polylinePixels"===this.type}},{key:"isSvg",value:function(){return"square"===this.type||"rect"===this.type||"circle"===this.type||"ellipse"===this.type||"path"===this.type}},{key:"getScale",value:function(t,e,n){var i=1;if("function"==typeof this.config.scale)i=this.config.scale(t,e);else if(this.config.scale){if(Array.isArray(this.config.scale.zoom)){var r=A(this.config.scale.zoom,2),o=r[0];i*=o+(r[1]-o)*p.tl.EASINGS.inQuad(t/100)}if(Array.isArray(this.config.scale.yaw)){var a=A(this.config.scale.yaw,2),s=a[0],l=a[1],c=f.M8C.degToRad(this.viewer.state.hFov)/2,u=Math.abs(p.P6.getShortestArc(this.state.position.yaw,e.yaw));i*=l+(s-l)*p.tl.EASINGS.outQuad(Math.max(0,(c-u)/c))}}return n&&this.config.hoverScale&&(i*=this.config.hoverScale.amount),i}},{key:"getListContent",value:function(){var t;return this.config.listContent?this.config.listContent:null!==(t=this.config.tooltip)&&void 0!==t&&t.content?this.config.tooltip.content:this.config.html?this.config.html:this.id}},{key:"showTooltip",value:function(t,e){var n;if(this.state.visible&&null!==(n=this.config.tooltip)&&void 0!==n&&n.content&&this.state.position2D){var i=I(I({},this.config.tooltip),{},{style:{pointerEvents:this.state.staticTooltip?"auto":"none"},data:this,top:0,left:0});if(this.isPoly()||this.is3d()){if(t||e){var r=p.P6.getPosition(this.viewer.container);i.top=e-r.y,i.left=t-r.x,i.box={width:20,height:20}}else i.top=this.state.position2D.y,i.left=this.state.position2D.x}else{var o=this.viewer.dataHelper.vector3ToViewerCoords(this.state.positions3D[0]),a=this.state.size.width,s=this.state.size.height;this.config.hoverScale&&!this.state.staticTooltip&&(a*=this.config.hoverScale.amount,s*=this.config.hoverScale.amount),i.top=o.y-s*this.state.anchor.y+s/2,i.left=o.x-a*this.state.anchor.x+a/2,i.box={width:a,height:s}}this.tooltip?this.tooltip.update(this.config.tooltip.content,i):this.tooltip=this.viewer.createTooltip(i)}}},{key:"hideTooltip",value:function(){this.tooltip&&(this.tooltip.hide(),this.tooltip=null)}},{key:"update",value:function(e){var n=t.getType(e,!0);if(void 0!==n&&n!==this.type)throw new p.Il("cannot change marker type");if(p.P6.isExtendedPosition(e)&&(p.P6.logWarn('Use the "position" property to configure the position of a marker'),e.position=this.viewer.dataHelper.cleanPosition(e)),"width"in e&&"height"in e&&(p.P6.logWarn('Use the "size" property to configure the size of a marker'),e.size={width:e.width,height:e.height}),this.config=p.P6.deepmerge(this.config,e),"string"==typeof this.config.tooltip&&(this.config.tooltip={content:this.config.tooltip}),this.config.tooltip&&!this.config.tooltip.trigger&&(this.config.tooltip.trigger="hover"),this.config.scale&&Array.isArray(this.config.scale)&&(this.config.scale={zoom:this.config.scale}),"boolean"==typeof this.config.hoverScale?this.config.hoverScale=this.config.hoverScale?this.plugin.config.defaultHoverScale||tx:null:"number"==typeof this.config.hoverScale?this.config.hoverScale={amount:this.config.hoverScale}:this.config.hoverScale||(this.config.hoverScale=this.plugin.config.defaultHoverScale),this.config.hoverScale&&(this.config.hoverScale=I(I(I({},tx),this.plugin.config.defaultHoverScale),this.config.hoverScale)),p.P6.isNil(this.config.visible)&&(this.config.visible=!0),this.state.anchor=p.P6.parsePoint(this.config.anchor),!this.is3d()){var i,r=this.domElement;r.setAttribute("class","psv-marker"),this.isNormal()||this.isSvg()?r.classList.add("psv-marker--normal"):r.classList.add("psv-marker--poly"),this.state.visible&&r.classList.add("psv-marker--visible"),this.config.tooltip&&r.classList.add("psv-marker--has-tooltip"),this.config.content&&r.classList.add("psv-marker--has-content"),this.config.className&&p.P6.addClasses(r,this.config.className),r.style.opacity="".concat(null!==(i=this.config.opacity)&&void 0!==i?i:1),this.config.style&&Object.assign(r.style,this.config.style)}this.isNormal()?this.__updateNormal():this.isPoly()?this.__updatePoly():this.isSvg()?this.__updateSvg():this.is3d()&&this.__update3d()}},{key:"__updateNormal",value:function(){var t=this.domElement;if(!p.P6.isExtendedPosition(this.config.position))throw new p.Il("missing marker position");if(this.config.image&&!this.config.size)throw new p.Il("missing marker size");switch(this.config.size?(this.state.dynamicSize=!1,this.state.size=this.config.size,t.style.width=this.config.size.width+"px",t.style.height=this.config.size.height+"px"):this.state.dynamicSize=!0,this.type){case"image":this.definition=this.config.image,t.style.backgroundImage="url(".concat(this.config.image,")");break;case"html":this.definition=this.config.html,t.innerHTML=this.config.html;break;case"element":this.definition!==this.config.element&&(this.definition=this.config.element,t.childNodes.forEach(function(t){return t.remove()}),t.appendChild(this.config.element),this.config.element.style.display="block")}t.style.transformOrigin="".concat(100*this.state.anchor.x,"% ").concat(100*this.state.anchor.y,"%"),this.state.position=this.viewer.dataHelper.cleanPosition(this.config.position),this.state.positions3D=[this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position)]}},{key:"__updateSvg",value:function(){var t=this.domElement.firstElementChild;if(!p.P6.isExtendedPosition(this.config.position))throw new p.Il("missing marker position");switch(this.state.dynamicSize=!0,this.type){case"square":this.definition={x:0,y:0,width:this.config.square,height:this.config.square};break;case"rect":Array.isArray(this.config.rect)?this.definition={x:0,y:0,width:this.config.rect[0],height:this.config.rect[1]}:this.definition={x:0,y:0,width:this.config.rect.width,height:this.config.rect.height};break;case"circle":this.definition={cx:this.config.circle,cy:this.config.circle,r:this.config.circle};break;case"ellipse":Array.isArray(this.config.ellipse)?this.definition={cx:this.config.ellipse[0],cy:this.config.ellipse[1],rx:this.config.ellipse[0],ry:this.config.ellipse[1]}:this.definition={cx:this.config.ellipse.rx,cy:this.config.ellipse.ry,rx:this.config.ellipse.rx,ry:this.config.ellipse.ry};break;case"path":this.definition={d:this.config.path}}Object.entries(this.definition).forEach(function(e){var n=A(e,2),i=n[0],r=n[1];t.setAttributeNS(null,i,r)}),this.config.svgStyle?Object.entries(this.config.svgStyle).forEach(function(e){var n=A(e,2),i=n[0],r=n[1];t.setAttributeNS(null,p.P6.dasherize(i),r)}):t.setAttributeNS(null,"fill","rgba(0,0,0,0.5)"),this.domElement.style.transformOrigin="".concat(100*this.state.anchor.x,"% ").concat(100*this.state.anchor.y,"%"),this.state.position=this.viewer.dataHelper.cleanPosition(this.config.position),this.state.positions3D=[this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position)]}},{key:"__updatePoly",value:function(){var t=this,e=this.domElement;this.state.dynamicSize=!0,this.config.svgStyle?(Object.entries(this.config.svgStyle).forEach(function(t){var n=A(t,2),i=n[0],r=n[1];e.setAttributeNS(null,p.P6.dasherize(i),r)}),this.isPolyline()&&!this.config.svgStyle.fill&&e.setAttributeNS(null,"fill","none")):this.isPolygon()?e.setAttributeNS(null,"fill","rgba(0,0,0,0.5)"):this.isPolyline()&&(e.setAttributeNS(null,"fill","none"),e.setAttributeNS(null,"stroke","rgb(0,0,0)"));var n=this.config[this.type];if(!Array.isArray(n[0]))for(var i=0;i<n.length;i++)n.splice(i,2,[n[i],n[i+1]]);this.isPolyPixels()?this.definition=n.map(function(e){var n=t.viewer.dataHelper.textureCoordsToSphericalCoords({textureX:e[0],textureY:e[1]});return[n.yaw,n.pitch]}):this.definition=n.map(function(t){return[p.P6.parseAngle(t[0]),p.P6.parseAngle(t[1],!0)]});var r=this.isPolygon()?tM(this.definition):function(t){for(var e=tO(t),n=0,i=[],r=0;r<e.length-1;r++){var o=p.P6.greatArcDistance(e[r],e[r+1])*p.tl.SPHERE_RADIUS;i.push(o),n+=o}for(var a=0,s=0;s<e.length-1;s++){if(a+i[s]>n/2){var l=(n/2-a)/i[s];return function(t,e,n){var i=A(t,2),r=i[0],o=i[1],a=A(e,2),s=a[0],l=a[1],c=p.P6.greatArcDistance(t,e),u=Math.sin((1-n)*c)/Math.sin(c),h=Math.sin(n*c)/Math.sin(c),f=u*Math.cos(o)*Math.cos(r)+h*Math.cos(l)*Math.cos(s),v=u*Math.cos(o)*Math.sin(r)+h*Math.cos(l)*Math.sin(s);return[Math.atan2(v,f),Math.atan2(u*Math.sin(o)+h*Math.sin(l),Math.sqrt(f*f+v*v))]}(e[s],e[s+1],l)}a+=i[s]}return e[Math.round(e.length/2)]}(this.definition);this.state.position={yaw:r[0],pitch:r[1]},this.state.positions3D=this.definition.map(function(e){return t.viewer.dataHelper.sphericalCoordsToVector3({yaw:e[0],pitch:e[1]})})}},{key:"__update3d",value:function(){var t,e,n=this,i=this.threeElement,r=i.children[0];if(this.state.dynamicSize=!1,p.P6.isExtendedPosition(this.config.position)){if(!this.config.size)throw new p.Il("missing marker size");switch(this.state.position=this.viewer.dataHelper.cleanPosition(this.config.position),this.state.size=this.config.size,r.position.set(.5-this.state.anchor.x,this.state.anchor.y-.5,0),this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position,i.position),i.lookAt(0,i.position.y,0),this.config.orientation){case"horizontal":i.rotateX(this.state.position.pitch<0?-Math.PI/2:Math.PI/2);break;case"vertical-left":i.rotateY(-(.4*Math.PI));break;case"vertical-right":i.rotateY(.4*Math.PI)}i.scale.set(this.config.size.width/100,this.config.size.height/100,1);var o=r.geometry.getAttribute("position");this.state.positions3D=[0,1,3,2].map(function(t){var e=new f.Pa4;return e.fromBufferAttribute(o,t),r.localToWorld(e)})}else{if((null===(a=this.config.position)||void 0===a?void 0:a.length)!==4)throw new p.Il("missing marker position");var a,s=this.config.position.map(function(t){return n.viewer.dataHelper.cleanPosition(t)}),l=s.map(function(t){return n.viewer.dataHelper.sphericalCoordsToVector3(t)}),c=tM(s.map(function(t){return[t.yaw,t.pitch]}));this.state.position={yaw:c[0],pitch:c[1]},this.state.positions3D=l;var u=r.geometry.getAttribute("position");[l[0],l[1],l[3],l[2]].forEach(function(t,e){u.setX(e,t.x),u.setY(e,t.y),u.setZ(e,t.z)}),u.needsUpdate=!0,this.__setTextureWrap(r.material.map)}switch(this.type){case"videoLayer":if(this.definition!==this.config.videoLayer){null===(h=r.material.map)||void 0===h||h.dispose();var h,v=document.createElement("video");v.crossOrigin=this.viewer.config.withCredentials?"use-credentials":"anonymous",v.loop=!0,v.playsInline=!0,v.muted=!0,v.autoplay=!0,v.preload="metadata",v.src=this.config.videoLayer,this.viewer.container.appendChild(v),r.material.map=new f.fO1(v),p.P6.isExtendedPosition(this.config.position)||v.addEventListener("loadedmetadata",function(){r.material.map.userData[tk]={width:v.videoWidth,height:v.videoHeight},n.__setTextureWrap(r.material.map)},{once:!0}),v.play(),this.definition=this.config.videoLayer}break;case"imageLayer":this.definition!==this.config.imageLayer&&(null===(t=r.material.map)||void 0===t||t.dispose(),r.material.map=new f.xEZ,this.viewer.textureLoader.loadImage(this.config.imageLayer).then(function(t){p.P6.isExtendedPosition(n.config.position)||(r.material.map.userData[tk]={width:t.width,height:t.height},n.__setTextureWrap(r.material.map)),r.material.map.image=t,r.material.map.anisotropy=4,r.material.map.needsUpdate=!0,n.viewer.needsUpdate()}),this.definition=this.config.imageLayer)}r.material.opacity=null!==(e=this.config.opacity)&&void 0!==e?e:1}},{key:"__setTextureWrap",value:function(t){var e=this;if(t){var n=t.userData[tk];if(!n||!n.height||!n.width){t.repeat.set(1,1),t.offset.set(0,0);return}var i=this.config.position.map(function(t){return e.viewer.dataHelper.cleanPosition(t)}),r=(p.P6.greatArcDistance([i[0].yaw,i[0].pitch],[i[1].yaw,i[1].pitch])+p.P6.greatArcDistance([i[3].yaw,i[3].pitch],[i[2].yaw,i[2].pitch]))/(p.P6.greatArcDistance([i[1].yaw,i[1].pitch],[i[2].yaw,i[2].pitch])+p.P6.greatArcDistance([i[0].yaw,i[0].pitch],[i[3].yaw,i[3].pitch])),o=n.width/n.height,a=0,s=0;r<o?a=o-r:s=1/o-1/r,t.wrapS=f.rpg,t.wrapT=f.rpg,t.repeat.set(1-a,1-s),t.offset.set(a/2,s/2),t.needsUpdate=!0}}},{key:"__createMesh",value:function(){var t=new f.vBJ({transparent:!0,opacity:1,depthTest:!1}),e=new f._12(1,1),n=new f.Kj0(e,t);n.userData=z({},tk,this);var i=new f.ZAu().add(n);return Object.defineProperty(i,"visible",{enumerable:!0,get:function(){return this.children[0].userData[tk].state.visible},set:function(t){this.children[0].userData[tk].state.visible=t}}),i}},{key:"updateSize",value:function(){if(this.state.dynamicSize&&(this.isNormal()||this.isSvg())){var t=this.domElement,e=!this.state.size;if(e&&t.classList.add("psv-marker--transparent"),this.isSvg()){var n=t.firstElementChild.getBoundingClientRect();this.state.size={width:n.width,height:n.height}}else this.state.size={width:t.offsetWidth,height:t.offsetHeight};e&&t.classList.remove("psv-marker--transparent"),this.isSvg()&&(t.style.width=this.state.size.width+"px",t.style.height=this.state.size.height+"px"),"element"!==this.type&&(this.state.dynamicSize=!1)}}}],[{key:"getType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];if(Object.keys(tz).forEach(function(e){t[e]&&n.push(e)}),0!==n.length||e){if(n.length>1)throw new p.Il("multiple marker content, either ".concat(Object.keys(tz).join(", ")))}else throw new p.Il("missing marker content, either ".concat(Object.keys(tz).join(", ")));return n[0]}}]),t}(),tN=p.P6.getConfigParser({clickEventOnMarker:!1,gotoMarkerSpeed:"8rpm",markers:null,defaultHoverScale:null},{defaultHoverScale:function(t){return t?(!0===t&&(t=tx),"number"==typeof t&&(t={amount:t}),I(I({},tx),t)):null}}),tU=function(t){Y(n,t);var e=W(n);function n(t,i){var r;return V(this,n),(r=e.call(this,t,i)).markers={},r.state={visible:!0,showAllTooltips:!1,currentMarker:null,hoveringMarker:null,needsReRender:!1},r.container=document.createElement("div"),r.container.className="psv-markers",r.viewer.container.appendChild(r.container),r.svgContainer=document.createElementNS(tw,"svg"),r.svgContainer.setAttribute("class","psv-markers-svg-container"),r.container.appendChild(r.svgContainer),r.container.addEventListener("mouseenter",q(r),!0),r.container.addEventListener("mouseleave",q(r),!0),r.container.addEventListener("mousemove",q(r),!0),r.container.addEventListener("contextmenu",q(r)),r}return B(n,[{key:"init",value:function(){U(X(n.prototype),"init",this).call(this),p.P6.checkStylesheet(this.viewer.container,"markers-plugin"),this.viewer.addEventListener(p.U3.ClickEvent.type,this),this.viewer.addEventListener(p.U3.DoubleClickEvent.type,this),this.viewer.addEventListener(p.U3.RenderEvent.type,this),this.viewer.addEventListener(p.U3.ConfigChangedEvent.type,this),this.viewer.addEventListener(p.U3.ObjectEnterEvent.type,this),this.viewer.addEventListener(p.U3.ObjectHoverEvent.type,this),this.viewer.addEventListener(p.U3.ObjectLeaveEvent.type,this),this.viewer.addEventListener(p.U3.ReadyEvent.type,this,{once:!0})}},{key:"destroy",value:function(){this.clearMarkers(!1),this.viewer.unobserveObjects(tk),this.viewer.removeEventListener(p.U3.ClickEvent.type,this),this.viewer.removeEventListener(p.U3.DoubleClickEvent.type,this),this.viewer.removeEventListener(p.U3.RenderEvent.type,this),this.viewer.removeEventListener(p.U3.ObjectEnterEvent.type,this),this.viewer.removeEventListener(p.U3.ObjectHoverEvent.type,this),this.viewer.removeEventListener(p.U3.ObjectLeaveEvent.type,this),this.viewer.removeEventListener(p.U3.ReadyEvent.type,this),this.viewer.container.removeChild(this.container),U(X(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){var e;switch(t.type){case p.U3.ReadyEvent.type:this.config.markers&&(this.setMarkers(this.config.markers),delete this.config.markers);break;case p.U3.RenderEvent.type:this.renderMarkers();break;case p.U3.ClickEvent.type:this.__onClick(t,!1);break;case p.U3.DoubleClickEvent.type:this.__onClick(t,!0);break;case p.U3.ObjectEnterEvent.type:case p.U3.ObjectLeaveEvent.type:case p.U3.ObjectHoverEvent.type:if(t.userDataKey===tk){var n=t.originalEvent,i=t.object.userData[tk];switch(t.type){case p.U3.ObjectEnterEvent.type:null!==(e=i.config.style)&&void 0!==e&&e.cursor?this.viewer.setCursor(i.config.style.cursor):(i.config.tooltip||i.config.content)&&this.viewer.setCursor("pointer"),this.__onEnterMarker(n,i);break;case p.U3.ObjectLeaveEvent.type:this.viewer.setCursor(null),this.__onLeaveMarker(i);break;case p.U3.ObjectHoverEvent.type:this.__onHoverMarker(n,i)}}break;case"mouseenter":this.__onEnterMarker(t,this.__getTargetMarker(t.target));break;case"mouseleave":this.__onLeaveMarker(this.__getTargetMarker(t.target));break;case"mousemove":this.__onHoverMarker(t,this.__getTargetMarker(t.target,!0));break;case"contextmenu":t.preventDefault()}}},{key:"toggleAllMarkers",value:function(){this.state.visible?this.hideAllMarkers():this.showAllMarkers()}},{key:"showAllMarkers",value:function(){this.state.visible=!0,this.renderMarkers(),this.dispatchEvent(new td)}},{key:"hideAllMarkers",value:function(){this.state.visible=!1,this.renderMarkers(),this.dispatchEvent(new tp)}},{key:"toggleAllTooltips",value:function(){this.state.showAllTooltips?this.hideAllTooltips():this.showAllTooltips()}},{key:"showAllTooltips",value:function(){this.state.showAllTooltips=!0,Object.values(this.markers).forEach(function(t){t.state.staticTooltip=!0,t.showTooltip()})}},{key:"hideAllTooltips",value:function(){this.state.showAllTooltips=!1,Object.values(this.markers).forEach(function(t){t.state.staticTooltip=!1,t.hideTooltip()})}},{key:"getNbMarkers",value:function(){return Object.keys(this.markers).length}},{key:"getMarkers",value:function(){return Object.values(this.markers)}},{key:"addMarker",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(this.markers[t.id])throw new p.Il('marker "'.concat(t.id,'" already exists'));var n=new tA(this.viewer,this,t);n.isPoly()?this.svgContainer.appendChild(n.domElement):n.is3d()?this.viewer.renderer.addObject(n.threeElement):this.container.appendChild(n.domElement),this.markers[n.id]=n,this.state.showAllTooltips&&(n.state.staticTooltip=!0),e&&this.__afterChangerMarkers()}},{key:"getMarker",value:function(t){var e="object"===C(t)?t.id:t;if(!this.markers[e])throw new p.Il('cannot find marker "'.concat(e,'"'));return this.markers[e]}},{key:"getCurrentMarker",value:function(){return this.state.currentMarker}},{key:"updateMarker",value:function(t){var e,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=this.getMarker(t.id);i.update(t),n&&(this.__afterChangerMarkers(),(i===this.state.hoveringMarker&&(null===(e=i.config.tooltip)||void 0===e?void 0:e.trigger)==="hover"||i.state.staticTooltip)&&i.showTooltip())}},{key:"removeMarker",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=this.getMarker(t);n.isPoly()?this.svgContainer.removeChild(n.domElement):n.is3d()?this.viewer.renderer.removeObject(n.threeElement):this.container.removeChild(n.domElement),this.state.hoveringMarker===n&&(this.state.hoveringMarker=null),this.state.currentMarker===n&&(this.state.currentMarker=null),n.destroy(),delete this.markers[n.id],e&&this.__afterChangerMarkers()}},{key:"removeMarkers",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];t.forEach(function(t){return e.removeMarker(t,!1)}),n&&this.__afterChangerMarkers()}},{key:"setMarkers",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.clearMarkers(!1),null==t||t.forEach(function(t){e.addMarker(t,!1)}),n&&this.__afterChangerMarkers()}},{key:"clearMarkers",value:function(){var t=this,e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];Object.keys(this.markers).forEach(function(e){t.removeMarker(e,!1)}),e&&this.__afterChangerMarkers()}},{key:"gotoMarker",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.gotoMarkerSpeed,i=this.getMarker(t);return n?this.viewer.animate(I(I({},i.state.position),{},{zoom:i.config.zoomLvl,speed:n})).then(function(){e.dispatchEvent(new Q(i))}):(this.viewer.rotate(i.state.position),p.P6.isNil(i.config.zoomLvl)||this.viewer.zoom(i.config.zoomLvl),this.dispatchEvent(new Q(i)),Promise.resolve())}},{key:"hideMarker",value:function(t){this.toggleMarker(t,!1)}},{key:"showMarker",value:function(t){this.toggleMarker(t,!0)}},{key:"showMarkerTooltip",value:function(t){var e=this.getMarker(t);e.state.staticTooltip=!0,e.showTooltip()}},{key:"hideMarkerTooltip",value:function(t){var e=this.getMarker(t);e.state.staticTooltip=!1,e.hideTooltip()}},{key:"toggleMarker",value:function(t,e){var n=this.getMarker(t);n.config.visible=p.P6.isNil(e)?!n.config.visible:e,this.renderMarkers()}},{key:"showMarkerPanel",value:function(t){var e,n=this.getMarker(t);null!=n&&null!==(e=n.config)&&void 0!==e&&e.content?this.viewer.panel.show({id:tP,content:n.config.content}):this.hideMarkerPanel()}},{key:"hideMarkerPanel",value:function(){this.viewer.panel.hide(tP)}},{key:"toggleMarkersList",value:function(){this.viewer.panel.isVisible(t_)?this.hideMarkersList():this.showMarkersList()}},{key:"showMarkersList",value:function(){var t,e,n=this,i=[];this.state.visible&&Object.values(this.markers).forEach(function(t){t.config.visible&&!t.config.hideList&&i.push(t)});var r=new ty(i);this.dispatchEvent(r),i=r.markers,this.viewer.panel.show({id:t_,content:(t=i,e=this.viewer.config.lang[tm.id],'\n<div class="psv-panel-menu psv-panel-menu--stripped">\n <h1 class="psv-panel-menu-title">'.concat(tb," ").concat(e,'</h1>\n <ul class="psv-panel-menu-list">\n   ').concat(t.map(function(t){return"\n   <li data-".concat(tE,'="').concat(t.id,'" class="psv-panel-menu-item" tabindex="0">\n     ').concat("image"===t.type?'<span class="psv-panel-menu-item-icon"><img src="'.concat(t.definition,'"/></span>'):"",'\n     <span class="psv-panel-menu-item-label">').concat(t.getListContent(),"</span>\n   </li>\n   ")}).join(""),"\n </ul>\n</div>\n")),noMargin:!0,clickHandler:function(t){var e=p.P6.getClosest(t,"li"),i=e?e.dataset[tk]:void 0;if(i){var r=n.getMarker(i);n.dispatchEvent(new ts(r)),n.gotoMarker(r.id),n.hideMarkersList()}}})}},{key:"hideMarkersList",value:function(){this.viewer.panel.hide(t_)}},{key:"renderMarkers",value:function(){var t=this;if(this.state.needsReRender){this.state.needsReRender=!1;return}var e=this.viewer.getZoomLevel(),n=this.viewer.getPosition();Object.values(this.markers).forEach(function(i){var r,o,a=t.state.visible&&i.config.visible,s=!1,l=null;if(a&&i.is3d())l=t.__getMarkerPosition(i),a=t.__isMarkerVisible(i,l);else if(a&&i.isPoly()){var c=t.__getPolyPositions(i);if(a=c.length>(i.isPolygon()?2:1)){l=t.__getMarkerPosition(i);var u=c.map(function(t){return t.x-l.x+","+(t.y-l.y)}).join(" ");i.domElement.setAttributeNS(null,"points",u),i.domElement.setAttributeNS(null,"transform","translate(".concat(l.x," ").concat(l.y,")"))}}else a&&(i.updateSize(),l=t.__getMarkerPosition(i),(a=t.__isMarkerVisible(i,l))&&(i.domElement.style.translate="".concat(l.x,"px ").concat(l.y,"px 0px"),t.__applyScale(i,{zoomLevel:e,viewerPosition:n,mouseover:i===t.state.hoveringMarker}),"element"===i.type&&(null===(r=(o=i.config.element).updateMarker)||void 0===r||r.call(o,{marker:i,position:l,viewerPosition:n,zoomLevel:e,viewerSize:t.viewer.state.size}))));s=i.state.visible!==a,i.state.visible=a,i.state.position2D=a?l:null,i.is3d()||p.P6.toggleClass(i.domElement,"psv-marker--visible",a),a?i.state.staticTooltip?i.showTooltip():i!==t.state.hoveringMarker&&i.hideTooltip():i.hideTooltip(),s&&(t.dispatchEvent(new $(i,a)),i.is3d()&&(t.state.needsReRender=!0))}),this.state.needsReRender&&this.viewer.needsUpdate()}},{key:"__applyScale",value:function(t,e){var n=e.zoomLevel,i=e.viewerPosition,r=e.mouseover;null!==r&&t.config.hoverScale&&(t.domElement.style.transition="scale ".concat(t.config.hoverScale.duration,"ms ").concat(t.config.hoverScale.easing));var o=t.getScale(n,i,r);t.domElement.style.scale="".concat(o)}},{key:"__isMarkerVisible",value:function(t,e){var n=this;return t.is3d()?t.state.positions3D.some(function(t){return n.viewer.dataHelper.isPointVisible(t)}):t.state.positions3D[0].dot(this.viewer.state.direction)>0&&e.x+t.state.size.width>=0&&e.x-t.state.size.width<=this.viewer.state.size.width&&e.y+t.state.size.height>=0&&e.y-t.state.size.height<=this.viewer.state.size.height}},{key:"__getMarkerPosition",value:function(t){if(t.isPoly()||t.is3d())return this.viewer.dataHelper.sphericalCoordsToViewerCoords(t.state.position);var e=this.viewer.dataHelper.vector3ToViewerCoords(t.state.positions3D[0]);return e.x-=t.state.size.width*t.state.anchor.x,e.y-=t.state.size.height*t.state.anchor.y,e}},{key:"__getPolyPositions",value:function(t){var e=this,n=t.state.positions3D.length,i=t.state.positions3D.map(function(t){return{vector:t,visible:t.dot(e.viewer.state.direction)>0}}),r=[];return i.forEach(function(t,e){t.visible||[0===e?i[n-1]:i[e-1],e===n-1?i[0]:i[e+1]].forEach(function(n){n.visible&&r.push({visible:n.vector,invisible:t.vector,index:e})})}),r.reverse().forEach(function(t){var n,r,o,a;i.splice(t.index,0,{vector:(n=t.visible,r=t.invisible,o=e.viewer.state.direction,tT.copy(o).normalize(),tj.crossVectors(n,r).normalize(),tL.crossVectors(tj,n).normalize(),tC.copy(n).multiplyScalar(-tT.dot(tL)),tR.copy(tL).multiplyScalar(tT.dot(n)),a=new f.Pa4().addVectors(tC,tR).normalize(),tI.crossVectors(a,tT),a.applyAxisAngle(tI,.01).multiplyScalar(p.tl.SPHERE_RADIUS)),visible:!0})}),i.filter(function(t){return t.visible}).map(function(t){return e.viewer.dataHelper.vector3ToViewerCoords(t.vector)})}},{key:"__getTargetMarker",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?p.P6.getClosest(t,".psv-marker"):t;return n?n[tk]:void 0}},{key:"__onEnterMarker",value:function(t,e){if(e){var n;this.state.hoveringMarker=e,this.dispatchEvent(new ti(e)),(e.isNormal()||e.isSvg())&&this.__applyScale(e,{zoomLevel:this.viewer.getZoomLevel(),viewerPosition:this.viewer.getPosition(),mouseover:!0}),e.state.staticTooltip||(null===(n=e.config.tooltip)||void 0===n?void 0:n.trigger)!=="hover"||e.showTooltip(t.clientX,t.clientY)}}},{key:"__onLeaveMarker",value:function(t){if(t){var e;this.dispatchEvent(new te(t)),(t.isNormal()||t.isSvg())&&this.__applyScale(t,{zoomLevel:this.viewer.getZoomLevel(),viewerPosition:this.viewer.getPosition(),mouseover:!1}),this.state.hoveringMarker=null,t.state.staticTooltip||(null===(e=t.config.tooltip)||void 0===e?void 0:e.trigger)!=="hover"?t.state.staticTooltip&&t.showTooltip():t.hideTooltip()}}},{key:"__onHoverMarker",value:function(t,e){if(e&&(e.isPoly()||e.is3d())){var n;(null===(n=e.config.tooltip)||void 0===n?void 0:n.trigger)==="hover"&&e.showTooltip(t.clientX,t.clientY)}}},{key:"__onClick",value:function(t,e){var n,i,r,o=null===(n=t.data.objects.find(function(t){return t.userData[tk]}))||void 0===n?void 0:n.userData[tk];o||(o=this.__getTargetMarker(t.data.target,!0)),this.state.currentMarker&&this.state.currentMarker!==o&&(this.dispatchEvent(new tc(this.state.currentMarker)),this.viewer.panel.hide(tP),this.state.showAllTooltips||(null===(i=this.state.currentMarker.config.tooltip)||void 0===i?void 0:i.trigger)!=="click"||this.hideMarkerTooltip(this.state.currentMarker.id),this.state.currentMarker=null),o&&(this.state.currentMarker=o,this.dispatchEvent(new to(o,e,t.data.rightclick)),this.config.clickEventOnMarker?t.data.marker=o:t.stopImmediatePropagation(),this.markers[o.id]&&((null===(r=o.config.tooltip)||void 0===r?void 0:r.trigger)==="click"?o.tooltip?this.hideMarkerTooltip(o):this.showMarkerTooltip(o):this.showMarkerPanel(o.id)))}},{key:"__afterChangerMarkers",value:function(){this.__refreshUi(),this.__checkObjectsObserver(),this.viewer.needsUpdate(),this.dispatchEvent(new tf(this.getMarkers()))}},{key:"__refreshUi",value:function(){var t,e,n=Object.values(this.markers).filter(function(t){return!t.config.hideList}).length;0===n?(this.viewer.panel.isVisible(t_)||this.viewer.panel.isVisible(tP))&&this.viewer.panel.hide():this.viewer.panel.isVisible(t_)?this.showMarkersList():this.viewer.panel.isVisible(tP)&&(this.state.currentMarker?this.showMarkerPanel(this.state.currentMarker.id):this.viewer.panel.hide()),null===(t=this.viewer.navbar.getButton(tm.id,!1))||void 0===t||t.toggle(n>0),null===(e=this.viewer.navbar.getButton(tS.id,!1))||void 0===e||e.toggle(n>0)}},{key:"__checkObjectsObserver",value:function(){Object.values(this.markers).some(function(t){return t.is3d()})?this.viewer.observeObjects(tk):this.viewer.unobserveObjects(tk)}}]),n}(p.Yc);function tH(t){return(tH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tB(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function tD(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function tV(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tH(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==tH(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tH(e)?e:String(e)}(i.key),i)}}function tY(t,e,n){return e&&tV(t.prototype,e),n&&tV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function tG(){return(tG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tK(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function tW(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tq(t,e)}function tq(t,e){return(tq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tX(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=tK(t);if(e){var r=tK(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===tH(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return tF(t)}(this,n)}}function tF(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tK(t){return(tK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tU.id="markers",tU.configParser=tN,tU.readonlyOptions=["markers"],p.Of.lang[tm.id]="Markers",p.Of.lang[tS.id]="Markers list",(0,p.KI)(tm,"caption:left"),(0,p.KI)(tS,"caption:left");var tZ=1/40,t$=function(t){tW(n,t);var e=tX(n);function n(t,i){var r;return tD(this,n),(r=e.call(this,t,{})).plugin=i,r.state={visible:!0,mouse:null,mousedown:!1,markers:[]},r.background=document.createElement("div"),r.canvas=document.createElement("canvas"),r.container.appendChild(r.background),r.container.appendChild(r.canvas),r.config.navigation&&(r.container.addEventListener("mouseenter",tF(r)),r.container.addEventListener("mouseleave",tF(r)),r.container.addEventListener("mousemove",tF(r)),r.container.addEventListener("mousedown",tF(r)),r.container.addEventListener("mouseup",tF(r)),r.container.addEventListener("touchstart",tF(r)),r.container.addEventListener("touchmove",tF(r)),r.container.addEventListener("touchend",tF(r))),r.applyConfig(),r.hide(),r}return tY(n,[{key:"config",get:function(){return this.plugin.config}},{key:"handleEvent",value:function(t){var e,n;switch(t.type){case"mouseenter":case"mousemove":case"touchmove":this.state.mouse=(null===(e=t.changedTouches)||void 0===e?void 0:e[0])||t,this.state.mousedown?this.click():this.update(),t.stopPropagation(),t.preventDefault();break;case"mousedown":case"touchstart":this.state.mousedown=!0,t.stopPropagation(),t.preventDefault();break;case"mouseup":case"touchend":this.state.mouse=(null===(n=t.changedTouches)||void 0===n?void 0:n[0])||t,this.state.mousedown=!1,this.click(),t.changedTouches&&(this.state.mouse=null,this.update()),t.stopPropagation(),t.preventDefault();break;case"mouseleave":this.state.mouse=null,this.state.mousedown=!1,this.update()}}},{key:"applyConfig",value:function(){this.container.className="psv-compass psv-compass--".concat(this.config.position.join("-")),this.background.innerHTML=this.config.backgroundSvg,this.container.style.width=this.config.size,this.container.style.height=this.config.size,this.container.style.marginTop="center"===this.config.position[0]?"calc(-".concat(this.config.size," / 2)"):"",this.container.style.marginLeft="center"===this.config.position[1]?"calc(-".concat(this.config.size," / 2)"):""}},{key:"show",value:function(){tG(tK(n.prototype),"show",this).call(this),this.update()}},{key:"setMarkers",value:function(t){this.state.markers=t,this.update()}},{key:"update",value:function(){var t,e=this;if(this.isVisible()){this.canvas.width=this.container.clientWidth*p.we.pixelRatio,this.canvas.height=this.container.clientWidth*p.we.pixelRatio;var n=this.canvas.getContext("2d");n.clearRect(0,0,this.canvas.width,this.canvas.height);var i=this.viewer.getPosition().yaw,r=f.M8C.degToRad(this.viewer.state.hFov);this.__drawCone(n,this.config.coneColor,i,r);var o=this.__getMouseAngle();null!==o&&this.__drawCone(n,this.config.navigationColor,o,r),this.state.markers.forEach(function(t){e.__drawMarker(n,t)}),null===(t=this.config.hotspots)||void 0===t||t.forEach(function(t){"yaw"in t&&!("pitch"in t)&&(t.pitch=0);var i=e.viewer.dataHelper.cleanPosition(t);e.__drawPoint(n,t.color||e.config.hotspotColor,i.yaw,i.pitch)})}}},{key:"click",value:function(){var t=this.__getMouseAngle();null!==t&&this.viewer.rotate({yaw:t,pitch:0})}},{key:"__drawCone",value:function(t,e,n,i){var r=n-Math.PI/2-i/2,o=r+i,a=this.canvas.width/2;t.beginPath(),t.moveTo(a,a),t.lineTo(a+Math.cos(r)*a,a+Math.sin(r)*a),t.arc(a,a,a,r,o,!1),t.lineTo(a,a),t.fillStyle=e,t.fill()}},{key:"__drawMarker",value:function(t,e){var n=this,i=this.config.hotspotColor;if("string"==typeof e.data.compass&&(i=e.data.compass),e.isPoly())t.beginPath(),e.definition.forEach(function(e,i){var r=function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(e,2)||function(t,e){if(t){if("string"==typeof t)return tB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tB(t,e)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=r[0],a=r[1],s=o-Math.PI/2,l=(a+Math.PI/2)/Math.PI,c=n.canvas.width/2;t[0===i?"moveTo":"lineTo"](c+Math.cos(s)*c*l,c+Math.sin(s)*c*l)}),e.isPolygon()?(t.fillStyle=i,t.fill()):(t.strokeStyle=i,t.lineWidth=Math.max(1,this.canvas.width*tZ/2),t.stroke());else{var r=e.state.position;this.__drawPoint(t,i,r.yaw,r.pitch)}}},{key:"__drawPoint",value:function(t,e,n,i){var r=n-Math.PI/2,o=(i+Math.PI/2)/Math.PI,a=this.canvas.width/2,s=Math.max(2,this.canvas.width*tZ);t.beginPath(),t.ellipse(a+Math.cos(r)*a*o,a+Math.sin(r)*a*o,s,s,0,0,2*Math.PI),t.fillStyle=e,t.fill()}},{key:"__getMouseAngle",value:function(){if(!this.state.mouse)return null;var t=this.container.getBoundingClientRect(),e=this.state.mouse.clientX-t.left-t.width/2,n=this.state.mouse.clientY-t.top-t.width/2;return Math.sqrt(e*e+n*n)>t.width/2?null:Math.atan2(n,e)+Math.PI/2}}]),n}(p.k8),tJ=p.P6.getConfigParser({size:"120px",position:["top","left"],backgroundSvg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="rgba(61, 61, 61, .5)"/><path fill="rgba(255, 255, 255, .7)" d="M50 97.1A47 47 0 0 1 32.5 6.5l.8 1.8a45 45 0 1 0 33.4 0l.8-1.8A47 47 0 0 1 50 97Zm0-42a5 5 0 1 1 5-5 5 5 0 0 1-5 5Zm4-41.7h-1.6a.4.4 0 0 1-.4-.2l-4.6-7.7V13a.3.3 0 0 1-.3.3h-1.6a.3.3 0 0 1-.3-.3V1.8a.3.3 0 0 1 .3-.3h1.6a.3.3 0 0 1 .4.2L52 9.4V1.8a.3.3 0 0 1 .3-.3H54c.2 0 .3 0 .3.3V13c0 .2-.1.3-.3.3Z"/></svg>\n',coneColor:"rgba(255, 255, 255, 0.5)",navigation:!0,navigationColor:"rgba(255, 0, 0, 0.2)",hotspots:[],hotspotColor:"rgba(0, 0, 0, 0.5)"},{position:function(t,e){var n=e.defValue;return p.P6.cleanCssPosition(t,{allowCenter:!0,cssOrder:!0})||n}}),tQ=function(t){tW(n,t);var e=tX(n);function n(t,i){var r;return tD(this,n),(r=e.call(this,t,i)).component=new t$(r.viewer,tF(r)),r}return tY(n,[{key:"init",value:function(){tG(tK(n.prototype),"init",this).call(this),p.P6.checkStylesheet(this.viewer.container,"compass-plugin"),this.markers=this.viewer.getPlugin("markers"),this.viewer.addEventListener(p.U3.RenderEvent.type,this),this.viewer.addEventListener(p.U3.ReadyEvent.type,this,{once:!0}),this.markers&&this.markers.addEventListener("set-markers",this)}},{key:"destroy",value:function(){this.viewer.removeEventListener(p.U3.RenderEvent.type,this),this.viewer.removeEventListener(p.U3.ReadyEvent.type,this),this.markers&&this.markers.removeEventListener("set-markers",this),this.component.destroy(),delete this.markers,tG(tK(n.prototype),"destroy",this).call(this)}},{key:"setOptions",value:function(t){tG(tK(n.prototype),"setOptions",this).call(this,t),this.component.applyConfig(),this.component.update()}},{key:"handleEvent",value:function(t){switch(t.type){case p.U3.ReadyEvent.type:this.component.show();break;case p.U3.RenderEvent.type:this.component.update();break;case"set-markers":this.component.setMarkers(t.markers.filter(function(t){var e;return null===(e=t.data)||void 0===e?void 0:e.compass}))}}},{key:"hide",value:function(){this.component.hide()}},{key:"show",value:function(){this.component.show()}},{key:"setHotspots",value:function(t){this.config.hotspots=t,this.component.update()}},{key:"clearHotspots",value:function(){this.setHotspots(null)}}]),n}(p.Yc);function t0(t){return(t0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function t1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function t2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?t1(Object(n),!0).forEach(function(e){var i,r;i=e,r=n[e],(i=t6(i))in t?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t1(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function t3(){return(t3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=en(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function t5(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,t6(i.key),i)}}function t4(t,e,n){return e&&t5(t.prototype,e),n&&t5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function t6(t){var e=function(t,e){if("object"!==t0(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==t0(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===t0(e)?e:String(e)}function t8(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function t9(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&t7(t,e)}function t7(t,e){return(t7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=en(t);if(e){var r=en(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===t0(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ee(t)}(this,n)}}function ee(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function en(t){return(en=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tQ.id="compass",tQ.configParser=tJ,tQ.readonlyOptions=["navigation"];/*!
 * PhotoSphereViewer.GalleryPlugin 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var ei=Object.defineProperty;!function(t,e){for(var n in e)ei(t,n,{get:e[n],enumerable:!0})}({},{HideGalleryEvent:function(){return ea},ShowGalleryEvent:function(){return eo}});var er=function(t){t9(n,t);var e=et(n);function n(){return t8(this,n),e.call(this,n.type)}return t4(n)}(p.$N);er.type="show-gallery";var eo=er,ea=function(t){t9(n,t);var e=et(n);function n(){return t8(this,n),e.call(this,eo.type)}return t4(n)}(p.$N);ea.type="hide-gallery";var es=function(t){t9(n,t);var e=et(n);function n(t){var i;return t8(this,n),(i=e.call(this,t,{className:"psv-gallery-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:'<svg viewBox="185 115 330 330" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M186.7 326.7V163.3c0-15 8.3-23.3 23.3-23.3h210c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H210c-15 0-23.3-8.3-23.3-23.3zm70 70v-23.4H420c30.2 0 46.7-16.4 46.7-46.6V210H490c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H280c-15 0-23.3-8.3-23.3-23.3zm-23.8-105H397l-40-50.4-26.7 29.7-44.3-54.5zm106.7-76c9.6 0 17.8-7.8 17.8-17.2a18 18 0 0 0-17.8-17.8c-9.4 0-17.2 8.2-17.2 17.8 0 9.4 7.8 17.2 17.2 17.2z"/><!--Created by Wolf B\xf6se from the Noun Project--></svg>'})).plugin=i.viewer.getPlugin("gallery"),i.plugin&&(i.plugin.addEventListener(eo.type,ee(i)),i.plugin.addEventListener(ea.type,ee(i))),i}return t4(n,[{key:"destroy",value:function(){this.plugin&&(this.plugin.removeEventListener(eo.type,this),this.plugin.removeEventListener(ea.type,this)),t3(en(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){t instanceof eo?this.toggleActive(!0):t instanceof ea&&this.toggleActive(!1)}},{key:"isSupported",value:function(){return!!this.plugin}},{key:"onClick",value:function(){this.plugin.toggle()}}]),n}(p.T9);es.id="gallery";var el="psvGalleryItem",ec=p.P6.dasherize(el),eu="psv-gallery-item--active",ep=function(t){t9(n,t);var e=et(n);function n(t,i){t8(this,n),(r=e.call(this,i,{className:"psv-gallery ".concat(p.tl.CAPTURE_EVENTS_CLASS)})).plugin=t,r.state={visible:!0,mousedown:!1,initMouse:null,mouse:null,itemMargin:null,breakpoint:null},r.container.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">\n  <defs>\n    <symbol id="psvGalleryBlankIcon" viewBox="0 0 200 200">\n      <rect x="0" y="0" width="200" height="200" fill="#666"/>\n      <g transform="scale(0.25) translate(25 20) " fill="#eee">\n        <path d="M376 220.61c-85.84 0-155.39 69.56-155.39 155.39 0 85.84 69.56 155.39 155.39 155.39 85.84 0 155.39-69.56 155.39-155.39 0-85.84-69.56-155.39-155.39-155.39zm0 300.92c-80.41 0-145.53-65.12-145.53-145.53S295.59 230.47 376 230.47 521.53 295.59 521.53 376 456.41 521.53 376 521.53z"/>\n        <path d="M467.27 300.03H284.74a18.21 18.21 0 0 0-18.25 18.25v115.43a18.21 18.21 0 0 0 18.25 18.26h182.53a18.21 18.21 0 0 0 18.25-18.26V318.28a18.2 18.2 0 0 0-18.25-18.25zm-190.91 18.25a8.64 8.64 0 0 1 8.39-8.38h182.53a8.64 8.64 0 0 1 8.38 8.38V413l-44.89-35.52c-.49-.5-.99-.5-1.48-.99h-2.46c-.5 0-1 0-1.48.5l-37.5 21.2-43.9-58.7-.5-.5s0-.48-.49-.48c0 0-.49 0-.49-.5-.49 0-.49-.49-.99-.49-.49 0-.49 0-.98-.49H337.53c-.5 0-.5.5-.99.5h-.49l-.5.48s-.48 0-.48.5l-58.7 65.12zM467.27 442.1H284.74a8.64 8.64 0 0 1-8.39-8.38v-15.3l63.15-68.07 42.92 57.22 1.48 1.48h.49c.5.5 1.48.5 1.97.5H388.83l38.47-21.72 46.37 36.5c.5.5 1.49 1 1.98 1v8.88c0 3.95-3.45 7.9-8.38 7.9z"/>\n        <path d="M429.77 333.58a13.81 13.81 0 1 1-27.63 0 13.81 13.81 0 0 1 27.63 0"/>\n      </g>\n    </symbol>\n  </defs>\n</svg>',r.container.querySelector("svg").style.display="none";var r,o=document.createElement("div");return o.className="psv-panel-close-button",o.innerHTML=p.tl.ICONS.close,r.container.appendChild(o),r.items=document.createElement("div"),r.items.className="psv-gallery-container",r.container.appendChild(r.items),r.state.itemMargin=parseInt(p.P6.getStyleProperty(r.items,"padding-left"),10),r.state.breakpoint=parseInt(p.P6.getStyleProperty(r.container,"--psv-gallery-breakpoint"),10),r.observer=new IntersectionObserver(function(t){t.forEach(function(t){if(t.intersectionRatio>0){var e=t.target;e.style.backgroundImage="url(".concat(e.dataset.src,")"),delete e.dataset.src,r.observer.unobserve(t.target)}})},{root:r.viewer.container}),r.items.addEventListener("wheel",ee(r)),r.items.addEventListener("mousedown",ee(r)),r.items.addEventListener("mousemove",ee(r)),r.items.addEventListener("click",ee(r)),window.addEventListener("mouseup",ee(r)),o.addEventListener("click",function(){return r.plugin.hide()}),r.hide(),r}return t4(n,[{key:"destroy",value:function(){window.removeEventListener("mouseup",this),this.observer.disconnect(),t3(en(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){switch(t.type){case"wheel":if(window.innerWidth>this.state.breakpoint){var e=this.plugin.config.thumbnailSize.width+this.state.itemMargin;this.items.scrollLeft+=t.deltaY/Math.abs(t.deltaY)*e,t.preventDefault()}break;case"mousedown":this.state.mousedown=!0,window.innerWidth>this.state.breakpoint?this.state.initMouse=t.clientX:this.state.initMouse=t.clientY,this.state.mouse=this.state.initMouse;break;case"mousemove":if(this.state.mousedown){if(window.innerWidth>this.state.breakpoint){var n=this.state.mouse-t.clientX;this.items.scrollLeft+=n,this.state.mouse=t.clientX}else{var i=this.state.mouse-t.clientY;this.items.scrollTop+=i,this.state.mouse=t.clientY}}break;case"mouseup":this.state.mousedown=!1,this.state.mouse=null,t.preventDefault();break;case"click":if(10>Math.abs(this.state.initMouse-t.clientX)){var r=p.P6.getClosest(t.target,"[data-".concat(ec,"]"));r&&this.plugin.__click(r.dataset[el])}}}},{key:"show",value:function(){this.container.classList.add("psv-gallery--open"),this.state.visible=!0}},{key:"hide",value:function(){this.container.classList.remove("psv-gallery--open"),this.state.visible=!1}},{key:"setItems",value:function(t){var e,n=this;this.items.innerHTML=(e=this.plugin.config.thumbnailSize,"\n".concat(t.map(function(t){return'\n<div class="psv-gallery-item" data-'.concat(ec,'="').concat(t.id,'" style="width:').concat(e.width,"px; aspect-ratio:").concat(e.width/e.height,';">\n  ').concat(t.name?'<div class="psv-gallery-item-title"><span>'.concat(t.name,"</span></div>"):"",'\n  <svg class="psv-gallery-item-thumb" viewBox="0 0 200 200" preserveAspectRatio="xMidYMid slice"><use href="#psvGalleryBlankIcon"></use></svg>\n  ').concat(t.thumbnail?'<div class="psv-gallery-item-thumb" data-src="'.concat(t.thumbnail,'"></div>'):"","\n</div>\n")}).join(""),"\n")),this.observer&&(this.observer.disconnect(),this.items.querySelectorAll("[data-src]").forEach(function(t){n.observer.observe(t)}))}},{key:"setActive",value:function(t){var e=this.items.querySelector("."+eu);if(null==e||e.classList.remove(eu),t){var n=this.items.querySelector("[data-".concat(ec,'="').concat(t,'"]'));n&&(n.classList.add(eu),this.items.scrollLeft=n.offsetLeft+n.clientWidth/2-this.items.clientWidth/2)}}}]),n}(p.k8),eh=p.P6.getConfigParser({items:[],visibleOnLoad:!1,hideOnClick:!0,thumbnailSize:{width:200,height:100}}),ef=function(t){t9(n,t);var e=et(n);function n(t,i){var r;return t8(this,n),(r=e.call(this,t,i)).items=[],r.gallery=new ep(ee(r),r.viewer),r}return t4(n,[{key:"init",value:function(){var t=this;t3(en(n.prototype),"init",this).call(this),p.P6.checkStylesheet(this.viewer.container,"gallery-plugin"),this.viewer.addEventListener(p.U3.PanoramaLoadedEvent.type,this),this.viewer.addEventListener(p.U3.ShowPanelEvent.type,this),this.config.visibleOnLoad&&this.viewer.addEventListener(p.U3.ReadyEvent.type,function(){t.show()},{once:!0}),this.setItems(this.config.items),delete this.config.items,setTimeout(function(){return t.__updateButton()})}},{key:"destroy",value:function(){this.viewer.removeEventListener(p.U3.PanoramaLoadedEvent.type,this),this.viewer.removeEventListener(p.U3.ShowPanelEvent.type,this),this.gallery.destroy(),t3(en(n.prototype),"destroy",this).call(this)}},{key:"setOptions",value:function(t){t3(en(n.prototype),"setOptions",this).call(this,t),t.thumbnailSize&&this.gallery.setItems(this.items)}},{key:"handleEvent",value:function(t){if(t instanceof p.U3.PanoramaLoadedEvent){var e=this.items.find(function(e){return p.P6.deepEqual(e.panorama,t.data.panorama)});this.currentId=null==e?void 0:e.id,this.gallery.setActive(this.currentId)}else t instanceof p.U3.ShowPanelEvent&&this.gallery.isVisible()&&this.hide()}},{key:"show",value:function(){return this.dispatchEvent(new eo),this.gallery.show()}},{key:"hide",value:function(){return this.dispatchEvent(new ea),this.gallery.hide()}},{key:"toggle",value:function(){this.gallery.isVisible()?this.hide():this.show()}},{key:"setItems",value:function(t,e){var n=this;if(t?t.forEach(function(t,e){if(!t.id)throw new p.Il("Item ".concat(e,' has no "id".'));if(!t.panorama)throw new p.Il("Item ".concat(t.id,' has no "panorama".'))}):t=[],this.handler=e,this.items=t.map(function(t){return t2(t2({},t),{},{id:"".concat(t.id)})}),this.gallery.setItems(this.items),this.currentId){var i=this.items.find(function(t){return t.id===n.currentId});this.currentId=null==i?void 0:i.id,this.gallery.setActive(this.currentId)}this.__updateButton()}},{key:"__click",value:function(t){if(t!==this.currentId){if(this.handler)this.handler(t);else{var e=this.items.find(function(e){return e.id===t});this.viewer.setPanorama(e.panorama,t2({caption:e.name},e.options))}this.currentId=t,this.gallery.setActive(t),this.config.hideOnClick&&this.hide()}}},{key:"__updateButton",value:function(){var t;null===(t=this.viewer.navbar.getButton(es.id,!1))||void 0===t||t.toggle(this.items.length>0)}}]),n}(p.Yc);function ev(t){return(ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ed(){return(ed="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eP(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function eg(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==ev(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==ev(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ev(e)?e:String(e)}(i.key),i)}}function ey(t,e,n){return e&&eg(t.prototype,e),n&&eg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function em(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function eb(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ew(t,e)}function ew(t,e){return(ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ek(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=eP(t);if(e){var r=eP(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===ev(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return eE(t)}(this,n)}}function eE(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eP(t){return(eP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}ef.id="gallery",ef.configParser=eh,ef.readonlyOptions=["visibleOnLoad","items"],p.Of.lang[es.id]="Gallery",(0,p.KI)(es,"caption:left");/*!
 * PhotoSphereViewer.GyroscopePlugin 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var e_=Object.defineProperty;!function(t,e){for(var n in e)e_(t,n,{get:e[n],enumerable:!0})}({},{GyroscopeUpdatedEvent:function(){return eS}});var ex=function(t){eb(n,t);var e=ek(n);function n(t){var i;return em(this,n),(i=e.call(this,n.type)).gyroscopeEnabled=t,i}return ey(n)}(p.$N);ex.type="gyroscope-updated";var eS=ex,eO=function(t){eb(n,t);var e=ek(n);function n(t){var i;return em(this,n),(i=e.call(this,t,{className:"psv-gyroscope-button",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M50 0a50 50 0 1 0 0 100A50 50 0 0 0 50 0zm0 88.81a38.86 38.86 0 0 1-38.81-38.8 38.86 38.86 0 0 1 38.8-38.82A38.86 38.86 0 0 1 88.82 50 38.87 38.87 0 0 1 50 88.81z"/><path fill="currentColor" d="M72.07 25.9L40.25 41.06 27.92 74.12l31.82-15.18v-.01l12.32-33.03zM57.84 54.4L44.9 42.58l21.1-10.06-8.17 21.9z"/><!--Created by iconoci from the Noun Project--></svg>',hoverScale:!0,collapsable:!0,tabbable:!0})).plugin=i.viewer.getPlugin("gyroscope"),i.plugin&&i.plugin.addEventListener(eS.type,eE(i)),i}return ey(n,[{key:"destroy",value:function(){this.plugin&&this.plugin.removeEventListener(eS.type,this),ed(eP(n.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin&&{initial:!1,promise:this.plugin.isSupported()}}},{key:"handleEvent",value:function(t){t instanceof eS&&this.toggleActive(t.gyroscopeEnabled)}},{key:"onClick",value:function(){this.plugin.toggle()}}]),n}(p.T9);eO.id="gyroscope";var eM=new f.Pa4(0,0,1),eT=new f.USm,ej=new f._fP,eL=new f._fP(-Math.sqrt(.5),0,0,Math.sqrt(.5)),eC=ey(function t(e){em(this,t),!1===window.isSecureContext&&console.error("THREE.DeviceOrientationControls: DeviceOrientationEvent is only available in secure contexts (https)");var n=this,i=new f._fP;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var r=function(t){n.deviceOrientation=t},o=function(){n.screenOrientation=window.orientation||0},a=function(t,e,n,i,r){eT.set(n,e,-i,"YXZ"),t.setFromEuler(eT),t.multiply(eL),t.multiply(ej.setFromAxisAngle(eM,-r))};this.connect=function(){o(),void 0!==window.DeviceOrientationEvent&&"function"==typeof window.DeviceOrientationEvent.requestPermission?window.DeviceOrientationEvent.requestPermission().then(function(t){"granted"==t&&(window.addEventListener("orientationchange",o),window.addEventListener("deviceorientation",r))}).catch(function(t){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",t)}):(window.addEventListener("orientationchange",o),window.addEventListener("deviceorientation",r)),n.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",o),window.removeEventListener("deviceorientation",r),n.enabled=!1},this.update=function(){if(!1!==n.enabled){var t=n.deviceOrientation;if(t){var e=t.alpha?f.M8C.degToRad(t.alpha)+n.alphaOffset:0,r=t.beta?f.M8C.degToRad(t.beta):0,o=t.gamma?f.M8C.degToRad(t.gamma):0,s=n.screenOrientation?f.M8C.degToRad(n.screenOrientation):0;a(n.object.quaternion,e,r,o,s),8*(1-i.dot(n.object.quaternion))>1e-6&&i.copy(n.object.quaternion)}}},this.dispose=function(){n.disconnect()},this.connect()}),eR=p.P6.getConfigParser({touchmove:!0,absolutePosition:!1,moveMode:"smooth"},{moveMode:function(t,e){var n=e.defValue;return"smooth"!==t&&"fast"!==t?(p.P6.logWarn("GyroscopePlugin: invalid moveMode"),n):t}}),eI=new f.Pa4,ez=function(t){eb(n,t);var e=ek(n);function n(t,i){var r;return em(this,n),(r=e.call(this,t,i)).state={isSupported:r.__checkSupport(),alphaOffset:0,enabled:!1,config_moveInertia:!0,moveMode:r.config.moveMode},r}return ey(n,[{key:"init",value:function(){ed(eP(n.prototype),"init",this).call(this),this.viewer.addEventListener(p.U3.StopAllEvent.type,this),this.viewer.addEventListener(p.U3.BeforeRotateEvent.type,this),this.viewer.addEventListener(p.U3.BeforeRenderEvent.type,this)}},{key:"destroy",value:function(){this.viewer.removeEventListener(p.U3.StopAllEvent.type,this),this.viewer.removeEventListener(p.U3.BeforeRotateEvent.type,this),this.viewer.removeEventListener(p.U3.BeforeRenderEvent.type,this),this.stop(),delete this.controls,ed(eP(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){t instanceof p.U3.StopAllEvent?this.stop():t instanceof p.U3.BeforeRenderEvent?this.__onBeforeRender():t instanceof p.U3.BeforeRotateEvent&&this.__onBeforeRotate(t)}},{key:"isSupported",value:function(){return this.state.isSupported}},{key:"isEnabled",value:function(){return this.state.enabled}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.moveMode;return this.state.isSupported.then(function(e){return e?t.__requestPermission():(p.P6.logWarn("gyroscope not available"),Promise.reject())}).then(function(t){return t?Promise.resolve():(p.P6.logWarn("gyroscope not allowed"),Promise.reject())}).then(function(){t.viewer.stopAll(),t.state.moveMode=e,t.state.config_moveInertia=t.viewer.config.moveInertia,t.viewer.config.moveInertia=!1,t.controls?t.controls.connect():t.controls=new eC(new f.Tme),t.controls.deviceOrientation=null,t.controls.screenOrientation=0,t.controls.alphaOffset=0,t.state.alphaOffset=t.config.absolutePosition?0:null,t.state.enabled=!0,t.dispatchEvent(new eS(!0))})}},{key:"stop",value:function(){this.isEnabled()&&(this.controls.disconnect(),this.state.enabled=!1,this.viewer.config.moveInertia=this.state.config_moveInertia,this.dispatchEvent(new eS(!1)),this.viewer.resetIdleTimer())}},{key:"toggle",value:function(){this.isEnabled()?this.stop():this.start()}},{key:"__onBeforeRender",value:function(){if(this.isEnabled()&&this.controls.deviceOrientation){var t=this.viewer.getPosition();if(null===this.state.alphaOffset){this.controls.update(),this.controls.object.getWorldDirection(eI);var e=this.viewer.dataHelper.vector3ToSphericalCoords(eI);this.state.alphaOffset=e.yaw-t.yaw}else{this.controls.alphaOffset=this.state.alphaOffset,this.controls.update(),this.controls.object.getWorldDirection(eI);var n=this.viewer.dataHelper.vector3ToSphericalCoords(eI),i={yaw:n.yaw,pitch:-n.pitch},r="smooth"===this.state.moveMode?3:10;this.viewer.dynamics.position.goto(i,.01>p.P6.getAngle(t,i)?1:r)}}}},{key:"__onBeforeRotate",value:function(t){this.isEnabled()&&(t.preventDefault(),this.config.touchmove&&(this.state.alphaOffset-=t.position.yaw-this.viewer.getPosition().pitch))}},{key:"__checkSupport",value:function(){return"DeviceOrientationEvent"in window&&"function"==typeof DeviceOrientationEvent.requestPermission?Promise.resolve(!0):"DeviceOrientationEvent"in window?new Promise(function(t){var e=function e(n){t(!!n&&!p.P6.isNil(n.alpha)&&!isNaN(n.alpha)),window.removeEventListener("deviceorientation",e)};window.addEventListener("deviceorientation",e,!1),setTimeout(e,1e4)}):Promise.resolve(!1)}},{key:"__requestPermission",value:function(){return"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(t){return"granted"===t}).catch(function(){return!1}):Promise.resolve(!0)}}]),n}(p.Yc);function eA(t){return(eA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eN(){return(eN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eG(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function eU(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==eA(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==eA(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===eA(e)?e:String(e)}(i.key),i)}}function eH(t,e,n){return e&&eU(t.prototype,e),n&&eU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eB(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function eD(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eV(t,e)}function eV(t,e){return(eV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function eY(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=eG(t);if(e){var r=eG(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===eA(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function eG(t){return(eG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}ez.id="gyroscope",ez.configParser=eR,p.Of.lang[eO.id]="Gyroscope",(0,p.KI)(eO,"caption:right");/*!
 * PhotoSphereViewer.ResolutionPlugin 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var eW=Object.defineProperty;!function(t,e){for(var n in e)eW(t,n,{get:e[n],enumerable:!0})}({},{ResolutionChangedEvent:function(){return eX}});var eq=function(t){eD(n,t);var e=eY(n);function n(t){var i;return eB(this,n),(i=e.call(this,n.type)).resolutionId=t,i}return eH(n)}(p.$N);eq.type="resolution-changed";var eX=eq,eF=p.P6.getConfigParser({resolutions:null,defaultResolution:null,showBadge:!0}),eK=function(t){eD(n,t);var e=eY(n);function n(t,i){var r;return eB(this,n),(r=e.call(this,t)).resolutions=[],r.resolutionsById={},r.state={resolution:null},r.config=eF(i),r.config.defaultResolution&&r.viewer.config.panorama&&p.P6.logWarn("ResolutionPlugin, a defaultResolution was provided but a panorama is already configured on the viewer, the defaultResolution will be ignored."),r}return eH(n,[{key:"init",value:function(){var t=this;if(eN(eG(n.prototype),"init",this).call(this),this.settings=this.viewer.getPlugin("settings"),!this.settings)throw new p.Il("Resolution plugin requires the Settings plugin");this.settings.addSetting({id:n.id,type:"options",label:this.viewer.config.lang.resolution,current:function(){return t.state.resolution},options:function(){return t.resolutions},apply:function(e){return t.__setResolutionIfExists(e)},badge:this.config.showBadge?function(){return t.state.resolution}:null}),this.viewer.addEventListener(p.U3.PanoramaLoadedEvent.type,this),this.config.resolutions&&(this.setResolutions(this.config.resolutions,this.viewer.config.panorama?null:this.config.defaultResolution),delete this.config.resolutions,delete this.config.defaultResolution)}},{key:"destroy",value:function(){this.viewer.removeEventListener(p.U3.PanoramaLoadedEvent.type,this),this.settings.removeSetting(n.id),eN(eG(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){t instanceof p.U3.PanoramaLoadedEvent&&this.__refreshResolution()}},{key:"setResolutions",value:function(t,e){var n=this;this.resolutions=t||[],this.resolutionsById={},t.forEach(function(t){if(!t.id)throw new p.Il("Missing resolution id");if(!t.panorama)throw new p.Il("Missing resolution panorama");n.resolutionsById[t.id]=t}),this.viewer.config.panorama||e||(e=t[0].id),e&&!this.resolutionsById[e]&&(p.P6.logWarn("Resolution ".concat(e," unknown")),e=t[0].id),e&&this.setResolution(e),this.__refreshResolution()}},{key:"setResolution",value:function(t){if(!this.resolutionsById[t])throw new p.Il("Resolution ".concat(t," unknown"));return this.__setResolutionIfExists(t)}},{key:"__setResolutionIfExists",value:function(t){return this.resolutionsById[t]?this.viewer.setPanorama(this.resolutionsById[t].panorama,{transition:!1,showLoader:!1}):Promise.resolve()}},{key:"getResolution",value:function(){return this.state.resolution}},{key:"__refreshResolution",value:function(){var t,e=this,n=this.resolutions.find(function(t){return p.P6.deepEqual(e.viewer.config.panorama,t.panorama)});this.state.resolution!==(null==n?void 0:n.id)&&(this.state.resolution=null==n?void 0:n.id,null===(t=this.settings)||void 0===t||t.updateButton(),this.dispatchEvent(new eX(this.state.resolution)))}}]),n}(p.Vw);eK.id="resolution";var eZ=eK;function e$(t){return(e$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eJ(){return(eJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=e6(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function eQ(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==e$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==e$(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===e$(e)?e:String(e)}(i.key),i)}}function e0(t,e,n){return e&&eQ(t.prototype,e),n&&eQ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function e1(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function e2(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e3(t,e)}function e3(t,e){return(e3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function e5(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=e6(t);if(e){var r=e6(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===e$(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return e4(t)}(this,n)}}function e4(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e6(t){return(e6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}p.Of.lang.resolution="Quality";/*!
 * PhotoSphereViewer.SettingsPlugin 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var e8=Object.defineProperty;!function(t,e){for(var n in e)e8(t,n,{get:e[n],enumerable:!0})}({},{SettingChangedEvent:function(){return e7}});var e9=function(t){e2(n,t);var e=e5(n);function n(t,i){var r;return e1(this,n),(r=e.call(this,n.type)).settingId=t,r.settingValue=i,r}return e0(n)}(p.$N);e9.type="setting-changed";var e7=e9,nt=function(t){e2(n,t);var e=e5(n);function n(t){var i;return e1(this,n),(i=e.call(this,t,{className:"psv-settings-button",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M98.4 43.7c-.8-.5-7-4.3-9.6-5.4l-3-7.5c.9-2.5 2.6-9.4 3-10.6a3.3 3.3 0 00-1-3.1L83 12.2a3.3 3.3 0 00-3-.9c-1 .2-8 2-10.7 3l-7.5-3.1c-1-2.4-4.8-8.6-5.4-9.6A3.3 3.3 0 0053.4 0h-6.8a3.4 3.4 0 00-2.9 1.6c-.5.8-4.2 7-5.4 9.6l-7.5 3-10.6-3a3.3 3.3 0 00-3.1 1L12.2 17a3.3 3.3 0 00-.9 3c.2 1 2 8 3 10.7l-3.1 7.5c-2.4 1-8.6 4.8-9.6 5.4A3.3 3.3 0 000 46.6v6.8a3.4 3.4 0 001.6 2.9c.8.5 7 4.2 9.6 5.4l3 7.5-3 10.6a3.3 3.3 0 001 3.1l4.8 4.9a3.3 3.3 0 003.1.9c1-.2 8-2 10.7-3l7.5 3c1 2.5 4.7 8.6 5.4 9.7a3.3 3.3 0 002.9 1.6h6.8a3.4 3.4 0 002.9-1.6c.5-.8 4.2-7 5.4-9.6l7.5-3c2.5.9 9.4 2.6 10.6 3a3.3 3.3 0 003.1-1l4.9-4.8a3.3 3.3 0 00.9-3.1c-.2-1-2-8-3-10.7l3-7.5c2.5-1 8.6-4.7 9.7-5.4a3.3 3.3 0 001.6-2.9v-6.8a3.3 3.3 0 00-1.6-2.9zM50 71.7A21.8 21.8 0 1171.8 50 21.8 21.8 0 0150 71.8z"/><!-- Created by i cons from the Noun Project --></svg>\n',hoverScale:!0,collapsable:!1,tabbable:!0})).plugin=i.viewer.getPlugin("settings"),i.badge=document.createElement("div"),i.badge.className="psv-settings-badge",i.badge.style.display="none",i.container.appendChild(i.badge),i}return e0(n,[{key:"isSupported",value:function(){return!!this.plugin}},{key:"onClick",value:function(){this.plugin.toggleSettings()}},{key:"setBadge",value:function(t){this.badge.innerText=t,this.badge.style.display=t?"":"none"}}]),n}(p.T9);nt.id="settings";var ne='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M86.2 50.7l-44 44-9.9-9.9 34.1-34.1-34.7-34.8L41.6 6z"/><!-- Created by Renee Ramsey-Passmore from the Noun Project--></svg>\n',nn="psvSettings",ni="settingId",nr="optionId",no="__back",na="__enter",ns=p.P6.dasherize(ni),nl=p.P6.dasherize(nr),nc={options:function(t,e){return'\n<span class="psv-settings-item-label">'.concat(t.label,'</span>\n<span class="psv-settings-item-value">').concat(e(t),'</span>\n<span class="psv-settings-item-icon">').concat(ne,"</span>\n")},toggle:function(t){return'\n<span class="psv-settings-item-label">'.concat(t.label,'</span>\n<span class="psv-settings-item-value">').concat(t.active()?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 100" width="2.4em" height="1.2em"><path fill="currentColor" transform="scale(1.88) translate(0, -25)" d="M72 73.2A21.6 21.6 0 1172 30a21.6 21.6 0 010 43.2M2.4 51.6A26.4 26.4 0 0028.8 78H72a26.4 26.4 0 000-52.8H28.8A26.4 26.4 0 002.4 51.6"/><!-- Created by Nikita from the Noun Project --></svg>\n':'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 100" width="2.4em" height="1.2em"><path fill="currentColor" transform="scale(1.88) translate(0, -25)" d="M72 73.2H44A26.4 26.4 0 0044 30h28a21.6 21.6 0 010 43.2M7.2 51.6a21.6 21.6 0 1143.2 0 21.6 21.6 0 01-43.2 0M72 25.2H28.8a26.4 26.4 0 000 52.8H72a26.4 26.4 0 000-52.8"/><!-- Created by Nikita from the Noun Project --></svg>\n',"</span>\n")}},nu=function(t){e2(n,t);var e=e5(n);function n(t,i){var r;return e1(this,n),(r=e.call(this,i,{className:"psv-settings ".concat(p.tl.CAPTURE_EVENTS_CLASS)})).plugin=t,r.container.addEventListener("click",e4(r)),r.container.addEventListener("transitionend",e4(r)),r.container.addEventListener("keydown",e4(r)),r.hide(),r}return e0(n,[{key:"handleEvent",value:function(t){switch(t.type){case"click":this.__click(t.target);break;case"transitionend":this.isVisible()?this.__focusFirstOption():this.container.innerHTML="";break;case"keydown":if(this.isVisible())switch(t.key){case p.tl.KEY_CODES.Escape:this.plugin.hideSettings();break;case p.tl.KEY_CODES.Enter:this.__click(t.target)}}}},{key:"show",value:function(t){if(this.__showSettings(!1),this.container.classList.add("psv-settings--open"),this.container.style.right="",this.container.style.left="",t){var e=this.viewer.container.getBoundingClientRect(),n=t.left-e.left,i=e.right-t.right,r=t.width,o=this.container.offsetWidth;o>=n+r?this.container.style.left="0px":n+o<e.width?this.container.style.left="".concat(n,"px"):o>=i+r?this.container.style.right="0px":this.container.style.right="".concat(i,"px")}else this.container.style.right="0px";this.state.visible=!0}},{key:"hide",value:function(){this.container.classList.remove("psv-settings--open"),this.state.visible=!1}},{key:"__click",value:function(t){var e=p.P6.getClosest(t,"li");if(e){var n=e.dataset[ni],i=e.dataset[nr],r=this.plugin.settings.find(function(t){return t.id===n});switch(i){case no:this.__showSettings(!0);break;case na:switch(r.type){case"toggle":this.plugin.toggleSettingValue(r),this.__showSettings(!0);break;case"options":this.__showOptions(r)}break;default:"options"===r.type&&(this.hide(),this.plugin.applySettingOption(r,i))}}}},{key:"__showSettings",value:function(t){var e,n;this.container.innerHTML=(e=this.plugin.settings,n=function(t){var e=t.current(),n=t.options().find(function(t){return t.id===e});return null==n?void 0:n.label},'\n<ul class="psv-settings-list">\n  '.concat(e.map(function(t){return'\n    <li class="psv-settings-item" tabindex="0"\n        data-'.concat(ns,'="').concat(t.id,'" data-').concat(nl,'="').concat(na,'">\n      ').concat(nc[t.type](t,n),"\n    </li>\n  ")}).join(""),"\n</ul>\n")),t&&this.__focusFirstOption()}},{key:"__showOptions",value:function(t){var e=t.current();this.container.innerHTML='\n<ul class="psv-settings-list">\n  <li class="psv-settings-item psv-settings-item--header" tabindex="0"\n      data-'.concat(ns,'="').concat(t.id,'" data-').concat(nl,'="').concat(no,'">\n    <span class="psv-settings-item-icon">').concat(ne,'</span>\n    <span class="psv-settings-item-label">').concat(t.label,"</span>\n  </li>\n  ").concat(t.options().map(function(n){return'\n    <li class="psv-settings-item" tabindex="0"\n        data-'.concat(ns,'="').concat(t.id,'" data-').concat(nl,'="').concat(n.id,'">\n      <span class="psv-settings-item-icon">').concat(n.id===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 90"><polygon fill="currentColor" points="0,48 10,35 36,57 78,10 90,21 37,79 "/><!-- Created by Zahroe from the Noun Project --></svg>\n':"",'</span>\n      <span class="psv-settings-item-value">').concat(n.label,"</span>\n    </li>\n  ")}).join(""),"\n</ul>\n"),this.__focusFirstOption()}},{key:"__focusFirstOption",value:function(){var t;null===(t=this.container.querySelector("[tabindex]"))||void 0===t||t.focus()}}]),n}(p.k8);function np(){return JSON.parse(localStorage.getItem(nn))||{}}var nh=p.P6.getConfigParser({persist:!1,storage:{set:function(t,e){var n=np();n[t]=e,localStorage.setItem(nn,JSON.stringify(n))},get:function(t){return np()[t]}}}),nf=function(t){e2(n,t);var e=e5(n);function n(t,i){var r;return e1(this,n),(r=e.call(this,t)).settings=[],r.config=nh(i),r.component=new nu(e4(r),r.viewer),r}return e0(n,[{key:"init",value:function(){var t=this;eJ(e6(n.prototype),"init",this).call(this),p.P6.checkStylesheet(this.viewer.container,"settings-plugin"),this.viewer.addEventListener(p.U3.ClickEvent.type,this),this.viewer.addEventListener(p.U3.ShowPanelEvent.type,this),setTimeout(function(){return t.updateButton()})}},{key:"destroy",value:function(){this.viewer.removeEventListener(p.U3.ClickEvent.type,this),this.viewer.removeEventListener(p.U3.ShowPanelEvent.type,this),this.component.destroy(),this.settings.length=0,eJ(e6(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){(t instanceof p.U3.ClickEvent||t instanceof p.U3.ShowPanelEvent)&&this.component.isVisible()&&this.hideSettings()}},{key:"addSetting",value:function(t){var e=this;if(!t.id)throw new p.Il("Missing setting id");if(!t.type)throw new p.Il("Missing setting type");t.badge&&this.settings.some(function(t){return t.badge})&&p.P6.logWarn("More than one setting with a badge are declared, the result is unpredictable."),this.settings.push(t),this.component.isVisible()&&this.component.show(),this.updateButton(),this.config.persist&&Promise.resolve(this.config.storage.get(t.id)).then(function(n){switch(t.type){case"toggle":p.P6.isNil(n)||n===t.active()||(t.toggle(),e.dispatchEvent(new e7(t.id,t.active())));break;case"options":p.P6.isNil(n)||n===t.current()||(t.apply(n),e.dispatchEvent(new e7(t.id,t.current())))}e.updateButton()})}},{key:"removeSetting",value:function(t){var e=this.settings.findIndex(function(e){return e.id===t});-1!==e&&(this.settings.splice(e,1),this.component.isVisible()&&this.component.show(),this.updateButton())}},{key:"toggleSettings",value:function(){this.component.isVisible()?this.hideSettings():this.showSettings()}},{key:"hideSettings",value:function(){this.component.hide(),this.updateButton()}},{key:"showSettings",value:function(){var t=this.viewer.navbar.getButton(nt.id,!1),e=null==t?void 0:t.container.getBoundingClientRect();this.component.show(e),this.updateButton()}},{key:"updateButton",value:function(){var t,e=null===(t=this.settings.find(function(t){return t.badge}))||void 0===t?void 0:t.badge(),n=this.viewer.navbar.getButton(nt.id,!1);null==n||n.toggleActive(this.component.isVisible()),null==n||n.setBadge(e)}},{key:"toggleSettingValue",value:function(t){var e=!t.active();t.toggle(),this.dispatchEvent(new e7(t.id,e)),this.config.persist&&this.config.storage.set(t.id,e),this.updateButton()}},{key:"applySettingOption",value:function(t,e){t.apply(e),this.dispatchEvent(new e7(t.id,e)),this.config.persist&&this.config.storage.set(t.id,e),this.updateButton()}}]),n}(p.Vw);function nv(t){return(nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nd(){return(nd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nP(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function ng(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==nv(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==nv(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nv(e)?e:String(e)}(i.key),i)}}function ny(t,e,n){return e&&ng(t.prototype,e),n&&ng(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nm(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function nb(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nw(t,e)}function nw(t,e){return(nw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=nP(t);if(e){var r=nP(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===nv(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return nE(t)}(this,n)}}function nE(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nP(t){return(nP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}nf.id="settings",p.Of.lang[nt.id]="Settings",(0,p.KI)(nt,"fullscreen:left");/*!
 * PhotoSphereViewer.StereoPlugin 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var n_=Object.defineProperty;!function(t,e){for(var n in e)n_(t,n,{get:e[n],enumerable:!0})}({},{StereoUpdatedEvent:function(){return nS}});var nx=function(t){nb(n,t);var e=nk(n);function n(t){var i;return nm(this,n),(i=e.call(this,n.type)).stereoEnabled=t,i}return ny(n)}(p.$N);nx.type="stereo-updated";var nS=nx,nO=function(t){nb(n,t);var e=nk(n);function n(t){var i;return nm(this,n),(i=e.call(this,t,{className:"psv-stereo-button",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -2 16 16"><path fill="currentColor" d="M13.104 0H2.896C2.332 0 1 .392 1 .875h14C15 .392 13.668 0 13.104 0zM15 1H1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h3.534a2 2 0 0 0 1.821-1.172l1.19-2.618a.5.5 0 0 1 .91 0l1.19 2.618A2 2 0 0 0 11.466 11H15a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM4 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm8 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"/><!--Created by Idev\xe3 Batista from the Noun Project--></svg>',hoverScale:!0,collapsable:!0,tabbable:!0})).plugin=i.viewer.getPlugin("stereo"),i.plugin&&i.plugin.addEventListener(nS.type,nE(i)),i}return ny(n,[{key:"destroy",value:function(){this.plugin&&this.plugin.removeEventListener(nS.type,this),nd(nP(n.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin&&{initial:!1,promise:this.plugin.isSupported}}},{key:"handleEvent",value:function(t){t instanceof nS&&this.toggleActive(t.stereoEnabled)}},{key:"onClick",value:function(){this.plugin.toggle()}}]),n}(p.T9);nO.id="stereo";var nM=ny(function t(e){nm(this,t);var n=new f.u37;n.aspect=.5;var i=new f.FM8;this.setEyeSeparation=function(t){n.eyeSep=t},this.setSize=function(t,n){e.setSize(t,n)},this.render=function(t,r){!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===r.parent&&!0===r.matrixWorldAutoUpdate&&r.updateMatrixWorld(),n.update(r),e.getSize(i),e.autoClear&&e.clear(),e.setScissorTest(!0),e.setScissor(0,0,i.width/2,i.height),e.setViewport(0,0,i.width/2,i.height),e.render(t,n.cameraL),e.setScissor(i.width/2,0,i.width/2,i.height),e.setViewport(i.width/2,0,i.width/2,i.height),e.render(t,n.cameraR),e.setScissorTest(!1)}});function nT(){try{switch(screen.orientation.type){case"landscape-primary":case"landscape-secondary":return"landscape";case"portrait-primary":case"portrait-secondary":return"portrait";default:throw Error("unknown")}}catch(t){if(window.innerHeight>window.innerWidth)return"portrait";return"landscape"}}function nj(t){if("number"==typeof t)clearInterval(t);else try{screen.orientation.removeEventListener("change",t)}catch(t){}}var nL="pleaseRotate",nC=function(t){nb(n,t);var e=nk(n);function n(t){var i;return nm(this,n),(i=e.call(this,t)).state={enabled:!1,wakeLock:null,waitLandscape:null},i}return ny(n,[{key:"isSupported",get:function(){return this.gyroscope.isSupported()}},{key:"init",value:function(){if(nd(nP(n.prototype),"init",this).call(this),this.markers=this.viewer.getPlugin("markers"),this.compass=this.viewer.getPlugin("compass"),this.gyroscope=this.viewer.getPlugin("gyroscope"),!this.gyroscope)throw new p.Il("Stereo plugin requires the Gyroscope plugin");this.viewer.addEventListener(p.U3.StopAllEvent.type,this),this.viewer.addEventListener(p.U3.ClickEvent.type,this)}},{key:"destroy",value:function(){this.viewer.removeEventListener(p.U3.StopAllEvent.type,this),this.viewer.removeEventListener(p.U3.ClickEvent.type,this),this.stop(),delete this.markers,delete this.compass,delete this.gyroscope,nd(nP(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){(t instanceof p.U3.StopAllEvent||t instanceof p.U3.ClickEvent)&&this.stop()}},{key:"isEnabled",value:function(){return this.state.enabled}},{key:"start",value:function(){var t=this;return this.viewer.enterFullscreen(),this.__startWakelock(),this.__lockOrientation(),this.gyroscope.start("fast").then(function(){var e,n;t.viewer.renderer.setCustomRenderer(function(t){return new nM(t)}),t.state.enabled=!0,null===(e=t.markers)||void 0===e||e.hideAllMarkers(),null===(n=t.compass)||void 0===n||n.hide(),t.viewer.navbar.hide(),t.viewer.panel.hide(),t.dispatchEvent(new nS(!0)),t.viewer.notification.show({content:t.viewer.config.lang.stereoNotification,timeout:3e3})},function(){return t.__unlockOrientation(),t.__stopWakelock(),t.viewer.exitFullscreen(),Promise.reject()})}},{key:"stop",value:function(){if(this.isEnabled()){var t,e;this.viewer.renderer.setCustomRenderer(null),this.state.enabled=!1,null===(t=this.markers)||void 0===t||t.showAllMarkers(),null===(e=this.compass)||void 0===e||e.show(),this.viewer.navbar.show(),this.__unlockOrientation(),this.__stopWakelock(),this.viewer.exitFullscreen(),this.gyroscope.stop(),this.dispatchEvent(new nS(!1))}}},{key:"toggle",value:function(){this.isEnabled()?this.stop():this.start()}},{key:"__startWakelock",value:function(){var t=this;"wakeLock"in navigator?navigator.wakeLock.request("screen").then(function(e){t.state.wakeLock=e}).catch(function(){return p.P6.logWarn("Cannot acquire WakeLock")}):p.P6.logWarn("WakeLock is not available")}},{key:"__stopWakelock",value:function(){this.state.wakeLock&&(this.state.wakeLock.release(),this.state.wakeLock=null)}},{key:"__lockOrientation",value:function(){var t,e=this,n=function(){"landscape"===nT()||e.viewer.overlay.isVisible(nL)||(e.viewer.overlay.show({id:nL,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M66.7 19a14 14 0 0 1 13.8 12.1l-3.9-2.7c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l5.7 3.9.6.2c.3 0 .6-.2.8-.4l3.9-5.7c.3-.5.2-1.1-.3-1.4-.5-.3-1.1-.2-1.4.3l-2.4 3.5A16 16 0 0 0 66.7 17c-.6 0-1 .4-1 1s.4 1 1 1zM25 15h10c.6 0 1-.4 1-1s-.4-1-1-1H25c-.6 0-1 .4-1 1s.4 1 1 1zm-6.9 30H16l-2 .2a1 1 0 0 0-.8 1.2c.1.5.5.8 1 .8h.2l1.7-.2h2.1c.6 0 1-.4 1-1s-.5-1-1.1-1zm10 0h-4c-.6 0-1 .4-1 1s.4 1 1 1h4c.6 0 1-.4 1-1s-.4-1-1-1zM84 45H55V16A11 11 0 0 0 44 5H16A11 11 0 0 0 5 16v68a11 11 0 0 0 11 11h68a11 11 0 0 0 11-11V56a11 11 0 0 0-11-11zM16 93c-5 0-9-4-9-9V53.2c.3-.1.6-.3.7-.6a9.8 9.8 0 0 1 2-3c.4-.4.4-1 0-1.4a1 1 0 0 0-1.4 0l-1.2 1.5V16c0-5 4-9 9-9h28c5 0 9 4 9 9v68c0 5-4 9-9 9H16zm77-9c0 5-4 9-9 9H50.3c2.8-2 4.7-5.3 4.7-9V47h29c5 0 9 4 9 9v28zM38.1 45h-4c-.6 0-1 .4-1 1s.4 1 1 1h4c.6 0 1-.4 1-1s-.5-1-1-1zm9.9 0h-4c-.6 0-1 .4-1 1s.4 1 1 1h4c.6 0 1-.4 1-1s-.4-1-1-1zm38 19c-.6 0-1 .4-1 1v10c0 .6.4 1 1 1s1-.4 1-1V65c0-.6-.4-1-1-1z"/><!--Created by Anthony Bresset from the Noun Project--></svg>',title:e.viewer.config.lang.pleaseRotate,text:e.viewer.config.lang.tapToContinue}),e.state.waitLandscape=function(t){try{var e=function(){"landscape"===nT()&&t()};return screen.orientation.addEventListener("change",e),e}catch(e){return setInterval(function(){"landscape"===nT()&&t()},500)}}(function(){e.viewer.overlay.hide(nL),nj(e.state.waitLandscape),e.state.waitLandscape=null})),t&&(clearTimeout(t),t=null)};try{screen.orientation.lock("landscape").then(null,function(){return n()}),t=setTimeout(function(){return n()},1e3)}catch(t){n()}}},{key:"__unlockOrientation",value:function(){this.viewer.overlay.hide(nL),this.state.waitLandscape&&(nj(this.state.waitLandscape),this.state.waitLandscape=null);try{var t;null===(t=screen.orientation)||void 0===t||t.unlock()}catch(t){}}}]),n}(p.Vw);function nR(t){return(nR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nI(){return(nI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nV(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function nz(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==nR(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==nR(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nR(e)?e:String(e)}(i.key),i)}}function nA(t,e,n){return e&&nz(t.prototype,e),n&&nz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nN(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function nU(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nH(t,e)}function nH(t,e){return(nH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=nV(t);if(e){var r=nV(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===nR(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return nD(t)}(this,n)}}function nD(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nV(t){return(nV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}nC.id="stereo",p.Of.lang[nO.id]="Stereo view",(0,p.KI)(nO,"caption:right"),p.Of.lang.stereoNotification="Tap anywhere to exit stereo view.",p.Of.lang.pleaseRotate="Please rotate your device",p.Of.lang.tapToContinue="(or tap to continue)";/*!
 * PhotoSphereViewer.VideoPlugin 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var nY=Object.defineProperty;!function(t,e){for(var n in e)nY(t,n,{get:e[n],enumerable:!0})}({},{BufferEvent:function(){return n$},PlayPauseEvent:function(){return nW},ProgressEvent:function(){return nK},VolumeChangeEvent:function(){return nX}});var nG=function(t){nU(n,t);var e=nB(n);function n(t){var i;return nN(this,n),(i=e.call(this,n.type)).playing=t,i}return nA(n)}(p.$N);nG.type="play-pause";var nW=nG,nq=function(t){nU(n,t);var e=nB(n);function n(t){var i;return nN(this,n),(i=e.call(this,n.type)).volume=t,i}return nA(n)}(p.$N);nq.type="volume-change";var nX=nq,nF=function(t){nU(n,t);var e=nB(n);function n(t,i,r){var o;return nN(this,n),(o=e.call(this,n.type)).time=t,o.duration=i,o.progress=r,o}return nA(n)}(p.$N);nF.type="progress";var nK=nF,nZ=function(t){nU(n,t);var e=nB(n);function n(t){var i;return nN(this,n),(i=e.call(this,n.type)).maxBuffer=t,i}return nA(n)}(p.$N);nZ.type="buffer";var n$=nZ,nJ='<svg viewBox="76 5 550 550" xmlns="http://www.w3.org/2000/svg"><path fill="currentcolor" d="M351.1 5.6A274.1 274.1 0 0 0 76.7 280a274.1 274.1 0 0 0 274.4 274.4A274.1 274.1 0 0 0 625.5 280 274.1 274.1 0 0 0 351.1 5.6zm146.7 282.8-219 134.4c-6.6 4-15.6-.6-15.6-8.4V145.6c0-7.8 9-12.9 15.7-8.4l219 134.4a10 10 0 0 1 0 16.8z"/></svg>',nQ=function(t){nU(n,t);var e=nB(n);function n(t){var i,r;return nN(this,n),(r=e.call(this,t,{className:"psv-video-play-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:nJ,iconActive:'<svg viewBox="80 10 540 540" xmlns="http://www.w3.org/2000/svg"><path d="M80.58 279.67c0-148.76 120.33-269.09 269.09-269.09s269.75 120.33 269.75 269.09-121 269.75-269.75 269.75-269.1-120.99-269.1-269.75zm175.87 105.12V175.2c0-9.26 7.27-15.87 15.86-15.87h39.01c8.6 0 15.87 6.62 15.87 15.87v209.59c0 8.6-7.27 15.87-15.87 15.87h-39c-8.6 0-15.87-7.28-15.87-15.87zm116.36 0V175.2c0-9.26 7.27-15.87 15.86-15.87h38.35c9.26 0 15.87 6.62 15.87 15.87v209.59c0 8.6-6.61 15.87-15.87 15.87h-38.34c-8.6 0-15.87-7.28-15.87-15.87z" fill-rule="evenodd" fill="currentcolor"/></svg>'})).plugin=r.viewer.getPlugin("video"),null===(i=r.plugin)||void 0===i||i.addEventListener(nW.type,nD(r)),r}return nA(n,[{key:"destroy",value:function(){var t;null===(t=this.plugin)||void 0===t||t.removeEventListener(nW.type,this),nI(nV(n.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin}},{key:"handleEvent",value:function(t){t instanceof nW&&this.toggleActive(t.playing)}},{key:"onClick",value:function(){this.plugin.playPause()}}]),n}(p.T9);function n0(t){var e=Math.round(t%60);return"".concat(Math.round(t-e)/60,":").concat(("0"+e).slice(-2))}nQ.id="videoPlay",nQ.groupId="video";var n1=function(t){nU(n,t);var e=nB(n);function n(t){var i;return nN(this,n),(i=e.call(this,t,{className:"psv-caption psv-video-time",hoverScale:!1,collapsable:!1,tabbable:!1})).contentElt=document.createElement("div"),i.contentElt.className="psv-caption-content",i.container.appendChild(i.contentElt),i.plugin=i.viewer.getPlugin("video"),i.plugin&&(i.viewer.addEventListener(p.U3.PanoramaLoadedEvent.type,nD(i)),i.plugin.addEventListener(nK.type,nD(i))),i}return nA(n,[{key:"destroy",value:function(){this.plugin&&(this.viewer.removeEventListener(p.U3.PanoramaLoadedEvent.type,this),this.plugin.removeEventListener(nK.type,this)),delete this.plugin,nI(nV(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){switch(t.type){case p.U3.PanoramaLoadedEvent.type:case nK.type:this.contentElt.innerHTML="<strong>".concat(n0(this.plugin.getTime()),"</strong> / ").concat(n0(this.plugin.getDuration()))}}},{key:"onClick",value:function(){}}]),n}(p.T9);n1.id="videoTime",n1.groupId="video";var n2=function(t){nU(n,t);var e=nB(n);function n(t){var i;return nN(this,n),(i=e.call(this,t,{className:"psv-video-volume-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="17 16 71 71"><path fill="currentColor" d="M20.19 61.66H32.9c.54 0 1.07.16 1.52.47L51.02 73.5a2.7 2.7 0 0 0 4.22-2.23V28.74a2.7 2.7 0 0 0-4.22-2.23L34.43 37.87c-.45.3-.98.47-1.52.47H20.19a2.7 2.7 0 0 0-2.7 2.7v17.92a2.7 2.7 0 0 0 2.7 2.7z"/><path id="lvl0" fill="currentColor" d="M63.802 58.834c.39.39.902.586 1.414.586s1.023-.195 1.414-.586l7.234-7.233 7.234 7.233c.39.39.902.586 1.414.586s1.023-.195 1.414-.586a2 2 0 0 0 0-2.828l-7.234-7.234 7.234-7.233a2 2 0 1 0-2.828-2.828l-7.234 7.233-7.234-7.233a2 2 0 1 0-2.828 2.828l7.234 7.233-7.234 7.234a2 2 0 0 0 0 2.828z"/><path id="lvl1" fill="currentColor" d="M59.573 59.65c.39.394.904.59 1.418.59.51 0 1.02-.194 1.41-.582A13.53 13.53 0 0 0 66.411 50a13.56 13.56 0 0 0-3.996-9.654 2 2 0 0 0-2.828 2.829A9.586 9.586 0 0 1 62.41 50a9.56 9.56 0 0 1-2.83 6.823 2 2 0 0 0-.008 2.828z"/><path id="lvl2" fill="currentColor" d="M72.501 50c0 5.267-2.055 10.227-5.786 13.967a2 2 0 0 0 2.832 2.825C74.03 62.297 76.5 56.333 76.5 50s-2.47-12.297-6.954-16.792a2 2 0 0 0-2.832 2.825c3.731 3.74 5.786 8.7 5.786 13.967z"/><path id="lvl3" fill="currentColor" d="M83.001 50c0 8.084-3.147 15.679-8.863 21.384a2 2 0 0 0 2.826 2.831C83.437 67.754 87 59.155 87 50c0-9.154-3.564-17.753-10.037-24.215a2 2 0 0 0-2.826 2.83C79.854 34.323 83 41.917 83 50z"/><!--Created by Rudez Studio from the Noun Project--></svg>'})).plugin=i.viewer.getPlugin("video"),i.plugin&&(i.rangeContainer=document.createElement("div"),i.rangeContainer.className="psv-video-volume__container",i.container.appendChild(i.rangeContainer),i.range=document.createElement("div"),i.range.className="psv-video-volume__range",i.rangeContainer.appendChild(i.range),i.trackElt=document.createElement("div"),i.trackElt.className="psv-video-volume__track",i.range.appendChild(i.trackElt),i.progressElt=document.createElement("div"),i.progressElt.className="psv-video-volume__progress",i.range.appendChild(i.progressElt),i.handleElt=document.createElement("div"),i.handleElt.className="psv-video-volume__handle",i.range.appendChild(i.handleElt),i.slider=new p.P6.Slider(i.range,p.P6.SliderDirection.VERTICAL,i.__onSliderUpdate.bind(nD(i))),i.viewer.addEventListener(p.U3.PanoramaLoadedEvent.type,nD(i)),i.plugin.addEventListener(nW.type,nD(i)),i.plugin.addEventListener(nX.type,nD(i)),i.__setVolume(0)),i}return nA(n,[{key:"destroy",value:function(){this.plugin&&(this.viewer.removeEventListener(p.U3.PanoramaLoadedEvent.type,this),this.plugin.removeEventListener(nW.type,this),this.plugin.removeEventListener(nX.type,this)),this.slider.destroy(),nI(nV(n.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin}},{key:"handleEvent",value:function(t){switch(t.type){case p.U3.PanoramaLoadedEvent.type:case nW.type:case nX.type:this.__setVolume(this.plugin.getVolume())}}},{key:"onClick",value:function(){this.plugin.setMute()}},{key:"__onSliderUpdate",value:function(t){t.mousedown&&this.plugin.setVolume(t.value)}},{key:"__setVolume",value:function(t){var e;e=0===t?0:t<.333?1:t<.666?2:3,p.P6.toggleClass(this.container,"psv-video-volume-button--0",0===e),p.P6.toggleClass(this.container,"psv-video-volume-button--1",1===e),p.P6.toggleClass(this.container,"psv-video-volume-button--2",2===e),p.P6.toggleClass(this.container,"psv-video-volume-button--3",3===e),this.handleElt.style.bottom="".concat(100*t,"%"),this.progressElt.style.height="".concat(100*t,"%")}}]),n}(p.T9);n2.id="videoVolume",n2.groupId="video";var n3=function(t){nU(n,t);var e=nB(n);function n(t,i){var r;return nN(this,n),(r=e.call(this,i,{className:"psv-video-overlay"})).plugin=t,r.button=document.createElement("button"),r.button.className="psv-video-bigbutton ".concat(p.tl.CAPTURE_EVENTS_CLASS),r.button.innerHTML=nJ,r.container.appendChild(r.button),r.viewer.addEventListener(p.U3.PanoramaLoadedEvent.type,nD(r)),r.plugin.addEventListener(nW.type,nD(r)),r.button.addEventListener("click",nD(r)),r}return nA(n,[{key:"destroy",value:function(){this.viewer.removeEventListener(p.U3.PanoramaLoadedEvent.type,this),this.plugin.removeEventListener(nW.type,this),nI(nV(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){switch(t.type){case p.U3.PanoramaLoadedEvent.type:case nW.type:p.P6.toggleClass(this.button,"psv-video-bigbutton--pause",!this.plugin.isPlaying());break;case"click":this.plugin.playPause()}}}]),n}(p.k8),n5=function(t){nU(n,t);var e=nB(n);function n(t,i){var r;return nN(this,n),(r=e.call(this,i,{className:"psv-video-progressbar"})).plugin=t,r.state={visible:!0,req:null,tooltip:null},r.bufferElt=document.createElement("div"),r.bufferElt.className="psv-video-progressbar__buffer",r.container.appendChild(r.bufferElt),r.progressElt=document.createElement("div"),r.progressElt.className="psv-video-progressbar__progress",r.container.appendChild(r.progressElt),r.handleElt=document.createElement("div"),r.handleElt.className="psv-video-progressbar__handle",r.container.appendChild(r.handleElt),r.slider=new p.P6.Slider(r.container,p.P6.SliderDirection.HORIZONTAL,r.__onSliderUpdate.bind(nD(r))),r.viewer.addEventListener(p.U3.PanoramaLoadedEvent.type,nD(r)),r.plugin.addEventListener(n$.type,nD(r)),r.plugin.addEventListener(nK.type,nD(r)),r.state.req=window.requestAnimationFrame(function(){return r.__updateProgress()}),r.hide(),r}return nA(n,[{key:"destroy",value:function(){var t;this.viewer.removeEventListener(p.U3.PanoramaLoadedEvent.type,this),this.plugin.removeEventListener(n$.type,this),this.plugin.removeEventListener(nK.type,this),this.slider.destroy(),null===(t=this.state.tooltip)||void 0===t||t.hide(),window.cancelAnimationFrame(this.state.req),delete this.state.tooltip,nI(nV(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){switch(t.type){case p.U3.PanoramaLoadedEvent.type:case n$.type:case nK.type:this.bufferElt.style.width="".concat(100*this.plugin.getBufferProgress(),"%")}}},{key:"__updateProgress",value:function(){var t=this;this.progressElt.style.width="".concat(100*this.plugin.getProgress(),"%"),this.state.req=window.requestAnimationFrame(function(){return t.__updateProgress()})}},{key:"__onSliderUpdate",value:function(t){if(t.mouseover){this.handleElt.style.display="block",this.handleElt.style.left="".concat(100*t.value,"%");var e,n=n0(this.plugin.getDuration()*t.value);this.state.tooltip?this.state.tooltip.update(n,{top:t.cursor.clientY,left:t.cursor.clientX}):this.state.tooltip=this.viewer.createTooltip({top:t.cursor.clientY,left:t.cursor.clientX,content:n})}else this.handleElt.style.display="none",null===(e=this.state.tooltip)||void 0===e||e.hide(),delete this.state.tooltip;t.click&&this.plugin.setProgress(t.value)}}]),n}(p.k8),n4=p.P6.getConfigParser({progressbar:!0,bigbutton:!0,keypoints:null}),n6=function(t){nU(n,t);var e=nB(n);function n(t,i){var r;if(nN(this,n),(r=e.call(this,t,i)).state={curve:null,start:null,end:null,keypoints:null},!r.viewer.adapter.constructor.id.includes("video"))throw new p.Il("VideoPlugin can only be used with a video adapter.");return r.config.progressbar&&(r.progressbar=new n5(nD(r),t)),r.config.bigbutton&&(r.overlay=new n3(nD(r),t)),r}return nA(n,[{key:"init",value:function(){var t;nI(nV(n.prototype),"init",this).call(this),p.P6.checkStylesheet(this.viewer.container,"video-plugin"),this.markers=this.viewer.getPlugin("markers"),this.autorotate=this.viewer.getPlugin("autorotate"),this.autorotate&&(this.autorotate.config.autostartDelay=0,this.autorotate.config.autostartOnIdle=!1),this.config.keypoints&&(this.setKeypoints(this.config.keypoints),delete this.config.keypoints),null===(t=this.autorotate)||void 0===t||t.addEventListener("autorotate",this),this.viewer.addEventListener(p.U3.BeforeRenderEvent.type,this),this.viewer.addEventListener(p.U3.PanoramaLoadedEvent.type,this),this.viewer.addEventListener(p.U3.KeypressEvent.type,this)}},{key:"destroy",value:function(){var t;null===(t=this.autorotate)||void 0===t||t.removeEventListener("autorotate",this),this.viewer.removeEventListener(p.U3.BeforeRenderEvent.type,this),this.viewer.removeEventListener(p.U3.PanoramaLoadedEvent.type,this),this.viewer.removeEventListener(p.U3.KeypressEvent.type,this),delete this.progressbar,delete this.overlay,delete this.markers,nI(nV(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){var e;switch(t.type){case p.U3.BeforeRenderEvent.type:this.__autorotate();break;case"autorotate":this.__configureAutorotate();break;case p.U3.PanoramaLoadedEvent.type:this.__bindVideo(t.data),null===(e=this.progressbar)||void 0===e||e.show();break;case p.U3.KeypressEvent.type:this.__onKeyPress(t);break;case"play":case"pause":this.dispatchEvent(new nW(this.isPlaying()));break;case"progress":this.dispatchEvent(new n$(this.getBufferProgress()));break;case"volumechange":this.dispatchEvent(new nX(this.getVolume()));break;case"timeupdate":this.dispatchEvent(new nK(this.getTime(),this.getDuration(),this.getProgress()))}}},{key:"__bindVideo",value:function(t){this.video&&(this.video.removeEventListener("play",this),this.video.removeEventListener("pause",this),this.video.removeEventListener("progress",this),this.video.removeEventListener("volumechange",this),this.video.removeEventListener("timeupdate",this)),this.video=t.texture.image,this.video.addEventListener("play",this),this.video.addEventListener("pause",this),this.video.addEventListener("progress",this),this.video.addEventListener("volumechange",this),this.video.addEventListener("timeupdate",this)}},{key:"__onKeyPress",value:function(t){t.key===p.tl.KEY_CODES.Space&&(this.playPause(),t.preventDefault())}},{key:"getDuration",value:function(){var t,e;return null!==(t=null===(e=this.video)||void 0===e?void 0:e.duration)&&void 0!==t?t:0}},{key:"getTime",value:function(){var t,e;return null!==(t=null===(e=this.video)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0}},{key:"getProgress",value:function(){return this.video?this.video.currentTime/this.video.duration:0}},{key:"isPlaying",value:function(){return!!this.video&&!this.video.paused}},{key:"getVolume",value:function(){var t,e,n;return null!==(t=this.video)&&void 0!==t&&t.muted?0:null!==(e=null===(n=this.video)||void 0===n?void 0:n.volume)&&void 0!==e?e:0}},{key:"playPause",value:function(){this.video&&(this.video.paused?this.video.play():this.video.pause())}},{key:"play",value:function(){var t;null!==(t=this.video)&&void 0!==t&&t.paused&&this.video.play()}},{key:"pause",value:function(){this.video&&!this.video.paused&&this.video.pause()}},{key:"setVolume",value:function(t){this.video&&(this.video.muted=!1,this.video.volume=f.M8C.clamp(t,0,1))}},{key:"setMute",value:function(t){this.video&&(this.video.muted=void 0===t?!this.video.muted:t,this.video.muted||0!==this.video.volume||(this.video.volume=.1))}},{key:"setTime",value:function(t){this.video&&(this.video.currentTime=t)}},{key:"setProgress",value:function(t){this.video&&(this.video.currentTime=this.video.duration*t)}},{key:"getBufferProgress",value:function(){if(!this.video)return 0;for(var t=0,e=this.video.buffered,n=0,i=e.length;n<i;n++)if(e.start(n)<=this.video.currentTime&&e.end(n)>=this.video.currentTime){t=e.end(n);break}return Math.max(this.video.currentTime,t)/this.video.duration}},{key:"setKeypoints",value:function(t){var e=this;if(!this.autorotate)throw new p.Il("Video keypoints required the AutorotatePlugin");if(!t){this.state.keypoints=null,this.__configureAutorotate();return}if(t.length<2)throw new p.Il("At least two points are required");this.state.keypoints=p.P6.clone(t),this.state.keypoints&&(this.state.keypoints.forEach(function(t,n){if(t.position)t.position=e.viewer.dataHelper.cleanPosition(t.position);else throw new p.Il("Keypoint #".concat(n," is missing marker or position"));if(p.P6.isNil(t.time))throw new p.Il("Keypoint #".concat(n," is missing time"))}),this.state.keypoints.sort(function(t,e){return t.time-e.time})),this.__configureAutorotate()}},{key:"__configureAutorotate",value:function(){delete this.state.curve,delete this.state.start,delete this.state.end,this.autorotate.isEnabled()&&this.state.keypoints&&this.viewer.dynamics.position.stop()}},{key:"__autorotate",value:function(){if(null!==(t=this.autorotate)&&void 0!==t&&t.isEnabled()&&this.state.keypoints){var t,e=this.getTime(),n=this.state;if((!n.curve||e<n.start.time||e>=n.end.time)&&this.__autorotateNext(e),n.start===n.end)this.viewer.rotate(n.start.position);else{var i=(e-n.start.time)/(n.end.time-n.start.time),r=n.curve.getPoint(1/3+i/3);this.viewer.dynamics.position.goto({yaw:r.x,pitch:r.y})}}}},{key:"__autorotateNext",value:function(t){var e=null,n=null,i=this.state.keypoints,r=i.length-1;t<i[0].time&&(e=0,n=0);for(var o=0;o<r;o++)if(t>=i[o].time&&t<i[o+1].time){e=o,n=o+1;break}t>=i[r].time&&(e=r,n=r);for(var a=[i[Math.max(0,e-1)].position,i[e].position,i[n].position,i[Math.min(r,n+1)].position],s=[new f.FM8(a[0].yaw,a[0].pitch)],l=0,c=1;c<=3;c++){var u=a[c-1].yaw-a[c].yaw;u>Math.PI?l+=1:u<-Math.PI&&(l-=1),0!==l&&1===c&&(s[0].x-=2*l*Math.PI,l=0),s.push(new f.FM8(a[c].yaw+2*l*Math.PI,a[c].pitch))}this.state.curve=new f.gti(s),this.state.start=i[e],this.state.end=i[n]}}]),n}(p.Yc);function n8(){n8=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o,a,s=Object.create((e&&e.prototype instanceof h?e:h).prototype);return i(s,"_invoke",{value:(o=new P(r||[]),a="suspendedStart",function(e,i){if("executing"===a)throw Error("Generator is already running");if("completed"===a){if("throw"===e)throw i;return x()}for(o.method=e,o.arg=i;;){var r=o.delegate;if(r){var s=function t(e,n){var i=n.method,r=e.iterator[i];if(void 0===r)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+i+"' method")),p;var o=u(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,p):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,p)}(r,o);if(s){if(s===p)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===a)throw a="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a="executing";var l=u(t,n,o);if("normal"===l.type){if(a=o.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(a="completed",o.method="throw",o.arg=l.arg)}})}),s}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var p={};function h(){}function f(){}function v(){}var d={};l(d,o,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(_([])));y&&y!==e&&n.call(y,o)&&(d=y);var m=v.prototype=h.prototype=Object.create(d);function b(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){var r;i(this,"_invoke",{value:function(i,o){function a(){return new e(function(r,a){!function i(r,o,a,s){var l=u(t[r],t,o);if("throw"!==l.type){var c=l.arg,p=c.value;return p&&"object"==it(p)&&n.call(p,"__await")?e.resolve(p.__await).then(function(t){i("next",t,a,s)},function(t){i("throw",t,a,s)}):e.resolve(p).then(function(t){c.value=t,a(c)},function(t){return i("throw",t,a,s)})}s(l.arg)}(i,o,r,a)})}return r=r?r.then(a,a):a()}})}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=v,i(m,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:f,configurable:!0}),f.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,a,function(){return this}),t.AsyncIterator=w,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new w(c(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},b(m),l(m,s,"Generator"),l(m,o,function(){return this}),l(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return a.type="throw",a.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}function n9(t,e,n,i,r,o,a){try{var s=t[o](a),l=s.value}catch(t){n(t);return}s.done?e(l):Promise.resolve(l).then(i,r)}function n7(){return(n7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iy(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function ii(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ie(Object(n),!0).forEach(function(e){ir(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ir(t,e,n){return(e=iu(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function io(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(t,e)||ia(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ia(t,e){if(t){if("string"==typeof t)return is(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return is(t,e)}}function is(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function il(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,iu(i.key),i)}}function ic(t,e,n){return e&&il(t.prototype,e),n&&il(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function iu(t){var e=function(t,e){if("object"!==it(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==it(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===it(e)?e:String(e)}function ip(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function ih(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iv(t,e)}function iv(t,e){return(iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function id(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=iy(t);if(e){var r=iy(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===it(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ig(t)}(this,n)}}function ig(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iy(t){return(iy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n6.id="video",n6.configParser=n4,n6.readonlyOptions=Object.keys(n4.defaults),p.Of.lang[nQ.id]="Play/Pause",p.Of.lang[n2.id]="Volume",(0,p.KI)(nQ),(0,p.KI)(n2),(0,p.KI)(n1),p.Of.navbar.unshift(nQ.groupId);/*!
 * PhotoSphereViewer.VirtualTourPlugin 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var im=Object.defineProperty;!function(t,e){for(var n in e)im(t,n,{get:e[n],enumerable:!0})}({},{NodeChangedEvent:function(){return iw}});var ib=function(t){ih(n,t);var e=id(n);function n(t,i){var r;return ip(this,n),(r=e.call(this,n.type)).node=t,r.data=i,r}return ic(n)}(p.$N);ib.type="node-changed";var iw=ib,ik={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"8B1A6E5B-A7CC-4471-9CA0-BD64D80ABB79",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[-25,-15,-2.5,0,0,-2.5,0,-5,-2.5,0,-5,-2.5,0,0,-2.5,25,-15,-2.5,0,-5,-2.5,25,-15,-2.5,25,-20,-2.5,0,-5,-2.5,-25,-20,-2.5,-25,-15,-2.5,25,-15,2.5,25,-20,2.5,25,-15,-2.5,25,-15,-2.5,25,-20,2.5,25,-20,-2.5,25,-20,2.5,0,-5,2.5,25,-20,-2.5,25,-20,-2.5,0,-5,2.5,0,-5,-2.5,0,-5,2.5,-25,-20,2.5,0,-5,-2.5,0,-5,-2.5,-25,-20,2.5,-25,-20,-2.5,-25,-20,2.5,-25,-15,2.5,-25,-20,-2.5,-25,-20,-2.5,-25,-15,2.5,-25,-15,-2.5,-25,-15,2.5,0,0,2.5,-25,-15,-2.5,-25,-15,-2.5,0,0,2.5,0,0,-2.5,0,0,2.5,25,-15,2.5,0,0,-2.5,0,0,-2.5,25,-15,2.5,25,-15,-2.5,25,-20,2.5,25,-15,2.5,0,-5,2.5,0,-5,2.5,25,-15,2.5,0,0,2.5,0,-5,2.5,0,0,2.5,-25,-15,2.5,-25,-15,2.5,-25,-20,2.5,0,-5,2.5],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1],normalized:!1}},boundingSphere:{center:[0,-10,0],radius:27.041634}}},iE={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"B12A1453-6E56-40AC-840B-BA7DF5DB9E2A",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[-26,-21.766189,-3.5,-26,-14.433809,-3.5,0,-6.16619,-3.5,0,-6.16619,-3.5,-26,-14.433809,-3.5,0,1.16619,-3.5,0,-6.16619,-3.5,0,1.16619,-3.5,26,-14.43381,-3.5,26,-14.43381,-3.5,26,-21.766191,-3.5,0,-6.16619,-3.5,-26,-14.433809,3.5,0,1.16619,3.5,-26,-14.433809,-3.5,-26,-14.433809,-3.5,0,1.16619,3.5,0,1.16619,-3.5,0,1.16619,3.5,26,-14.43381,3.5,0,1.16619,-3.5,0,1.16619,-3.5,26,-14.43381,3.5,26,-14.43381,-3.5,26,-14.43381,3.5,26,-21.766191,3.5,26,-14.43381,-3.5,26,-14.43381,-3.5,26,-21.766191,3.5,26,-21.766191,-3.5,26,-21.766191,3.5,0,-6.16619,3.5,26,-21.766191,-3.5,26,-21.766191,-3.5,0,-6.16619,3.5,0,-6.16619,-3.5,0,-6.16619,3.5,-26,-21.766189,3.5,0,-6.16619,-3.5,0,-6.16619,-3.5,-26,-21.766189,3.5,-26,-21.766189,-3.5,-26,-21.766189,3.5,-26,-14.433809,3.5,-26,-21.766189,-3.5,-26,-21.766189,-3.5,-26,-14.433809,3.5,-26,-14.433809,-3.5,-26,-21.766189,3.5,0,-6.16619,3.5,-26,-14.433809,3.5,-26,-14.433809,3.5,0,-6.16619,3.5,0,1.16619,3.5,0,1.16619,3.5,0,-6.16619,3.5,26,-14.43381,3.5,26,-14.43381,3.5,0,-6.16619,3.5,26,-21.766191,3.5],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1],normalized:!1}},boundingSphere:{center:[0,-10.3,0],radius:28.630814}}},iP="tourLink",i_="__tour-link__",ix=(o=(r=new f.Gql().parseGeometries([ik,iE]))[ik.uuid],a=r[iE.uuid],s=Math.PI/2,o.scale(.03,.03,.03),o.rotateX(s),a.scale(.03,.03,.03),a.rotateX(s),{ARROW_GEOM:o,ARROW_OUTLINE_GEOM:a}),iS=ix.ARROW_GEOM,iO=ix.ARROW_OUTLINE_GEOM;function iM(t,e){t.material.color.set(e)}function iT(t,e){var n,i,r,o,a,s,l,c,u=ij(t),p=ij(e),h=null!==(l=t[2])&&void 0!==l?l:0,f=null!==(c=e[2])&&void 0!==c?c:0,v=0;return h!==f&&(v=Math.atan((f-h)/iL(u,p))),{yaw:(i=(n=io(u,2))[0],r=n[1],a=(o=io(p,2))[0],Math.atan2(Math.sin(a-i)*Math.cos(s=o[1]),Math.cos(r)*Math.sin(s)-Math.sin(r)*Math.cos(s)*Math.cos(a-i))),pitch:v}}function ij(t){return[f.M8C.degToRad(t[0]),f.M8C.degToRad(t[1])]}function iL(t,e){return 6371e3*p.P6.greatArcDistance(t,e)}var iC=parseInt(f.UZH)>=155?Math.PI:1,iR=function(){function t(e,n){ip(this,t),this.viewer=e,this.plugin=n,this.camera=new f.cPb(50,16/9,.1,2*p.tl.SPHERE_RADIUS),this.scene=new f.xsS;var i=new f.Mig(16777215,iC);this.scene.add(i);var r=new f.cek(16777215,iC,0,0);r.position.set(0,0,0),this.scene.add(r),this.group=new f.ZAu,this.scene.add(this.group);var o=p.tl.SPHERE_RADIUS*Math.atan(f.M8C.degToRad(this.camera.fov/2))-1.5;"bottom"===this.plugin.config.arrowPosition&&(o*=-1),this.group.position.set(0,o,0)}return ic(t,[{key:"destroy",value:function(){delete this.viewer,delete this.plugin,delete this.renderer}},{key:"withRenderer",value:function(t){return this.renderer=t,this}},{key:"updateCamera",value:function(){this.camera.aspect=this.viewer.state.aspect,this.camera.position.copy(this.viewer.state.direction).negate(),this.camera.lookAt(0,0,0),this.camera.updateProjectionMatrix()}},{key:"render",value:function(t,e){this.renderer.render(t,e),this.renderer.autoClear=!1,this.renderer.clearDepth(),this.renderer.render(this.scene,this.camera),this.renderer.autoClear=!0}},{key:"getIntersections",value:function(t,e){return t.setFromCamera(e,this.camera),t.intersectObjects(this.group.children)}},{key:"clearArrows",value:function(){this.group.clear()}},{key:"addArrow",value:function(t,e,n){var i,r,o,a=(null===(i=t.arrowStyle)||void 0===i?void 0:i.size)||this.plugin.config.arrowStyle.size,s=new f.Kj0(iS,new f.YBo);s.userData=ir({},iP,t),s.renderOrder=1e3+this.group.children.length,s.scale.multiplyScalar(a),s.rotation.order="YXZ",s.rotateY(-e.yaw),this.viewer.dataHelper.sphericalCoordsToVector3({yaw:e.yaw,pitch:0},s.position,2*n*a);var l=new f.Kj0(iO,new f.vBJ({side:f._Li}));l.scale.copy(s.scale),l.position.copy(s.position),l.rotation.copy(s.rotation),iM(s,(null===(r=t.arrowStyle)||void 0===r?void 0:r.color)||this.plugin.config.arrowStyle.color),iM(l,(null===(o=t.arrowStyle)||void 0===o?void 0:o.outlineColor)||this.plugin.config.arrowStyle.outlineColor),this.group.add(s),this.group.add(l),s.onBeforeRender=function(t){1e3===this.renderOrder&&t.clearDepth()}}}]),t}(),iI=function(){function t(e,n){ip(this,t),this.plugin=e,this.viewer=n,this.nodes={}}return ic(t,[{key:"destroy",value:function(){}},{key:"checkNode",value:function(t){var e,n;if(!t.id)throw new p.Il("No id given for node");if(!t.panorama)throw new p.Il("No panorama provided for node ".concat(t.id));if("position"in t&&(p.P6.logWarn('Use the "gps" property to configure the GPS position of a virtual node'),t.gps=t.position),this.plugin.isGps&&!((null===(e=t.gps)||void 0===e?void 0:e.length)>=2))throw new p.Il("No GPS position provided for node ".concat(t.id));if(!this.plugin.isGps&&null!==(n=t.markers)&&void 0!==n&&n.some(function(t){return t.gps&&!t.position}))throw new p.Il("Cannot use GPS positioning for markers in manual mode")}},{key:"checkLink",value:function(t,e){if(!e.nodeId)throw new p.Il("Link of node ".concat(t.id," has no target id"));if(Array.isArray(e.position)&&(p.P6.logWarn('Use the "gps" property to configure the GPS position of a virtual link'),e.gps=e.position,delete e.position),p.P6.isExtendedPosition(e)&&(p.P6.logWarn('Use the "position" property to configure the position of a virtual link'),e.position=this.viewer.dataHelper.cleanPosition(e)),!this.plugin.isGps&&!p.P6.isExtendedPosition(e.position))throw new p.Il("No position provided for link ".concat(e.nodeId," of node ").concat(t.id));if(this.plugin.isGps&&!e.gps)throw new p.Il("No GPS position provided for link ".concat(e.nodeId," of node ").concat(t.id))}}]),t}(),iz=function(t){ih(n,t);var e=id(n);function n(){return ip(this,n),e.apply(this,arguments)}return ic(n,[{key:"loadNode",value:function(t){return this.nodes[t]?Promise.resolve(this.nodes[t]):Promise.reject(new p.Il("Node ".concat(t," not found")))}},{key:"setNodes",value:function(t){var e=this;if(!(null!=t&&t.length))throw new p.Il("No nodes provided");var n={},i={};t.forEach(function(t){if(e.checkNode(t),n[t.id])throw new p.Il("Duplicate node ".concat(t.id));t.links||(p.P6.logWarn("Node ".concat(t.id," has no links")),t.links=[]),n[t.id]=t}),t.forEach(function(t){t.links.forEach(function(r){if(!n[r.nodeId])throw new p.Il("Target node ".concat(r.nodeId," of node ").concat(t.id," does not exists"));r.gps=r.gps||n[r.nodeId].gps,r.name=r.name||n[r.nodeId].name,e.checkLink(t,r),i[r.nodeId]=!0})}),t.forEach(function(t){i[t.id]||p.P6.logWarn("Node ".concat(t.id," is never linked to"))}),this.nodes=n}}]),n}(iI),iA=function(t){ih(n,t);var e=id(n);function n(t,i){var r;if(ip(this,n),r=e.call(this,t,i),!t.config.getNode)throw new p.Il("Missing getNode() option.");return r.nodeResolver=t.config.getNode,r}return ic(n,[{key:"loadNode",value:function(t){var e=this;return this.nodes[t]?Promise.resolve(this.nodes[t]):Promise.resolve(this.nodeResolver(t)).then(function(n){return e.checkNode(n),n.links||(p.P6.logWarn("Node ".concat(n.id," has no links")),n.links=[]),n.links.forEach(function(t){e.nodes[t.nodeId]&&(t.gps=t.gps||e.nodes[t.nodeId].gps,t.name=t.name||e.nodes[t.nodeId].name),e.checkLink(n,t)}),e.nodes[t]=n,n})}}]),n}(iI),iN=p.P6.getConfigParser({dataMode:"client",positionMode:"manual",renderMode:"3d",nodes:null,getNode:null,startNodeId:null,preload:!1,transitionOptions:{speed:"20rpm",fadeIn:!0,rotation:!0},rotateSpeed:null,transition:null,linksOnCompass:!0,markerStyle:{element:function(){var t=document.createElement("button");return t.className="psv-virtual-tour-link",t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">\n    <path fill-rule="even-odd" fill="currentColor" d="\n        M50,50 m45,0\n        a45,45 0 1,0 -90,0\n        a45,45 0 1,0  90,0\n\n        M50,50 m38,0\n        a38,38 0 0,1 -76,0\n        a38,38 0 0,1  76,0\n\n        M50,50 m30,0\n        a30,30 0 1,0 -60,0\n        a30,30 0 1,0  60,0\n        \n        M50,40 m2.5,-2.5\n        l17.5,17.5\n        a 2.5,2.5 0 0 1 -5,5\n        l-15,-15\n        l-15,15\n        a 2.5,2.5 0 0 1 -5,-5\n        l17.5,-17.5\n        a 3.5,3.5 0 0 1 5,0\n    "/>\n</svg>',t},size:{width:80,height:80}},arrowStyle:{color:"#aaaaaa",hoverColor:"#aa5500",outlineColor:"#000000",size:1},markerPitchOffset:-.1,arrowPosition:"bottom",map:null},{dataMode:function(t){if("client"!==t&&"server"!==t)throw new p.Il("VirtualTourPlugin: invalid dataMode");return t},positionMode:function(t){if("gps"!==t&&"manual"!==t)throw new p.Il("VirtualTourPlugin: invalid positionMode");return t},renderMode:function(t){if("3d"!==t&&"markers"!==t)throw new p.Il("VirtualTourPlugin: invalid renderMode");return t},markerStyle:function(t,e){var n=e.defValue;return null===t.html&&(t.element=null),ii(ii({},n),t)},arrowStyle:function(t,e){return ii(ii({},e.defValue),t)},map:function(t,e){var n=e.rawConfig;if(t){if("server"===n.dataMode)return p.P6.logWarn("VirtualTourPlugin: The map cannot be used in server side mode"),null;if(!t.imageUrl)return p.P6.logWarn('VirtualTourPlugin: configuring the map requires at least "imageUrl"'),null}return t},transitionOptions:function(t,e){var n=e.rawConfig;return"object"!==it(t)||(p.P6.isNil(n.transition)||(p.P6.logWarn('VirtualTourPlugin: "transition" option is deprecated, use "transitionOptions" instead'),"number"==typeof n.transition?t.speed=n.transition:!1!==n.transition||(t.fadeIn=!1)),p.P6.isNil(n.rotateSpeed)||(p.P6.logWarn('VirtualTourPlugin: "rotateSpeed" option is deprecated, use "transitionOptions" instead'),!1!==n.rotateSpeed||(t.rotation=!1))),t}}),iU=function(t){ih(r,t);var e,n,i=id(r);function r(t,e){var n;return ip(this,r),(n=i.call(this,t,e)).state={currentNode:null,currentTooltip:null,loadingNode:null,preload:{}},n.is3D&&(n.arrowsRenderer=new iR(n.viewer,ig(n))),n}return ic(r,[{key:"is3D",get:function(){return"3d"===this.config.renderMode}},{key:"isServerSide",get:function(){return"server"===this.config.dataMode}},{key:"isGps",get:function(){return"gps"===this.config.positionMode}},{key:"init",value:function(){var t,e=this;if(n7(iy(r.prototype),"init",this).call(this),p.P6.checkStylesheet(this.viewer.container,"virtual-tour-plugin"),this.markers=this.viewer.getPlugin("markers"),this.compass=this.viewer.getPlugin("compass"),this.gallery=this.viewer.getPlugin("gallery"),!this.is3D&&!this.markers)throw new p.Il("VirtualTour plugin requires the Markers plugin in markers mode.");null!==(t=this.markers)&&void 0!==t&&t.config.markers&&(p.P6.logWarn("No default markers can be configured on Markers plugin when using VirtualTour plugin. Consider defining `markers` on each tour node."),delete this.markers.config.markers),this.config.map&&(this.map=this.viewer.getPlugin("map"),this.map||p.P6.logWarn("The map is configured on the VirtualTourPlugin but the MapPlugin is not loaded.")),this.datasource=this.isServerSide?new iA(this,this.viewer):new iz(this,this.viewer),this.is3D?(this.viewer.observeObjects(iP),this.viewer.addEventListener(p.U3.PositionUpdatedEvent.type,this),this.viewer.addEventListener(p.U3.SizeUpdatedEvent.type,this),this.viewer.addEventListener(p.U3.ClickEvent.type,this),this.viewer.addEventListener(p.U3.ObjectEnterEvent.type,this),this.viewer.addEventListener(p.U3.ObjectHoverEvent.type,this),this.viewer.addEventListener(p.U3.ObjectLeaveEvent.type,this),this.viewer.addEventListener(p.U3.ReadyEvent.type,this,{once:!0}),this.viewer.renderer.setCustomRenderer(function(t){return e.arrowsRenderer.withRenderer(t)})):(this.markers.addEventListener("enter-marker",this),this.markers.addEventListener("select-marker",this)),this.map&&(this.map.addEventListener("select-hotspot",this),this.map.setImage(this.config.map.imageUrl)),this.isServerSide?this.config.startNodeId&&this.setCurrentNode(this.config.startNodeId):this.config.nodes&&(this.setNodes(this.config.nodes,this.config.startNodeId),delete this.config.nodes)}},{key:"destroy",value:function(){var t,e;this.markers&&(this.markers.removeEventListener("enter-marker",this),this.markers.removeEventListener("select-marker",this)),this.is3D&&this.viewer.renderer.setCustomRenderer(null),null===(t=this.map)||void 0===t||t.removeEventListener("select-hotspot",this),this.viewer.removeEventListener(p.U3.PositionUpdatedEvent.type,this),this.viewer.removeEventListener(p.U3.SizeUpdatedEvent.type,this),this.viewer.removeEventListener(p.U3.ClickEvent.type,this),this.viewer.removeEventListener(p.U3.ObjectEnterEvent.type,this),this.viewer.removeEventListener(p.U3.ObjectHoverEvent.type,this),this.viewer.removeEventListener(p.U3.ObjectLeaveEvent.type,this),this.viewer.removeEventListener(p.U3.ReadyEvent.type,this),this.viewer.unobserveObjects(iP),this.datasource.destroy(),null===(e=this.arrowsRenderer)||void 0===e||e.destroy(),delete this.datasource,delete this.markers,delete this.compass,delete this.gallery,delete this.arrowsRenderer,n7(iy(r.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){if(t instanceof p.U3.SizeUpdatedEvent||t instanceof p.U3.PositionUpdatedEvent||t instanceof p.U3.ReadyEvent)this.arrowsRenderer.updateCamera();else if(t instanceof p.U3.ClickEvent){var e,n=null===(e=t.data.objects.find(function(t){return t.userData[iP]}))||void 0===e?void 0:e.userData[iP];n&&this.setCurrentNode(n.nodeId,null,n)}else if("select-marker"===t.type){var i,r=null===(i=t.marker.data)||void 0===i?void 0:i[iP];r&&this.setCurrentNode(r.nodeId,null,r)}else if("enter-marker"===t.type){var o,a=t.marker,s=null===(o=a.data)||void 0===o?void 0:o[iP];s&&this.__onEnterMarker(a,s)}else if(t instanceof p.U3.ObjectEnterEvent)t.userDataKey===iP&&this.__onEnterObject(t.object,t.viewerPoint);else if(t instanceof p.U3.ObjectLeaveEvent)t.userDataKey===iP&&this.__onLeaveObject(t.object);else if(t instanceof p.U3.ObjectHoverEvent)t.userDataKey===iP&&this.__onHoverObject(t.viewerPoint);else if("select-hotspot"===t.type){var l=t.hotspotId;l.startsWith(i_)&&this.setCurrentNode(l.substring(i_.length))}}},{key:"setNodes",value:function(t,e){var n,i=this;if(this.isServerSide)throw new p.Il("Cannot set nodes in server side mode");this.datasource.setNodes(t),e?this.datasource.nodes[e]||(e=t[0].id,p.P6.logWarn("startNodeId not found is provided nodes, resetted to ".concat(e))):e=t[0].id,this.setCurrentNode(e),this.gallery&&this.gallery.setItems(t.map(function(t){return{id:t.id,panorama:t.panorama,name:t.name,thumbnail:t.thumbnail,options:{caption:t.caption,panoData:t.panoData,sphereCorrection:t.sphereCorrection,description:t.description}}}),function(t){i.setCurrentNode(t)}),this.map&&this.map.setHotspots(function(t){if(Array.isArray(t))return is(t)}(n=t.map(function(t){return ii(ii(ii({},t.map||{}),i.__getNodeMapPosition(t)),{},{id:i_+t.id,tooltip:t.name})}))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||ia(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}},{key:"setCurrentNode",value:function(t,e,n){var i,r=this;if(t===(null===(i=this.state.currentNode)||void 0===i?void 0:i.id))return Promise.resolve(!0);this.viewer.hideError(),this.state.loadingNode=t;var o=this.state.currentNode,a=o&&n?this.__getLinkPosition(o,n):null;return Promise.resolve(this.state.preload[t]).then(function(){if(r.state.loadingNode!==t)throw p.P6.getAbortError();return r.datasource.loadNode(t)}).then(function(i){if(r.state.loadingNode!==t)throw p.P6.getAbortError();var s=ii(ii({speed:iN.defaults.transitionOptions.speed,fadeIn:iN.defaults.transitionOptions.fadeIn,rotation:iN.defaults.transitionOptions.rotation,rotateTo:a},"function"==typeof r.config.transitionOptions?r.config.transitionOptions(i,o,n):r.config.transitionOptions),e);return s.rotation&&!s.fadeIn?r.viewer.animate(ii(ii({},s.rotateTo),{},{speed:s.speed})).then(function(){return[i,s]}):Promise.resolve([i,s])}).then(function(e){var n,i,o,a,s,l=io(e,2),c=l[0],u=l[1];if(r.state.loadingNode!==t)throw p.P6.getAbortError();return r.viewer.loader.show(),r.state.currentNode=c,r.state.currentTooltip&&(r.state.currentTooltip.hide(),r.state.currentTooltip=null),null===(n=r.arrowsRenderer)||void 0===n||n.clearArrows(),null!==(i=r.gallery)&&void 0!==i&&i.config.hideOnClick&&r.gallery.hide(),null===(o=r.markers)||void 0===o||o.clearMarkers(),null===(a=r.compass)||void 0===a||a.clearHotspots(),null===(s=r.map)||void 0===s||s.minimize(),r.viewer.setPanorama(c.panorama,{caption:c.caption,description:c.description,panoData:c.panoData,sphereCorrection:c.sphereCorrection,transition:!!u.fadeIn&&(!!u.rotation||"fade-only"),speed:u.speed,position:u.rotateTo,zoom:u.zoomTo}).then(function(t){if(!t)throw p.P6.getAbortError()})}).then(function(){if(r.state.loadingNode!==t)throw p.P6.getAbortError();var e=r.state.currentNode;if(r.map){var i=r.__getNodeMapPosition(e);r.map.setCenter(i)}return e.markers&&r.__addNodeMarkers(e),r.__renderLinks(e),r.__preload(e),r.state.loadingNode=null,r.dispatchEvent(new iw(e,{fromNode:o,fromLink:n,fromLinkPosition:a})),!0}).catch(function(t){if(p.P6.isAbortError(t))return!1;throw r.viewer.showError(r.viewer.config.lang.loadError),r.viewer.loader.hide(),r.viewer.navbar.setCaption(""),r.state.loadingNode=null,t})}},{key:"__renderLinks",value:function(t){var e=this,n=[],i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o={};this.isGps&&t.links.forEach(function(e){var n,a,s=(n=t.gps,a=e.gps,iL(ij(n),ij(a)));o[e.nodeId]=s,i=Math.min(s,i),r=Math.max(s,r)}),t.links.forEach(function(a){var s=e.__getLinkPosition(t,a);if(s.yaw+=null!==(l=null===(c=a.linkOffset)||void 0===c?void 0:c.yaw)&&void 0!==l?l:0,s.pitch+=null!==(u=null===(h=a.linkOffset)||void 0===h?void 0:h.pitch)&&void 0!==u?u:0,n.push(s),e.is3D){var l,c,u,h,v,d=1;p.P6.isNil(null===(v=a.linkOffset)||void 0===v?void 0:v.depth)?e.isGps&&i!==r&&(d=f.M8C.mapLinear(o[a.nodeId],i,r,.5,1.5)):d=a.linkOffset.depth,e.arrowsRenderer.addArrow(a,s,d)}else{e.isGps&&(s.pitch+=e.config.markerPitchOffset);var g=ii(ii(ii({},e.config.markerStyle),a.markerStyle),{},{tooltip:{className:"psv-virtual-tour-tooltip",content:a.name?"<h3>".concat(a.name,"</h3>"):null},position:s,id:i_+a.nodeId,visible:!0,hideList:!0,data:ir({},iP,a)});"function"==typeof g.element&&(g.element=g.element(a)),e.markers.addMarker(g,!1)}}),this.is3D?this.viewer.needsUpdate():this.markers.renderMarkers(),this.config.linksOnCompass&&this.compass&&this.compass.setHotspots(n)}},{key:"__getLinkPosition",value:function(t,e){return this.isGps?iT(t.gps,e.gps):this.viewer.dataHelper.cleanPosition(e.position)}},{key:"__getTooltipContent",value:(e=n8().mark(function t(e){var n,i;return n8().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.datasource.loadNode(e);case 2:return n=t.sent,i=[],(n.name||n.thumbnail||n.caption)&&(n.name&&i.push("<h3>".concat(n.name,"</h3>")),n.thumbnail&&i.push('<img src="'.concat(n.thumbnail,'">')),n.caption&&i.push("<p>".concat(n.caption,"</p>"))),t.abrupt("return",i.join(""));case 6:case"end":return t.stop()}},t,this)}),n=function(){var t=this,n=arguments;return new Promise(function(i,r){var o=e.apply(t,n);function a(t){n9(o,i,r,a,s,"next",t)}function s(t){n9(o,i,r,a,s,"throw",t)}a(void 0)})},function(t){return n.apply(this,arguments)})},{key:"__onEnterMarker",value:function(t,e){var n=this;this.__getTooltipContent(e.nodeId).then(function(e){e&&n.markers.updateMarker({id:t.id,tooltip:{className:"psv-virtual-tour-tooltip",content:e}})})}},{key:"__onEnterObject",value:function(t,e){var n,i,r=this,o=t.userData[iP];iM(t,(null===(n=o.arrowStyle)||void 0===n?void 0:n.hoverColor)||this.config.arrowStyle.hoverColor),this.__getTooltipContent(o.nodeId).then(function(t){t&&(r.state.currentTooltip=r.viewer.createTooltip({left:e.x,top:e.y,box:{width:20,height:20},className:"psv-virtual-tour-tooltip",content:t}))}),null===(i=this.map)||void 0===i||i.setActiveHotspot(i_+o.nodeId),this.viewer.needsUpdate(),this.viewer.setCursor("pointer")}},{key:"__onHoverObject",value:function(t){this.state.currentTooltip&&this.state.currentTooltip.move({left:t.x,top:t.y})}},{key:"__onLeaveObject",value:function(t){var e,n,i=t.userData[iP];iM(t,(null===(e=i.arrowStyle)||void 0===e?void 0:e.color)||this.config.arrowStyle.color),this.state.currentTooltip&&(this.state.currentTooltip.hide(),this.state.currentTooltip=null),null===(n=this.map)||void 0===n||n.setActiveHotspot(null),this.viewer.needsUpdate(),this.viewer.setCursor(null)}},{key:"__preload",value:function(t){var e=this;this.config.preload&&(this.state.preload[t.id]=!0,this.state.currentNode.links.filter(function(t){return!e.state.preload[t.nodeId]}).filter(function(t){return"function"!=typeof e.config.preload||e.config.preload(e.state.currentNode,t)}).forEach(function(t){e.state.preload[t.nodeId]=e.datasource.loadNode(t.nodeId).then(function(t){return e.viewer.textureLoader.preloadPanorama(t.panorama)}).then(function(){e.state.preload[t.nodeId]=!0}).catch(function(){delete e.state.preload[t.nodeId]})}))}},{key:"__addNodeMarkers",value:function(t){var e=this;this.markers?this.markers.setMarkers(t.markers.map(function(n){if(n.gps&&e.isGps){var i;n.position=iT(t.gps,n.gps),null!==(i=n.data)&&void 0!==i&&i.map&&e.map&&Object.assign(n.data.map,e.__getGpsMapPosition(n.gps))}return n})):p.P6.logWarn("Node ".concat(t.id," markers ignored because the plugin is not loaded."))}},{key:"__getNodeMapPosition",value:function(t){return this.__getGpsMapPosition(t.gps)||(t.map?{x:t.map.x,y:t.map.y}:null)}},{key:"__getGpsMapPosition",value:function(t){var e=this.config.map;return this.isGps&&e.extent&&e.size?{x:f.M8C.mapLinear(t[0],e.extent[0],e.extent[2],0,e.size.width),y:f.M8C.mapLinear(t[1],e.extent[1],e.extent[3],0,e.size.height)}:null}}]),r}(p.Yc);function iH(t){return(iH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iB(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==iH(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==iH(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===iH(e)?e:String(e)}(i.key),i)}}function iD(){return(iD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iY(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function iV(t,e){return(iV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iY(t){return(iY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}iU.id="virtual-tour",iU.configParser=iN,iU.readonlyOptions=Object.keys(iN.defaults);var iG=p.P6.getConfigParser({verticalRange:null,horizontalRange:null,usePanoData:!1}),iW=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iV(t,e)}(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=iY(o);if(e){var i=iY(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===iH(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(t,e){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,o),r.call(this,t,e)}return n=[{key:"init",value:function(){iD(iY(o.prototype),"init",this).call(this),this.autorotate=this.viewer.getPlugin("autorotate"),this.viewer.addEventListener(p.U3.PanoramaLoadedEvent.type,this),this.viewer.addEventListener(p.U3.PositionUpdatedEvent.type,this),this.viewer.addEventListener(p.U3.ZoomUpdatedEvent.type,this),this.viewer.addEventListener(p.U3.BeforeAnimateEvent.type,this),this.viewer.addEventListener(p.U3.BeforeRotateEvent.type,this),this.setVerticalRange(this.config.verticalRange),this.setHorizontalRange(this.config.horizontalRange)}},{key:"destroy",value:function(){this.viewer.removeEventListener(p.U3.PanoramaLoadedEvent.type,this),this.viewer.removeEventListener(p.U3.PositionUpdatedEvent.type,this),this.viewer.removeEventListener(p.U3.ZoomUpdatedEvent.type,this),this.viewer.removeEventListener(p.U3.BeforeAnimateEvent.type,this),this.viewer.removeEventListener(p.U3.BeforeRotateEvent.type,this),iD(iY(o.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){switch(t.type){case p.U3.PanoramaLoadedEvent.type:this.config.usePanoData?this.setRangesFromPanoData():this.__moveToRange();break;case p.U3.BeforeRotateEvent.type:case p.U3.BeforeAnimateEvent.type:var e=this.__applyRanges(t.position,t.zoomLevel),n=e.rangedPosition,i=e.sidesReached;(t.position||Object.keys(i).length)&&(t.position=n);break;case p.U3.PositionUpdatedEvent.type:var r,o=t.position,a=this.__applyRanges(o),s=a.sidesReached,l=a.rangedPosition;(s.left||s.right)&&null!==(r=this.autorotate)&&void 0!==r&&r.isEnabled()?this.__reverseAutorotate(s.left,s.right):(Math.abs(o.yaw-l.yaw)>1e-6||Math.abs(o.pitch-l.pitch)>1e-6)&&this.viewer.dynamics.position.setValue(l);break;case p.U3.ZoomUpdatedEvent.type:var c=this.viewer.getPosition(),u=this.__applyRanges(c).rangedPosition;(Math.abs(c.yaw-u.yaw)>1e-6||Math.abs(c.pitch-u.pitch)>1e-6)&&this.viewer.dynamics.position.setValue(u)}}},{key:"setVerticalRange",value:function(t){t&&2!==t.length&&(p.P6.logWarn("vertical range must have exactly two elements"),t=null),t?(this.config.verticalRange=t.map(function(t){return p.P6.parseAngle(t,!0)}),this.config.verticalRange[0]>this.config.verticalRange[1]&&(p.P6.logWarn("vertical range values must be ordered"),this.config.verticalRange=[this.config.verticalRange[1],this.config.verticalRange[0]]),this.viewer.state.ready&&this.__moveToRange()):this.config.verticalRange=null}},{key:"setHorizontalRange",value:function(t){t&&2!==t.length&&(p.P6.logWarn("horizontal range must have exactly two elements"),t=null),t?(this.config.horizontalRange=t.map(function(t){return p.P6.parseAngle(t)}),this.viewer.state.ready&&this.__moveToRange()):this.config.horizontalRange=null}},{key:"setRangesFromPanoData",value:function(){this.setVerticalRange(this.__getPanoVerticalRange()),this.setHorizontalRange(this.__getPanoHorizontalRange())}},{key:"__getPanoVerticalRange",value:function(){var t=this.viewer.state.panoData;if(t.croppedHeight===t.fullHeight)return null;var e=function(e){return Math.PI*(1-e/t.fullHeight)-Math.PI/2};return[e(t.croppedY+t.croppedHeight),e(t.croppedY)]}},{key:"__getPanoHorizontalRange",value:function(){var t=this.viewer.state.panoData;if(t.croppedWidth===t.fullWidth)return null;var e=function(e){return 2*Math.PI*(e/t.fullWidth)-Math.PI};return[e(t.croppedX),e(t.croppedX+t.croppedWidth)]}},{key:"__moveToRange",value:function(){this.viewer.rotate(this.viewer.getPosition())}},{key:"__applyRanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewer.getPosition(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.viewer.getZoomLevel(),n={yaw:t.yaw,pitch:t.pitch},i={},r=this.viewer.dataHelper.zoomLevelToFov(e),o=this.viewer.dataHelper.vFovToHFov(r);if(this.config.horizontalRange){var a=p.P6.clone(this.config.horizontalRange),s=a[0]>a[1]?a[1]+(2*Math.PI-a[0]):a[1]-a[0];if(s<=f.M8C.degToRad(o))a[0]=p.P6.parseAngle(a[0]+s/2),a[1]=a[0];else{var l=f.M8C.degToRad(o)/2;a[0]=p.P6.parseAngle(a[0]+l),a[1]=p.P6.parseAngle(a[1]-l)}a[0]>a[1]?t.yaw>a[1]&&t.yaw<a[0]&&(t.yaw>a[0]/2+a[1]/2?(n.yaw=a[0],i.left=!0):(n.yaw=a[1],i.right=!0)):t.yaw<a[0]?(n.yaw=a[0],i.left=!0):t.yaw>a[1]&&(n.yaw=a[1],i.right=!0)}if(this.config.verticalRange){var c=p.P6.clone(this.config.verticalRange),u=c[1]-c[0];if(u<=f.M8C.degToRad(r))c[0]=p.P6.parseAngle(c[0]+u/2,!0),c[1]=c[0];else{var h=f.M8C.degToRad(r)/2;c[0]=p.P6.parseAngle(c[0]+h,!0),c[1]=p.P6.parseAngle(c[1]-h,!0)}t.pitch<c[0]?(n.pitch=c[0],i.bottom=!0):t.pitch>c[1]&&(n.pitch=c[1],i.top=!0)}return{rangedPosition:n,sidesReached:i}}},{key:"__reverseAutorotate",value:function(t,e){t&&this.autorotate.config.autorotateSpeed>0||e&&this.autorotate.config.autorotateSpeed<0||this.autorotate.reverse()}}],iB(o.prototype,n),i&&iB(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(p.Yc);function iq(t){return(iq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function iF(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?iX(Object(n),!0).forEach(function(e){var i,r;i=e,r=n[e],(i=i2(i))in t?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iX(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function iK(t){return function(t){if(Array.isArray(t))return iQ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||iJ(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iZ(){return(iZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i9(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function i$(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(t,e)||iJ(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iJ(t,e){if(t){if("string"==typeof t)return iQ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iQ(t,e)}}function iQ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function i0(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i2(i.key),i)}}function i1(t,e,n){return e&&i0(t.prototype,e),n&&i0(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i2(t){var e=function(t,e){if("object"!==iq(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==iq(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===iq(e)?e:String(e)}function i3(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function i5(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i4(t,e)}function i4(t,e){return(i4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i6(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=i9(t);if(e){var r=i9(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===iq(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return i8(t)}(this,n)}}function i8(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i9(t){return(i9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}iW.id="visible-range",iW.configParser=iG,iW.readonlyOptions=["horizontalRange","verticalRange"];/*!
 * PhotoSphereViewer.MapPlugin 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var i7=Object.defineProperty;!function(t,e){for(var n in e)i7(t,n,{get:e[n],enumerable:!0})}({},{SelectHotspot:function(){return re}});var rt=function(t){i5(n,t);var e=i6(n);function n(t){var i;return i3(this,n),(i=e.call(this,n.type)).hotspotId=t,i}return i1(n)}(p.$N);rt.type="select-hotspot";var re=rt,rn="__marker__";function ri(t,e,n){return{x:(Math.cos(-e)*t.x-Math.sin(-e)*t.y)*n,y:(Math.sin(-e)*t.x+Math.cos(-e)*t.y)*n}}function rr(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"black";t.shadowOffsetX=e*p.we.pixelRatio,t.shadowOffsetY=n*p.we.pixelRatio,t.shadowBlur=i*p.we.pixelRatio,t.shadowColor=r}function ro(t,e,n){var i=e.width,r=e.height;ra(t,e,-n/2,-(r/i*n)/2,n,r/i*n)}function ra(t,e,n,i,r,o){t.drawImage(e,0,0,e.width,e.height,n*p.we.pixelRatio,i*p.we.pixelRatio,r*p.we.pixelRatio,o*p.we.pixelRatio)}var rs={top:"bottom",bottom:"top",left:"right",right:"left"},rl=function(t){i5(n,t);var e=i6(n);function n(t,i){var r;return i3(this,n),(r=e.call(this,t,{})).map=t,r.position=i,r}return i1(n,[{key:"applyConfig",value:function(){this.container.className="psv-map__button psv-map__button--".concat((function(t,e){switch(e){case 1:return[rs[t[0]],rs[t[1]]];case 2:return[t[0],rs[t[1]]];case 3:return[rs[t[0]],t[1]];default:return t}})(this.map.config.position,this.position).join("-")),this.update()}},{key:"update",value:function(){}}]),n}(p.k8),rc=function(t){i5(n,t);var e=i6(n);function n(t){var i;return i3(this,n),(i=e.call(this,t,0)).container.addEventListener("click",function(e){t.toggleCollapse(),e.stopPropagation()}),i}return i1(n,[{key:"applyConfig",value:function(){iZ(i9(n.prototype),"applyConfig",this).call(this),this.container.classList.add("psv-map__button-close")}},{key:"update",value:function(){this.container.innerHTML=this.map.collapsed?'<svg viewBox="114 45 472 472" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M383.6 196a67.3 67.3 0 1 0-134.5.1 67.3 67.3 0 0 0 134.5-.1zm-100.8 0a33.6 33.6 0 1 1 67.3 0 33.6 33.6 0 0 1-67.3 0z"/><path d="M584 340.8a16.8 16.8 0 0 0-15.6-10.4H403.8c25.2-40.2 47-88 47-133.4A135 135 0 0 0 316.4 61.6 135 135 0 0 0 182 197c0 55.8 33 115.3 64.7 159.8L120.4 469a16.8 16.8 0 0 0 11.2 29.4H434c4.5 0 8.7-1.8 11.9-5l134.4-134.3c4.8-4.8 6.2-12 3.6-18.3zM215.5 197c0-56.1 45.2-101.8 100.8-101.8 55.6 0 100.8 45.6 100.8 101.8 0 65-57.1 144.2-100.8 192.8C273 341.7 215.6 262.3 215.6 197zM427 464.8H175.8l91.3-81.1a575.6 575.6 0 0 0 37.4 42.6 16.8 16.8 0 0 0 23.8 0c2.2-2.2 26.3-26.7 52.6-62.3h147z"/></g><!-- Created by Ayub Irawan from Noun Project --></svg>':p.tl.ICONS.close,this.container.title=this.map.collapsed?this.viewer.config.lang.map:this.viewer.config.lang.close}}]),n}(rl),ru=function(t){i5(n,t);var e=i6(n);function n(t){var i;return i3(this,n),(i=e.call(this,t,3)).container.title=i.viewer.config.lang.mapNorth,i.container.innerHTML='<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M50,0L70,50L50,100L30,50Z M50,86L64,50L36,50Z" fill="currentColor"/></svg>',i.container.querySelector("svg").style.width="80%",i.container.addEventListener("click",function(e){i.viewer.dynamics.position.goto({yaw:-t.config.rotation},2),e.stopPropagation()}),i}return i1(n,[{key:"rotate",value:function(t){this.container.querySelector("svg").style.transform="rotate3d(0, 0, 1, ".concat(-t,"rad)")}}]),n}(rl),rp={"bottom-left":0,"bottom-right":-90,"top-right":180,"top-left":90},rh=function(t){i5(n,t);var e=i6(n);function n(t){var i;return i3(this,n),(i=e.call(this,t,1)).container.addEventListener("click",function(e){t.toggleMaximized(),e.stopPropagation()}),i}return i1(n,[{key:"update",value:function(){this.container.innerHTML=this.map.maximized?'<svg viewBox="95 25 510 510" xmlns="http://www.w3.org/2000/svg"><path d="M109.8 25.8h481c7.8 0 14 6.1 14 14v481c0 7.8-6.2 14-14 14H358.4c-7.8 0-14-6.2-14-14s6.2-14 14-14h217.8v-453H123.8v216.7c0 7.8-6.2 14-14 14-7.9 0-14-6.2-14-14V39.8c0-7.9 6.1-14 14-14zm176.4 508.4H109.8c-7.9 0-14-6.1-14-14V343.8c0-7.8 6.1-14 14-14h176.4c7.8 0 14 6.2 14 14v176.4c0 7.9-6.8 14-14 14zm-14-176.4H123.8v148.4h148.4zm64.4-191.5c-7.9 0-14 6.2-14 14v113.1c0 7.9 6.1 14 14 14h113c8 0 14-6.1 14-14s-6-14-14-14h-79.4l141-141a13.5 13.5 0 0 0 0-19.7 13.5 13.5 0 0 0-19.5 0L350.6 259.8v-79.5c0-7.8-6.2-14-14-14z" fill="currentColor"/><!-- Created by Gregor Cresnar from Noun Project --></svg>':'<svg viewBox="95 25 510 510" xmlns="http://www.w3.org/2000/svg"><path d="M604.2 39.8v481c0 7.8-6.1 14-14 14H358.4c-7.8 0-14-6.2-14-14s6.2-14 14-14h217.8v-453H123.8v216.7c0 7.8-6.2 14-14 14-7.9 0-14-6.2-14-14V39.8c0-7.9 6.1-14 14-14h481c7.3 0 13.4 6.1 13.4 14zm-304 304v176.4c0 7.9-6.2 14-14 14H109.8c-7.9 0-14-6.1-14-14V343.8c0-7.8 6.1-14 14-14h176.4c7.2 0 14 6.8 14 14zm-28 14H123.8v148.4h148.4zm215.6-195.4v79.5c0 7.9 6.1 14 14 14 7.8 0 14-6.1 14-14V128.2c0-7.8-6.2-14-14-14H388.6c-7.8 0-14 6.2-14 14 0 7.9 6.2 14 14 14h79L326.5 283.4a13.5 13.5 0 0 0 0 19.6c2.8 2.8 6.1 3.9 10 3.9 4 0 7.3-1.1 10.1-4z" fill="currentColor"/><!-- Created by Gregor Cresnar from Noun Project --></svg>',this.container.querySelector("svg").style.transform="rotate3d(0, 0, 1, ".concat(rp[this.map.config.position.join("-")],"deg)"),this.container.title=this.map.maximized?this.viewer.config.lang.mapMinimize:this.viewer.config.lang.mapMaximize}}]),n}(rl),rf=function(t){i5(n,t);var e=i6(n);function n(t){var i;return i3(this,n),(i=e.call(this,t,2)).container.title=i.viewer.config.lang.mapReset,i.container.innerHTML='<svg viewBox="170 100 360 360" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M518.6 269h-18.5a150.8 150.8 0 0 0-138-137.9v-20.9c0-5.8-4.7-10.6-10.5-10.6h-3.2c-5.8 0-10.6 4.8-10.6 10.6v21A150.8 150.8 0 0 0 200 269h-18.5c-5.9 0-10.6 4.7-10.6 10.6v3.2c0 5.8 4.7 10.5 10.6 10.5h18.5c6 73.4 64.6 132 138 138v18.5c0 5.8 4.7 10.6 10.5 10.6h3.2c5.8 0 10.6-4.8 10.6-10.6v-18.6c73.3-5.9 132-64.5 137.9-137.9h18.5c5.9 0 10.6-4.7 10.6-10.5v-3.2c0-5.9-4.7-10.6-10.6-10.6zM362.2 414.4v-9.8c0-5.9-4.8-10.6-10.6-10.6h-3.2c-5.8 0-10.6 4.7-10.6 10.6v9.8a134 134 0 0 1-121-121h9.8c5.9 0 10.6-4.8 10.6-10.6v-3.2c0-5.9-4.7-10.6-10.6-10.6h-9.8a134 134 0 0 1 121-121v7.5c0 5.8 4.8 10.5 10.6 10.5h3.2c5.8 0 10.6-4.7 10.6-10.5V148a134 134 0 0 1 121 121h-9.8c-5.9 0-10.6 4.7-10.6 10.6v3.2c0 5.8 4.7 10.5 10.6 10.5h9.8a134 134 0 0 1-121 121z"/><path d="M355.4 222a6 6 0 0 0-10.7 0L291 320a8.3 8.3 0 0 0 9.7 12l39.2-11.7c6.6-2 13.6-2 20.2 0l39.2 11.7a8.3 8.3 0 0 0 9.7-12z"/></g><!-- Created by muhammad benani from Noun Project --></svg>',i.container.querySelector("svg").style.width="80%",i.container.addEventListener("click",function(e){t.reset(),e.stopPropagation()}),i}return i1(n)}(rl),rv=function(t){i5(n,t);var e=i6(n);function n(t){i3(this,n),(i=e.call(this,t,{className:"psv-map__toolbar"})).map=t,i.handler=new p.P6.PressHandler(100),i.container.innerHTML="".concat('<svg viewBox="128 58 444 444" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M350 58.2a221.8 221.8 0 1 0 0 443.6 221.8 221.8 0 0 0 0-443.6zm130.3 252.7H219.7a31 31 0 1 1 0-61.8h260.6a31 31 0 1 1 0 61.8z"/><!-- Created by Iconika from Noun Project --></svg>','<span class="psv-map__toolbar-text">100%</span>').concat('<svg viewBox="143.8 73.8 412.5 412.5" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M350 73.8a206.2 206.2 0 1 0 0 412.4 206.2 206.2 0 0 0 0-412.4zm117.3 234H378v89.5a27.9 27.9 0 1 1-55.8 0V308h-89.4a27.9 27.9 0 1 1 0-55.8H322v-89.5a27.9 27.9 0 1 1 55.8 0v89.5h89.5a27.9 27.9 0 1 1 0 55.8z"/><!-- Created by Iconika from Noun Project --></svg>'),i.zoomIndicator=i.container.querySelector(".psv-map__toolbar-text");var i,r=i.container.querySelectorAll("svg");return r[0].dataset.delta="-1",r[1].dataset.delta="1",i.container.addEventListener("mousedown",i8(i)),window.addEventListener("mouseup",i8(i)),i.container.addEventListener("touchstart",i8(i)),window.addEventListener("touchend",i8(i)),i}return i1(n,[{key:"destroy",value:function(){window.removeEventListener("mouseup",this),window.removeEventListener("touchend",this),iZ(i9(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){var e=this;switch(t.type){case"mousedown":case"touchstart":var n=p.P6.getClosest(t.target,"svg"),i=null==n?void 0:n.dataset.delta;i&&(cancelAnimationFrame(this.animation),this.handler.down(),this.time=performance.now(),this.animateZoom(parseInt(i,10)),t.preventDefault(),t.stopPropagation());break;case"mouseup":case"touchend":this.animation&&(this.handler.up(function(){cancelAnimationFrame(e.animation),e.animation=null}),t.preventDefault(),t.stopPropagation())}}},{key:"setText",value:function(t){this.zoomIndicator.innerText="".concat(Math.round(100*Math.exp(t)),"%")}},{key:"animateZoom",value:function(t){var e=this;this.animation=requestAnimationFrame(function(n){e.map.zoom(t*(n-e.time)/1e3),e.time=n,e.animateZoom(t)})}}]),n}(p.k8),rd=function(t){i5(n,t);var e=i6(n);function n(t,i){i3(this,n),(r=e.call(this,t,{className:"psv-map ".concat(p.tl.CAPTURE_EVENTS_CLASS)})).plugin=i,r.state={visible:!1,maximized:!1,collapsed:!1,imgScale:1,zoom:r.config.defaultZoom,offset:{x:0,y:0},mouseX:null,mouseY:null,mousedown:!1,pinchDist:0,pinchAngle:0,hotspotPos:{},hotspotId:null,hotspotTooltip:null,markers:[],forceRender:!1,needsUpdate:!1,renderLoop:null,images:{}};var r,o=document.createElement("div");return o.className="psv-map__container",o.addEventListener("mousedown",i8(r)),window.addEventListener("mousemove",i8(r)),window.addEventListener("mouseup",i8(r)),o.addEventListener("touchstart",i8(r)),window.addEventListener("touchmove",i8(r)),window.addEventListener("touchend",i8(r)),o.addEventListener("wheel",i8(r)),t.addEventListener(p.U3.KeypressEvent.type,i8(r)),r.canvas=document.createElement("canvas"),r.__setCursor("move"),o.appendChild(r.canvas),r.overlay=document.createElement("div"),r.overlay.className="psv-map__overlay",o.appendChild(r.overlay),r.container.appendChild(o),r.container.addEventListener("transitionstart",i8(r)),r.container.addEventListener("transitionend",i8(r)),r.config.buttons.reset&&(r.resetButton=new rf(i8(r))),r.config.buttons.maximize&&(r.maximizeButton=new rh(i8(r))),r.config.buttons.close&&(r.closeButton=new rc(i8(r))),r.config.buttons.north&&(r.compassButton=new ru(i8(r))),r.zoomToolbar=new rv(i8(r)),!function t(){r.isVisible()&&(r.state.needsUpdate||r.state.forceRender)&&(r.render(),r.state.needsUpdate=!1),r.state.renderLoop=requestAnimationFrame(t)}(),r.applyConfig(),r.hide(),r.config.visibleOnLoad||r.toggleCollapse(),r}return i1(n,[{key:"config",get:function(){return this.plugin.config}},{key:"maximized",get:function(){return this.state.maximized}},{key:"collapsed",get:function(){return this.state.collapsed}},{key:"destroy",value:function(){window.removeEventListener("touchmove",this),window.removeEventListener("mousemove",this),window.removeEventListener("touchend",this),window.removeEventListener("mouseup",this),this.viewer.removeEventListener(p.U3.KeypressEvent.type,this),cancelAnimationFrame(this.state.renderLoop),iZ(i9(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){if(!p.P6.getClosest(t.target,".".concat(p.tl.CAPTURE_EVENTS_CLASS,":not(.psv-map)")))switch(t.type){case p.U3.KeypressEvent.type:this.state.maximized&&(this.__onKeyPress(t.key),t.preventDefault());break;case"mousedown":this.state.mouseX=t.clientX,this.state.mouseY=t.clientY,this.state.mousedown=!0,t.stopPropagation();break;case"touchstart":if(1===t.touches.length)this.state.mouseX=t.touches[0].clientX,this.state.mouseY=t.touches[0].clientY,this.state.mousedown=!0;else if(2===t.touches.length){var e=p.P6.getTouchData(t);this.state.pinchDist=e.distance,this.state.pinchAngle=e.angle;var n=e.center;this.state.mouseX=n.x,this.state.mouseY=n.y}t.stopPropagation(),t.preventDefault();break;case"mousemove":this.state.mousedown?(this.__move(t.clientX,t.clientY),t.stopPropagation()):t.target===this.canvas&&this.__handleHotspots(t.clientX,t.clientY);break;case"touchmove":if(this.state.mousedown&&1===t.touches.length)this.__move(t.touches[0].clientX,t.touches[0].clientY),t.stopPropagation();else if(this.state.mousedown&&2===t.touches.length){var i=p.P6.getTouchData(t),r=(i.distance-this.state.pinchDist)/p.we.pixelRatio;this.zoom(r/100),this.__move(i.center.x,i.center.y),this.state.maximized&&!this.config.static&&this.viewer.dynamics.position.step({yaw:this.state.pinchAngle-i.angle},0),this.state.pinchDist=i.distance,this.state.pinchAngle=i.angle,t.stopPropagation()}break;case"mouseup":case"touchend":var o,a=(null===(o=t.changedTouches)||void 0===o?void 0:o[0])||t;this.state.mousedown&&(this.state.mousedown=!1,t.stopPropagation()),t.target===this.canvas&&this.__clickHotspot(a.clientX,a.clientY);break;case"wheel":var s=t.deltaY/Math.abs(t.deltaY);t.ctrlKey?this.viewer.dynamics.position.step({yaw:s/10}):this.zoom(-s/10),t.stopPropagation(),t.preventDefault();break;case"transitionstart":this.state.forceRender=!0;break;case"transitionend":this.state.maximized||(this.overlay.style.display="",this.recenter()),this.state.forceRender=!1,this.update()}}},{key:"applyConfig",value:function(){var t,e,n,i,r,o;this.container.classList.remove("psv-map--top-right","psv-map--top-left","psv-map--bottom-right","psv-map--bottom-left"),this.container.classList.add("psv-map--".concat(this.config.position.join("-"))),this.container.style.width=this.config.size,this.container.style.height=this.config.size,this.overlay.innerHTML=(o=this.config.overlayImage)?o.includes("<svg")?o:'<img src="'.concat(o,'">'):"",null===(t=this.resetButton)||void 0===t||t.applyConfig(),null===(e=this.closeButton)||void 0===e||e.applyConfig(),null===(n=this.compassButton)||void 0===n||n.applyConfig(),null===(i=this.maximizeButton)||void 0===i||i.applyConfig(),this.config.static&&(null===(r=this.compassButton)||void 0===r||r.rotate(0),this.overlay.style.transform=""),this.update()}},{key:"isVisible",value:function(){return this.state.visible&&!this.state.collapsed}},{key:"show",value:function(){iZ(i9(n.prototype),"show",this).call(this),this.update(),this.state.maximized||(this.overlay.style.display="")}},{key:"hide",value:function(){iZ(i9(n.prototype),"hide",this).call(this),this.state.forceRender=!1}},{key:"update",value:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.state.needsUpdate=!0,t&&(this.state.hotspotPos={},this.__resetHotspot())}},{key:"reload",value:function(t){delete this.state.images[this.config.imageUrl],this.config.imageUrl=t,this.state.imgScale=1,this.__loadImage(this.config.imageUrl,!0),this.recenter()}},{key:"reset",value:function(){this.state.zoom=this.config.defaultZoom,this.recenter()}},{key:"recenter",value:function(){this.state.offset.x=0,this.state.offset.y=0,this.update()}},{key:"toggleCollapse",value:function(){var t;this.state.maximized&&this.toggleMaximized(),this.state.collapsed=!this.state.collapsed,p.P6.toggleClass(this.container,"psv-map--collapsed",this.state.collapsed),this.state.collapsed||this.reset(),null===(t=this.closeButton)||void 0===t||t.update()}},{key:"toggleMaximized",value:function(){var t;this.state.collapsed||(this.state.maximized=!this.state.maximized,p.P6.toggleClass(this.container,"psv-map--maximized",this.state.maximized),this.state.maximized&&(this.overlay.style.display="none"),null===(t=this.maximizeButton)||void 0===t||t.update())}},{key:"zoom",value:function(t){this.state.zoom=f.M8C.clamp(this.state.zoom+t,this.config.minZoom,this.config.maxZoom),this.update()}},{key:"setMarkers",value:function(t){this.state.markers=t,this.update()}},{key:"setActiveHotspot",value:function(t){this.state.hotspotId=t,this.update(!1)}},{key:"render",value:function(){var t,e=this;if(this.config.center){var n=this.__loadImage(this.config.imageUrl);if(n){var i=this.viewer.getPosition().yaw,r=Math.exp(this.state.zoom)/this.state.imgScale,o={x:this.config.center.x*this.state.imgScale,y:this.config.center.y*this.state.imgScale},a={x:this.state.offset.x*this.state.imgScale,y:this.state.offset.y*this.state.imgScale},s=this.config.rotation,l=this.config.static?0:i+s;this.config.static||(this.overlay.style.transform="rotate(".concat(-l,"rad)"),null===(t=this.compassButton)||void 0===t||t.rotate(l)),this.zoomToolbar.setText(this.state.zoom),this.canvas.width=this.container.clientWidth*p.we.pixelRatio,this.canvas.height=this.container.clientHeight*p.we.pixelRatio;var c=p.P6.getPosition(this.canvas),u=this.canvas.width,h=this.canvas.height,v=u/2/p.we.pixelRatio,d=h/2/p.we.pixelRatio,g=this.canvas.getContext("2d");g.clearRect(0,0,u,h);var y=n.width,m=n.height;g.save(),g.translate(u/2,h/2),g.rotate(-l),g.scale(r,r),rr(g,0,0,10),ra(g,n,-o.x-a.x,-o.y-a.y,y,m),g.restore(),[].concat(iK(this.config.hotspots),iK(this.state.markers)).forEach(function(t){var n,i,u,h,f,y,m,b,w,k,E,P,_,x,S,O=e.state.hotspotId===t.id,M=(n=e.config.spotStyle,{image:O?null!==(i=null!==(u=null!==(h=t.hoverImage)&&void 0!==h?h:t.image)&&void 0!==u?u:n.hoverImage)&&void 0!==i?i:n.image:null!==(f=t.image)&&void 0!==f?f:n.image,size:O?null!==(y=null!==(m=null!==(b=t.hoverSize)&&void 0!==b?b:t.size)&&void 0!==m?m:n.hoverSize)&&void 0!==y?y:n.size:null!==(w=t.size)&&void 0!==w?w:n.size,color:O?null!==(k=null!==(E=null!==(P=t.hoverColor)&&void 0!==P?P:t.color)&&void 0!==E?E:n.hoverColor)&&void 0!==k?k:n.color:null!==(_=t.color)&&void 0!==_?_:n.color,borderColor:O?null!==(x=t.hoverBorderColor)&&void 0!==x?x:n.hoverBorderColor:null,borderSize:O?null!==(S=t.hoverBorderSize)&&void 0!==S?S:n.hoverBorderSize:null}),T=e.__loadImage(M.image),j=iF({},a);if("yaw"in t&&"distance"in t){var L=p.P6.parseAngle(t.yaw)+s;j.x+=Math.sin(-L)*t.distance*e.state.imgScale,j.y+=Math.cos(-L)*t.distance*e.state.imgScale}else if("x"in t&&"y"in t)j.x+=o.x-t.x*e.state.imgScale,j.y+=o.y-t.y*e.state.imgScale;else{p.P6.logWarn("Hotspot ".concat(t.id," is missing position (yaw+distance or x+y)"));return}var C=ri(j,l,r),R=v-C.x,I=d-C.y;e.state.hotspotPos[t.id]={x:R+c.x,y:I+c.y,s:M.size},g.save(),g.translate(R*p.we.pixelRatio,I*p.we.pixelRatio),rr(g,2,2,4),T?ro(g,T,M.size):(g.fillStyle=M.color,g.beginPath(),g.arc(0,0,M.size*p.we.pixelRatio/2,0,2*Math.PI),g.fill(),M.borderColor&&M.borderSize&&(g.shadowColor="transparent",g.strokeStyle=M.borderColor,g.lineWidth=M.borderSize,g.beginPath(),g.arc(0,0,(M.size+M.borderSize)*p.we.pixelRatio/2,0,2*Math.PI),g.stroke())),g.restore()});var b=this.__loadImage(this.config.pinImage);if(b||this.config.coneColor&&this.config.coneSize){var w=ri(a,l,r),k=v-w.x,E=d-w.y,P=this.config.pinSize,_=this.config.static?i+s:0;if(g.save(),g.translate(k*p.we.pixelRatio,E*p.we.pixelRatio),g.rotate(_),this.config.coneColor&&this.config.coneSize){var x,S=f.M8C.degToRad(this.viewer.state.hFov),O=-Math.PI/2-S/2,M=O+S,T=this.config.coneSize,j=g.createRadialGradient(0,0,T/4,0,0,T);j.addColorStop(0,this.config.coneColor),j.addColorStop(1,(x=this.config.coneColor,"rgba(".concat(x.slice(4,-1),",").concat(0,")"))),g.beginPath(),g.moveTo(0,0),g.lineTo(Math.cos(O)*T,Math.sin(O)*T),g.arc(0,0,T,O,M,!1),g.lineTo(0,0),g.fillStyle=j,g.fill()}b&&(rr(g,2,2,4),ro(g,b,P)),g.restore()}}}}},{key:"__move",value:function(t,e){var n,i,r=this.viewer.getPosition().yaw,o=Math.exp(this.state.zoom),a=(n={x:this.state.mouseX-t,y:this.state.mouseY-e},{x:(Math.cos(i=this.config.static?0:r+this.config.rotation)*n.x-Math.sin(i)*n.y)/o,y:(Math.sin(i)*n.x+Math.cos(i)*n.y)/o});this.state.offset.x+=a.x,this.state.offset.y+=a.y,this.update(),this.state.mouseX=t,this.state.mouseY=e}},{key:"__findHotspot",value:function(t,e){for(var n=this.config.spotStyle.size/2,i=null,r=0,o=Object.entries(this.state.hotspotPos);r<o.length;r++){var a=i$(o[r],2),s=a[0],l=a[1],c=l.x,u=l.y;if(t>c-n&&t<c+n&&e>u-n&&e<u+n){i=s;break}}return i}},{key:"__handleHotspots",value:function(t,e){var n=this.__findHotspot(t,e);if(this.state.hotspotId!==n){if(this.__resetHotspot(),n&&(i=n.startsWith(rn)?null===(r=this.state.markers.find(function(t){return t.id===n}))||void 0===r?void 0:r.tooltip:null===(o=this.config.hotspots.find(function(t){return t.id===n}))||void 0===o?void 0:o.tooltip)){"string"==typeof i&&(i={content:i});var i,r,o,a=this.state.hotspotPos[n],s=p.P6.getPosition(this.viewer.container);this.state.hotspotTooltip=this.viewer.createTooltip({content:i.content,className:i.className,left:a.x-s.x,top:a.y-s.y,box:{width:a.s,height:a.s}})}this.setActiveHotspot(n),this.__setCursor(n?"pointer":"move")}}},{key:"__clickHotspot",value:function(t,e){var n=this.__findHotspot(t,e);if(n){if(this.plugin.dispatchEvent(new re(n)),n.startsWith(rn)){var i=n.substring(rn.length);this.viewer.getPlugin("markers").gotoMarker(i)}this.maximized&&this.toggleMaximized()}this.__resetHotspot()}},{key:"__resetHotspot",value:function(){var t;null===(t=this.state.hotspotTooltip)||void 0===t||t.hide(),this.state.hotspotTooltip=null,this.state.hotspotId=null}},{key:"__loadImage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return null;if(!this.state.images[t]){var i=function(t){var e=document.createElement("img");if(t.includes("<svg")){if(!/<svg[^>]*width="/.test(t)&&t.includes("viewBox")){var n=i$(/viewBox="([0-9-]+) ([0-9-]+) ([0-9]+) ([0-9]+)"/.exec(t),5),i=n[3],r=n[4];t=t.replace("<svg",'<svg width="'.concat(i,'px" height="').concat(r,'px"'))}var o="data:image/svg+xml;base64,".concat(window.btoa(t));e.src=o}else e.src=t;return e}(t);return this.state.images[t]={loading:!0,value:i},i.onload=function(){if(n&&Math.max(i.width,i.height)>p.we.maxCanvasWidth){e.state.imgScale=p.we.maxCanvasWidth/Math.max(i.width,i.height);var r=document.createElement("canvas");r.width=i.width*e.state.imgScale,r.height=i.height*e.state.imgScale,r.getContext("2d").drawImage(i,0,0,r.width,r.height),e.state.images[t].value=r}e.state.images[t].loading=!1,e.update(!1),n&&e.show()},null}return this.state.images[t].loading?null:this.state.images[t].value}},{key:"__onKeyPress",value:function(t){if(t===p.tl.KEY_CODES.Escape){this.toggleMaximized();return}if(this.viewer.state.keyboardEnabled){var e=0,n=0,i=0;switch(t){case p.tl.KEY_CODES.ArrowUp:n=1;break;case p.tl.KEY_CODES.ArrowDown:n=-1;break;case p.tl.KEY_CODES.ArrowLeft:e=1;break;case p.tl.KEY_CODES.ArrowRight:e=-1;break;case p.tl.KEY_CODES.Plus:i=1;break;case p.tl.KEY_CODES.Minus:i=-1;break;case p.tl.KEY_CODES.PageUp:i=1;break;case p.tl.KEY_CODES.PageDown:i=-1}(e||n)&&(this.state.mouseX=0,this.state.mouseY=0,this.__move(10*e,10*n)),i&&this.zoom(i/10)}}},{key:"__setCursor",value:function(t){this.canvas.style.cursor=t}}]),n}(p.k8),rg=p.P6.getConfigParser({imageUrl:null,center:null,rotation:0,size:"200px",position:["bottom","left"],visibleOnLoad:!0,overlayImage:'<svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">\n    <defs>\n        <radialGradient id="gradient">\n            <stop offset="80%" stop-color="rgba(255, 255, 255, 0)"/>\n            <stop offset="90%" stop-color="rgba(255, 255, 255, .5)"/>\n        </radialGradient>\n    </defs>\n    <circle cx="250" cy="250" r="250" fill="url(#gradient)"/>\n    <circle cx="250" cy="250" r="245" fill="none" stroke="rgba(255, 255, 255, 0.8)" stroke-width="10"/>\n    <g fill="#222">\n        <rect x="1" y="248" width="18" height="4"/>\n        <rect x="481" y="248" width="18" height="4"/>\n        <rect x="248" y="1" width="4" height="18"/>\n        <rect x="248" y="481" width="4" height="18"/>\n    </g>\n</svg>',compassImage:null,pinImage:'<svg viewBox="-20 -20 740 740" xmlns="http://www.w3.org/2000/svg">\n    <!-- <path d="M350 540a189.4 189.4 0 0 1-189.2-189.1c0-92.4 47.7-143 98.3-225L350-20l90.9 146c50.6 81.9 98.2 132.5 98.2 224.9A189.4 189.4 0 0 1 350 540z" fill="white"/> -->\n    <circle cx="350" cy="350" r="190" fill="white"/>\n    <circle cx="350" cy="350" r="150" fill="#1E78E6"/>\n</svg>\n',pinSize:35,coneColor:"#1E78E6",coneSize:40,spotColor:null,spotImage:null,spotSize:null,spotStyle:{size:15,image:null,color:"white",hoverSize:null,hoverImage:null,hoverColor:null,hoverBorderSize:4,hoverBorderColor:"rgba(255, 255, 255, 0.6)"},static:!1,defaultZoom:100,minZoom:20,maxZoom:200,hotspots:[],buttons:{maximize:!0,close:!0,reset:!0,north:!0}},{overlayImage:function(t,e){var n=e.rawConfig;return n.compassImage?(p.P6.logWarn('map: "compassImage" is deprecated, use "overlayImage" instead'),n.compassImage):t},spotStyle:function(t,e){var n=e.rawConfig,i=e.defValue;return[["spotColor","color"],["spotImage","image"],["spotSize","size"]].forEach(function(e){var i=i$(e,2),r=i[0],o=i[1];n[r]&&(p.P6.logWarn('map: "'.concat(r,'" is deprecated, use "spotStyle.').concat(o,'" instead')),t[o]=n[r])}),iF(iF({},i),t)},position:function(t,e){var n=e.defValue;return p.P6.cleanCssPosition(t,{allowCenter:!1,cssOrder:!0})||n},rotation:function(t){return p.P6.parseAngle(t)},coneColor:function(t){return t?new f.Ilk(t).getStyle():null},defaultZoom:function(t){return Math.log(t/100)},maxZoom:function(t){return Math.log(t/100)},minZoom:function(t){return Math.log(t/100)},buttons:function(t,e){return iF(iF({},e.defValue),t)}}),ry=function(t){i5(n,t);var e=i6(n);function n(t,i){var r;return i3(this,n),(r=e.call(this,t,i)).component=new rd(r.viewer,i8(r)),r}return i1(n,[{key:"init",value:function(){iZ(i9(n.prototype),"init",this).call(this),p.P6.checkStylesheet(this.viewer.container,"map-plugin"),this.markers=this.viewer.getPlugin("markers"),this.viewer.addEventListener(p.U3.PositionUpdatedEvent.type,this),this.viewer.addEventListener(p.U3.ZoomUpdatedEvent.type,this),this.viewer.addEventListener(p.U3.SizeUpdatedEvent.type,this),this.viewer.addEventListener(p.U3.ReadyEvent.type,this,{once:!0}),this.setHotspots(this.config.hotspots,!1),this.markers&&this.markers.addEventListener("set-markers",this)}},{key:"destroy",value:function(){this.viewer.removeEventListener(p.U3.PositionUpdatedEvent.type,this),this.viewer.removeEventListener(p.U3.ZoomUpdatedEvent.type,this),this.viewer.removeEventListener(p.U3.SizeUpdatedEvent.type,this),this.viewer.removeEventListener(p.U3.ReadyEvent.type,this),this.markers&&this.markers.removeEventListener("set-markers",this),this.component.destroy(),delete this.markers,iZ(i9(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){switch(t.type){case p.U3.ReadyEvent.type:this.component.reload(this.config.imageUrl);break;case p.U3.PositionUpdatedEvent.type:case p.U3.ZoomUpdatedEvent.type:this.component.update();break;case p.U3.SizeUpdatedEvent.type:this.component.maximized&&this.component.update();break;case"set-markers":this.component.setMarkers(this.__markersToHotspots(t.markers))}}},{key:"setOptions",value:function(t){iZ(i9(n.prototype),"setOptions",this).call(this,t),this.component.applyConfig()}},{key:"hide",value:function(){this.component.hide()}},{key:"show",value:function(){this.component.show()}},{key:"close",value:function(){this.component.collapsed||this.component.toggleCollapse()}},{key:"open",value:function(){this.component.collapsed&&this.component.toggleCollapse()}},{key:"minimize",value:function(){this.component.maximized&&this.component.toggleMaximized()}},{key:"maximize",value:function(){this.component.maximized||this.component.toggleMaximized()}},{key:"setImage",value:function(t,e,n){p.P6.isNil(n)||(this.config.rotation=p.P6.parseAngle(n)),p.P6.isNil(e)||(this.config.center=e),this.component.reload(t)}},{key:"setCenter",value:function(t){this.config.center=t,this.component.recenter()}},{key:"setHotspots",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=[],i=1;null==t||t.forEach(function(t){t.id?n.includes(t.id)?p.P6.logWarn('Duplicated hotspot id "'.concat(t.id)):n.push(t.id):t.id="__generated__"+i++}),this.config.hotspots=t||[],e&&this.component.update()}},{key:"clearHotspots",value:function(){this.setHotspots(null)}},{key:"setActiveHotspot",value:function(t){this.component.setActiveHotspot(t)}},{key:"__markersToHotspots",value:function(t){return t.filter(function(t){var e;return null===(e=t.data)||void 0===e?void 0:e.map}).map(function(t){var e=t.data.map,n=iF(iF({},e),{},{id:rn+t.id,tooltip:t.config.tooltip});if("distance"in e)n.yaw=t.state.position.yaw;else if(!("x"in e)||!("y"in e))return p.P6.logWarn("Marker ".concat(t.id,' "map" data is missing position (distance or x+y)')),null;return n}).filter(function(t){return t})}}]),n}(p.Yc);function rm(){rm=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o,a,s=Object.create((e&&e.prototype instanceof h?e:h).prototype);return i(s,"_invoke",{value:(o=new P(r||[]),a="suspendedStart",function(e,i){if("executing"===a)throw Error("Generator is already running");if("completed"===a){if("throw"===e)throw i;return x()}for(o.method=e,o.arg=i;;){var r=o.delegate;if(r){var s=function t(e,n){var i=n.method,r=e.iterator[i];if(void 0===r)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+i+"' method")),p;var o=u(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,p):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,p)}(r,o);if(s){if(s===p)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===a)throw a="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a="executing";var l=u(t,n,o);if("normal"===l.type){if(a=o.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(a="completed",o.method="throw",o.arg=l.arg)}})}),s}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var p={};function h(){}function f(){}function v(){}var d={};l(d,o,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(_([])));y&&y!==e&&n.call(y,o)&&(d=y);var m=v.prototype=h.prototype=Object.create(d);function b(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){var r;i(this,"_invoke",{value:function(i,o){function a(){return new e(function(r,a){!function i(r,o,a,s){var l=u(t[r],t,o);if("throw"!==l.type){var c=l.arg,p=c.value;return p&&"object"==r_(p)&&n.call(p,"__await")?e.resolve(p.__await).then(function(t){i("next",t,a,s)},function(t){i("throw",t,a,s)}):e.resolve(p).then(function(t){c.value=t,a(c)},function(t){return i("throw",t,a,s)})}s(l.arg)}(i,o,r,a)})}return r=r?r.then(a,a):a()}})}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=v,i(m,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:f,configurable:!0}),f.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,a,function(){return this}),t.AsyncIterator=w,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new w(c(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},b(m),l(m,s,"Generator"),l(m,o,function(){return this}),l(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return a.type="throw",a.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}function rb(t,e,n,i,r,o,a){try{var s=t[o](a),l=s.value}catch(t){n(t);return}s.done?e(l):Promise.resolve(l).then(i,r)}function rw(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var o=t.apply(e,n);function a(t){rb(o,i,r,a,s,"next",t)}function s(t){rb(o,i,r,a,s,"throw",t)}a(void 0)})}}function rk(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==r_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r_(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r_(e)?e:String(e)}(i.key),i)}}function rE(t,e){return(rE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rP(t){return(rP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r_(t){return(r_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}ry.id="map",ry.configParser=rg,ry.readonlyOptions=["imageUrl","center","visibleOnLoad","defaultZoom","hotspots","buttons"],p.Of.lang.map="Map",p.Of.lang.mapMaximize="Maximize",p.Of.lang.mapMinimize="Minimize",p.Of.lang.mapNorth="Go to north",p.Of.lang.mapReset="Reset";/*!
 * PhotoSphereViewer.CubemapAdapter 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var rx=[0,2,4,5,3,1],rS=["left","right","top","bottom","back","front"];function rO(t){return t&&"object"===r_(t)&&rS.every(function(e){return e in t})}function rM(t){var e=[];if(!rO(t))throw new p.Il("A cubemap object must contain exactly left, front, right, back, top, bottom images.");return rS.forEach(function(n,i){e[i]=t[n]}),e}var rT=p.P6.getConfigParser({flipTopBottom:!1,blur:!1}),rj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rE(t,e)}(l,t);var e,n,i,r,o,a,s=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=rP(l);if(e){var i=rP(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===r_(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,l),(n=s.call(this,t)).config=rT(e),n}return o=[{key:"supportsTransition",value:function(){return!0}},{key:"supportsPreload",value:function(){return!0}},{key:"loadTexture",value:(n=rw(rm().mark(function t(e){var n,i,r,o;return rm().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.viewer.config.fisheye&&p.P6.logWarn("fisheye effect with cubemap texture can generate distorsion"),n=Array.isArray(e)||rO(e)?{type:"separate",paths:e}:e,t.t0=n.type,t.next="separate"===t.t0?5:"stripe"===t.t0?11:"net"===t.t0?16:21;break;case 5:return r=(o=Array.isArray(n.paths)?function(t){var e=[];if(6!==t.length)throw new p.Il("A cubemap array must contain exactly 6 images.");for(var n=0;n<6;n++)e[n]=t[rx[n]];return e}(n.paths):rM(n.paths))[0],t.next=9,this.loadTexturesSeparate(o,r);case 9:case 14:case 19:return i=t.sent,t.abrupt("break",22);case 11:return r=n.path,t.next=14,this.loadTexturesStripe(n.path,n.order,r);case 16:return r=n.path,t.next=19,this.loadTexturesNet(n.path,r);case 21:throw new p.Il("Invalid cubemap panorama, are you using the right adapter?");case 22:return t.abrupt("return",{panorama:e,texture:i,cacheKey:r});case 23:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"loadTexturesSeparate",value:function(t,e){for(var n=this,i=[],r=[0,0,0,0,0,0],o=function(o){i.push(n.viewer.textureLoader.loadImage(t[o],function(t){r[o]=t,n.viewer.loader.setProgress(p.P6.sum(r)/6)},e).then(function(t){return n.createCubemapTexture(t)}))},a=0;a<6;a++)o(a);return Promise.all(i)}},{key:"createCubemapTexture",value:function(t){if(t.width!==t.height&&p.P6.logWarn("Invalid cubemap image, the width should equal the height"),this.config.blur||t.width>p.we.maxTextureWidth){var e=Math.min(1,p.we.maxCanvasWidth/t.width),n=document.createElement("canvas");n.width=t.width*e,n.height=t.height*e;var i=n.getContext("2d");return this.config.blur&&(i.filter="blur(".concat(n.width/512,"px)")),i.drawImage(t,0,0,n.width,n.height),p.P6.createTexture(n)}return p.P6.createTexture(t)}},{key:"loadTexturesStripe",value:(i=rw(rm().mark(function t(e){var n,i,r,o,a,s,l,c,u,h=this,f=arguments;return rm().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:["left","front","right","back","top","bottom"],i=f.length>2?f[2]:void 0,t.next=4,this.viewer.textureLoader.loadImage(e,function(t){return h.viewer.loader.setProgress(t)},i);case 4:for((r=t.sent).width!==6*r.height&&p.P6.logWarn("Invalid cubemap image, the width should be six times the height"),o=Math.min(1,p.we.maxCanvasWidth/r.height),a=r.height*o,s={},l=0;l<6;l++)(c=document.createElement("canvas")).width=a,c.height=a,u=c.getContext("2d"),this.config.blur&&(u.filter="blur(1px)"),u.drawImage(r,r.height*l,0,r.height,r.height,0,0,a,a),s[n[l]]=p.P6.createTexture(c);return t.abrupt("return",rM(s));case 11:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"loadTexturesNet",value:(r=rw(rm().mark(function t(e,n){var i,r,o,a,s,l,c,u,h=this;return rm().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.viewer.textureLoader.loadImage(e,function(t){return h.viewer.loader.setProgress(t)},n);case 2:for((i=t.sent).width/4!=i.height/3&&p.P6.logWarn("Invalid cubemap image, the width should be 4/3rd of the height"),r=Math.min(1,p.we.maxCanvasWidth/(i.width/4)),o=i.width/4*r,a=[[0,1/3],[.5,1/3],[1/4,0],[1/4,2/3],[3/4,1/3],[1/4,1/3]],s=[],l=0;l<6;l++)(c=document.createElement("canvas")).width=o,c.height=o,u=c.getContext("2d"),this.config.blur&&(u.filter="blur(1px)"),u.drawImage(i,i.width*a[l][0],i.height*a[l][1],i.width/4,i.height/3,0,0,o,o),s[l]=p.P6.createTexture(c);return t.abrupt("return",s);case 10:case"end":return t.stop()}},t,this)})),function(t,e){return r.apply(this,arguments)})},{key:"createMesh",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=2*p.tl.SPHERE_RADIUS*t,n=new f.DvJ(e,e,e).scale(1,1,-1),i=[],r=0;r<6;r++)i.push(p.F6.createOverlayMaterial({additionalUniforms:{rotation:{value:0}},overrideVertexShader:"\nuniform float rotation;\nvarying vec2 vUv;\nconst float mid = 0.5;\nvoid main() {\n  if (rotation == 0.0) {\n    vUv = uv;\n  } else {\n    vUv = vec2(\n      cos(rotation) * (uv.x - mid) + sin(rotation) * (uv.y - mid) + mid,\n      cos(rotation) * (uv.y - mid) - sin(rotation) * (uv.x - mid) + mid\n    );\n  }\n  gl_Position = projectionMatrix *  modelViewMatrix * vec4( position, 1.0 );\n}"}));return new f.Kj0(n,i)}},{key:"setTexture",value:function(t,e){for(var n=e.texture,i="net"===e.panorama.type?!this.config.flipTopBottom:this.config.flipTopBottom,r=0;r<6;r++)i&&(2===r||3===r)&&this.__setUniform(t,r,"rotation",Math.PI),this.__setUniform(t,r,p.F6.OVERLAY_UNIFORMS.panorama,n[r])}},{key:"setOverlay",value:function(t,e,n){for(var i=0;i<6;i++)this.__setUniform(t,i,p.F6.OVERLAY_UNIFORMS.overlayOpacity,n),e?this.__setUniform(t,i,p.F6.OVERLAY_UNIFORMS.overlay,e.texture[i]):this.__setUniform(t,i,p.F6.OVERLAY_UNIFORMS.overlay,null)}},{key:"setTextureOpacity",value:function(t,e){for(var n=0;n<6;n++)this.__setUniform(t,n,p.F6.OVERLAY_UNIFORMS.globalOpacity,e),t.material[n].transparent=e<1}},{key:"disposeTexture",value:function(t){var e;null===(e=t.texture)||void 0===e||e.forEach(function(t){return t.dispose()})}},{key:"__setUniform",value:function(t,e,n,i){t.material[e].uniforms[n].value=i}}],rk(l.prototype,o),a&&rk(l,a),Object.defineProperty(l,"prototype",{writable:!1}),l}(p.F6);function rL(){return(rL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rR(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function rC(t,e){return(rC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rR(t){return(rR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rI(t){return(rI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function rA(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rz(Object(n),!0).forEach(function(e){var i,r;i=e,r=n[e],(i=rB(i))in t?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rz(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function rN(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function rU(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,rB(i.key),i)}}function rH(t,e,n){return e&&rU(t.prototype,e),n&&rU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rB(t){var e=function(t,e){if("object"!==rI(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==rI(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===rI(e)?e:String(e)}rj.id="cubemap",rj.supportsDownload=!1,rj.supportsOverlay=!0;/*!
 * PhotoSphereViewer.CubemapTilesAdapter 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var rD=function(){function t(e,n,i){rN(this,t),this.id=e,this.priority=n,this.fn=i,this.status=1}return rH(t,[{key:"start",value:function(){var t=this;return this.status=2,this.fn(this).then(function(){t.status=4},function(){t.status=5})}},{key:"cancel",value:function(){this.status=3}},{key:"isCancelled",value:function(){return 3===this.status}}]),t}(),rV=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;rN(this,t),this.concurency=e,this.runningTasks={},this.tasks={}}return rH(t,[{key:"enqueue",value:function(t){this.tasks[t.id]=t}},{key:"clear",value:function(){Object.values(this.tasks).forEach(function(t){return t.cancel()}),this.tasks={},this.runningTasks={}}},{key:"setPriority",value:function(t,e){var n=this.tasks[t];n&&(n.priority=e,0===n.status&&(n.status=1))}},{key:"disableAllTasks",value:function(){Object.values(this.tasks).forEach(function(t){t.status=0})}},{key:"start",value:function(){var t=this;if(!(Object.keys(this.runningTasks).length>=this.concurency)){var e=Object.values(this.tasks).filter(function(t){return 1===t.status}).sort(function(t,e){return e.priority-t.priority}).pop();e&&(this.runningTasks[e.id]=!0,e.start().then(function(){e.isCancelled()||(delete t.tasks[e.id],delete t.runningTasks[e.id],t.start())}),this.start())}}}]),t}(),rY=["dodgerblue","limegreen","indianred"];function rG(t){return!!t.levels}function rW(t,e,n){return rA(rA({},t),{},{level:e,tileSize:t.faceSize/t.nbTiles,facesByTile:n.CUBE_SEGMENTS/t.nbTiles})}function rq(t,e){if(!t.faceSize||!t.nbTiles)throw new p.Il("Invalid panorama configuration, are you using the right adapter?");if(t.nbTiles>e.CUBE_SEGMENTS)throw new p.Il("Panorama nbTiles must not be greater than ".concat(e.CUBE_SEGMENTS,"."));if(!f.M8C.isPowerOfTwo(t.nbTiles))throw new p.Il("Panorama nbTiles must be power of 2.")}function rX(t){return 2===t||3===t}var rF="originaluv",rK=["left","right","top","bottom","back","front"];function rZ(t){return"".concat(t.face,":").concat(t.col,"x").concat(t.row,"/").concat(t.config.level)}var r$=p.P6.getConfigParser({flipTopBottom:!1,showErrorTile:!0,baseBlur:!0,antialias:!0,blur:!1,debug:!1}),rJ=new f.iWj,rQ=new f.yGw,r0=new f.Pa4,r1=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rC(t,e)}(i,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=rR(i);if(e){var r=rR(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===rI(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var r;return rN(this,i),(r=n.call(this,t)).state={tileConfig:null,tiles:{},faces:{},geom:null,materials:[],errorMaterial:null,inTransition:!1},r.queue=new rV,r.config=r$(e),r.viewer.config.requestHeaders&&p.P6.logWarn('CubemapTilesAdapter fallbacks to file loader because "requestHeaders" where provided. Consider removing "requestHeaders" if you experience performances issues.'),r}return rH(i,[{key:"init",value:function(){rL(rR(i.prototype),"init",this).call(this),this.viewer.addEventListener(p.U3.PositionUpdatedEvent.type,this),this.viewer.addEventListener(p.U3.ZoomUpdatedEvent.type,this)}},{key:"destroy",value:function(){var t,e,n;this.viewer.addEventListener(p.U3.PositionUpdatedEvent.type,this),this.viewer.addEventListener(p.U3.ZoomUpdatedEvent.type,this),this.__cleanup(),null===(t=this.state.errorMaterial)||void 0===t||null===(e=t.map)||void 0===e||e.dispose(),null===(n=this.state.errorMaterial)||void 0===n||n.dispose(),delete this.state.geom,delete this.state.errorMaterial,rL(rR(i.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){(t instanceof p.U3.PositionUpdatedEvent||t instanceof p.U3.ZoomUpdatedEvent)&&this.__refresh()}},{key:"supportsTransition",value:function(t){return!!t.baseUrl}},{key:"supportsPreload",value:function(t){return!!t.baseUrl}},{key:"loadTexture",value:function(t){try{!function(t,e){if("object"!==rI(t)||!t.tileUrl)throw new p.Il("Invalid panorama configuration, are you using the right adapter?");rG(t)?(t.levels.forEach(function(t){return rq(t,e)}),function(t){var e=0;t.forEach(function(n,i){if(!n.zoomRange||2!==n.zoomRange.length)throw new p.Il("Tiles level ".concat(i,' is missing "zoomRange" property'));if(n.zoomRange[0]>=n.zoomRange[1]||n.zoomRange[0]!==e||0===i&&0!==n.zoomRange[0]||i===t.length-1&&100!==n.zoomRange[1])throw new p.Il('Tiles levels\' "zoomRange" are not orderer or are not covering the whole 0-100 range');e=n.zoomRange[1]})}(t.levels)):rq(t,e)}(t,{CUBE_SEGMENTS:16})}catch(t){return Promise.reject(t)}if(!t.baseUrl)return Promise.resolve({panorama:t,cacheKey:t.tileUrl("front",0,0,0),texture:null});if(!this.adapter){if(!rj)throw new p.Il("CubemapTilesAdapter requires CubemapAdapter");this.adapter=new rj(this.viewer,{blur:this.config.baseBlur})}return this.adapter.loadTexture(t.baseUrl).then(function(e){return{panorama:t,cacheKey:e.cacheKey,texture:e.texture}})}},{key:"createMesh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=2*p.tl.SPHERE_RADIUS*t,n=new f.DvJ(e,e,e,16,16,16).scale(1,1,-1).toNonIndexed();n.clearGroups();for(var i=0,r=0;i<9216;i+=6)n.addGroup(i,6,r++);return n.setAttribute(rF,n.getAttribute("uv").clone()),new f.Kj0(n,[])}},{key:"setTexture",value:function(t,e,n){var i=this,r=e.texture;if(n){this.state.inTransition=!0,this.__setTexture(t,r);return}if(this.__cleanup(),this.__setTexture(t,r),this.state.materials=t.material,this.state.geom=t.geometry,this.state.geom.setAttribute("uv",this.state.geom.getAttribute(rF).clone()),this.config.debug){var o,a,s,l=(o=this.state.geom,a=new f.Uk6(o),(s=new f.ejS(a)).material.depthTest=!1,s.material.opacity=.25,s.material.transparent=!0,s);this.viewer.renderer.addObject(l),this.viewer.renderer.setSphereCorrection(this.viewer.config.sphereCorrection,l)}setTimeout(function(){return i.__refresh()})}},{key:"__setTexture",value:function(t,e){for(var n=0;n<6;n++){var i=void 0;e?(this.config.flipTopBottom&&rX(n)&&(e[n].center=new f.FM8(.5,.5),e[n].rotation=Math.PI),i=new f.vBJ({map:e[n]})):i=new f.vBJ({opacity:0,transparent:!0});for(var r=0;r<256;r++)t.material.push(i)}}},{key:"setTextureOpacity",value:function(t,e){for(var n=0;n<6;n++)t.material[256*n].opacity=e,t.material[256*n].transparent=e<1}},{key:"setOverlay",value:function(){throw new p.Il("EquirectangularTilesAdapter does not support overlay")}},{key:"disposeTexture",value:function(t){var e;null===(e=t.texture)||void 0===e||e.forEach(function(t){return t.dispose()})}},{key:"__refresh",value:function(){if(this.state.geom&&!this.state.inTransition){var t=this.viewer.renderer.camera;rQ.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),rJ.setFromProjectionMatrix(rQ);for(var e=this.viewer.config.panorama,n=(p=e,h=this.viewer.getZoomLevel(),f={CUBE_SEGMENTS:16},rG(p)?(d=p.levels.findIndex(function(t){return h>=t.zoomRange[0]&&h<=t.zoomRange[1]}),v=p.levels[d]):(d=0,v=rA(rA({},p),{},{zoomRange:[0,100]})),rW(v,d,f)),i=this.state.geom.getAttribute("position"),r={},o=0;o<9216;o+=1)if(r0.fromBufferAttribute(i,o),r0.applyEuler(this.viewer.renderer.sphereCorrection),rJ.containsPoint(r0))for(var a=Math.floor(o/1536),s=Math.floor((o-1536*a)/6),l=Math.floor(s/16),c=s-16*l,u=n;u;){var p,h,f,v,d,g,y,m=Math.floor(l/u.facesByTile),b=Math.floor(c/u.facesByTile),w=r0.angleTo(this.viewer.state.direction),k={face:a,row:m,col:b,angle:w,config:u,url:null};this.config.flipTopBottom&&rX(a)&&(b=u.nbTiles-b-1,m=u.nbTiles-m-1);var E=rZ(k);if(r[E]){r[E].angle=Math.min(r[E].angle,w);break}if(k.url=e.tileUrl(rK[a],b,m,u.level),k.url){r[E]=k;break}g=u.level-1,y={CUBE_SEGMENTS:16},u=rG(e)&&e.levels[g]?rW(e.levels[g],g,y):null}this.state.tileConfig=n,this.__loadTiles(Object.values(r))}}},{key:"__loadTiles",value:function(t){var e=this;this.queue.disableAllTasks(),t.forEach(function(t){var n=rZ(t);e.state.tiles[n]?e.queue.setPriority(n,t.angle):(e.state.tiles[n]=!0,e.queue.enqueue(new rD(n,t.angle,function(n){return e.__loadTile(t,n)})))}),this.queue.start()}},{key:"__loadTile",value:function(t,e){var n=this;return this.viewer.textureLoader.loadImage(t.url,null,this.viewer.state.textureData.cacheKey).then(function(i){if(!e.isCancelled()){if(n.config.debug){var r,o,a,s,l,c;r=i,o=t.config.level,a="".concat(rZ(t),"\n").concat(rK[t.face]),(s=document.createElement("canvas")).width=r.width,s.height=r.height,(l=s.getContext("2d")).fillStyle=rY[o%rY.length],l.fillRect(0,0,s.width,s.height),l.globalCompositeOperation="multiply",l.drawImage(r,0,0),c=r.width/7,l.globalCompositeOperation="source-over",l.fillStyle="white",l.font="".concat(c,"px monospace"),l.textAlign="center",a.split("\n").forEach(function(t,e){l.fillText(t,r.width/2,r.height/2+c*(.3+e))}),i=s}var u=n.config.antialias&&t.config.level>0,h=new f.vBJ({map:p.P6.createTexture(i,u)});n.__swapMaterial(t,h,!1),n.viewer.needsUpdate()}}).catch(function(){if(!e.isCancelled()&&n.config.showErrorTile){if(!n.state.errorMaterial){var i,r;n.state.errorMaterial=((i=document.createElement("canvas")).width=512,i.height=512,(r=i.getContext("2d")).fillStyle="#333",r.fillRect(0,0,i.width,i.height),r.font="".concat(i.width/5,"px serif"),r.fillStyle="#a22",r.textAlign="center",r.textBaseline="middle",r.fillText("",i.width/2,i.height/2),new f.vBJ({map:p.P6.createTexture(i)}))}n.__swapMaterial(t,n.state.errorMaterial,!0),n.viewer.needsUpdate()}})}},{key:"__swapMaterial",value:function(t,e,n){for(var i=this,r=this.state.geom.getAttribute("uv"),o=0;o<t.config.facesByTile;o++)for(var a=0;a<t.config.facesByTile;a++)if("continue"===function(){var s=t.col*t.config.facesByTile+o,l=t.row*t.config.facesByTile+a,c=1536*t.face+6*(16*l+s);if(n&&i.state.faces[c]>-1||i.state.faces[c]>t.config.level)return"continue";i.state.faces[c]=n?-1:t.config.level;var u=i.state.geom.groups.find(function(t){return t.start===c}).materialIndex;i.state.materials[u]=e;var p=1-a/t.config.facesByTile,h=1-(a+1)/t.config.facesByTile,f=o/t.config.facesByTile,v=(o+1)/t.config.facesByTile;i.config.flipTopBottom&&rX(t.face)&&(p=1-p,h=1-h,f=1-f,v=1-v),r.setXY(c,f,p),r.setXY(c+1,f,h),r.setXY(c+2,v,p),r.setXY(c+3,f,h),r.setXY(c+4,v,h),r.setXY(c+5,v,p)}())continue;r.needsUpdate=!0}},{key:"__cleanup",value:function(){this.queue.clear(),this.state.tiles={},this.state.faces={},this.state.inTransition=!1,this.state.materials.forEach(function(t){var e;null==t||null===(e=t.map)||void 0===e||e.dispose(),null==t||t.dispose()}),this.state.materials.length=0}}]),i}(p.F6);function r2(t){return(r2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r3(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function r5(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==r2(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r2(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r2(e)?e:String(e)}(i.key),i)}}function r4(t,e,n){return e&&r5(t.prototype,e),n&&r5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function r6(){return(r6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ot(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function r8(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r9(t,e)}function r9(t,e){return(r9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function r7(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=ot(t);if(e){var r=ot(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r2(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r1.id="cubemap-tiles",r1.supportsDownload=!1,r1.supportsOverlay=!1;/*!
 * PhotoSphereViewer.CubemapVideoAdapter 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var oe=function(t){r8(n,t);var e=r7(n);function n(t){return r3(this,n),e.call(this,t)}return r4(n,[{key:"init",value:function(){r6(ot(n.prototype),"init",this).call(this),this.viewer.needsContinuousUpdate(!0)}},{key:"destroy",value:function(){this.__removeVideo(),r6(ot(n.prototype),"destroy",this).call(this)}},{key:"supportsPreload",value:function(){return!1}},{key:"supportsTransition",value:function(){return!1}},{key:"loadTexture",value:function(t){if("object"!==r2(t)||!t.source)return Promise.reject(new p.Il("Invalid panorama configuration, are you using the right adapter?"));if(!this.viewer.getPlugin("video"))return Promise.reject(new p.Il("Video adapters require VideoPlugin to be loaded too."));var e=this.__createVideo(t.source);return this.__videoLoadPromise(e).then(function(){return{panorama:t,texture:new f.fO1(e),cacheKey:null}})}},{key:"switchVideo",value:function(t){var e,n,i=!this.config.autoplay,r=this.config.muted,o=1;if(this.video){var a=this.video;e=a.currentTime,n=a.duration,i=a.paused,r=a.muted,o=a.volume}this.__removeVideo(),this.video=t.image,this.video.duration===n&&(this.video.currentTime=e),this.video.muted=r,this.video.volume=o,i||this.video.play()}},{key:"setTextureOpacity",value:function(t,e){t.material.opacity=e,t.material.transparent=e<1}},{key:"setOverlay",value:function(){throw new p.Il("VideoAdapter does not support overlay")}},{key:"disposeTexture",value:function(t){t.texture.dispose()}},{key:"__removeVideo",value:function(){this.video&&(this.video.pause(),this.video.remove(),delete this.video)}},{key:"__createVideo",value:function(t){var e=document.createElement("video");return e.crossOrigin=this.viewer.config.withCredentials?"use-credentials":"anonymous",e.loop=!0,e.playsInline=!0,e.muted=this.config.muted,e.preload="metadata",e.src=t,e.style.display="none",this.viewer.container.appendChild(e),e}},{key:"__videoLoadPromise",value:function(t){var e=this;return new Promise(function(n,i){t.addEventListener("loadedmetadata",function i(){e.video&&t.duration===e.video.duration?n(e.__videoBufferPromise(t,e.video.currentTime)):n(),t.removeEventListener("loadedmetadata",i)}),t.addEventListener("error",function e(n){i(n),t.removeEventListener("error",e)})})}},{key:"__videoBufferPromise",value:function(t,e){return new Promise(function(n){function i(){for(var e=t.buffered,r=0,o=e.length;r<o;r++)if(e.start(r)<=t.currentTime&&e.end(r)>=t.currentTime){t.pause(),t.removeEventListener("buffer",i),t.removeEventListener("progress",i),n();break}}t.currentTime=Math.min(e+2e3,t.duration),t.muted=!0,t.addEventListener("buffer",i),t.addEventListener("progress",i),t.play()})}}]),n}(p.F6);oe.supportsDownload=!1,oe.supportsOverlay=!1;var on=p.P6.getConfigParser({equiangular:!0,autoplay:!1,muted:!1}),oi=function(t){r8(n,t);var e=r7(n);function n(t,i){var r;return r3(this,n),(r=e.call(this,t)).config=on(i),r}return r4(n,[{key:"createMesh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=2*p.tl.SPHERE_RADIUS*t,n=new f.DvJ(e,e,e).scale(1,1,-1).toNonIndexed();n.clearGroups();var i=n.getAttribute("uv"),r=1/3,o=2/3;i.setXY(0,0,1),i.setXY(1,0,.5),i.setXY(2,r,1),i.setXY(3,0,.5),i.setXY(4,r,.5),i.setXY(5,r,1),i.setXY(6,o,1),i.setXY(7,o,.5),i.setXY(8,1,1),i.setXY(9,o,.5),i.setXY(10,1,.5),i.setXY(11,1,1),i.setXY(12,1,.5),i.setXY(13,o,.5),i.setXY(14,1,0),i.setXY(15,o,.5),i.setXY(16,o,0),i.setXY(17,1,0),i.setXY(18,r,.5),i.setXY(19,0,.5),i.setXY(20,r,0),i.setXY(21,0,.5),i.setXY(22,0,0),i.setXY(23,r,0),i.setXY(24,o,.5),i.setXY(25,r,.5),i.setXY(26,o,0),i.setXY(27,r,.5),i.setXY(28,r,0),i.setXY(29,o,0),i.setXY(30,r,1),i.setXY(31,r,.5),i.setXY(32,o,1),i.setXY(33,r,.5),i.setXY(34,o,.5),i.setXY(35,o,1);var a=new f.jyz({uniforms:{mapped:{value:null},contCorrect:{value:1},faceWH:{value:new f.FM8(1/3,.5)},vidWH:{value:new f.FM8(1,1)}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n}",fragmentShader:"\nvarying vec2 vUv;\nuniform sampler2D mapped;\nuniform vec2 faceWH;\nuniform vec2 vidWH;\nuniform float contCorrect;\n\nconst float PI = 3.1415926535897932384626433832795;\n\nvoid main() {\n  vec2 corner = vUv - mod(vUv, faceWH) + vec2(0, contCorrect / vidWH.y);\n  vec2 faceWHadj = faceWH - vec2(0, contCorrect * 2. / vidWH.y);\n  vec2 p = (vUv - corner) / faceWHadj - .5;\n  vec2 q = ".concat(this.config.equiangular?"2. / PI * atan(2. * p) + .5":"p + .5",";\n  vec2 eUv = corner + q * faceWHadj;\n  gl_FragColor = texture2D(mapped, eUv);\n}")});return new f.Kj0(n,a)}},{key:"setTexture",value:function(t,e){var n=e.texture,i=n.image;t.material.uniforms.mapped.value=n,t.material.uniforms.vidWH.value.set(i.videoWidth,i.videoHeight),this.switchVideo(e.texture)}}]),n}(oe);function or(){return(or="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oa(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function oo(t,e){return(oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oa(t){return(oa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function os(t){return(os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ol(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function oc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ol(Object(n),!0).forEach(function(e){var i,r;i=e,r=n[e],(i=of(i))in t?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ol(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ou(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function op(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,of(i.key),i)}}function oh(t,e,n){return e&&op(t.prototype,e),n&&op(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function of(t){var e=function(t,e){if("object"!==os(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==os(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===os(e)?e:String(e)}oi.id="cubemap-video";/*!
 * PhotoSphereViewer.EquirectangularTilesAdapter 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var ov=function(){function t(e,n,i){ou(this,t),this.id=e,this.priority=n,this.fn=i,this.status=1}return oh(t,[{key:"start",value:function(){var t=this;return this.status=2,this.fn(this).then(function(){t.status=4},function(){t.status=5})}},{key:"cancel",value:function(){this.status=3}},{key:"isCancelled",value:function(){return 3===this.status}}]),t}(),od=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;ou(this,t),this.concurency=e,this.runningTasks={},this.tasks={}}return oh(t,[{key:"enqueue",value:function(t){this.tasks[t.id]=t}},{key:"clear",value:function(){Object.values(this.tasks).forEach(function(t){return t.cancel()}),this.tasks={},this.runningTasks={}}},{key:"setPriority",value:function(t,e){var n=this.tasks[t];n&&(n.priority=e,0===n.status&&(n.status=1))}},{key:"disableAllTasks",value:function(){Object.values(this.tasks).forEach(function(t){t.status=0})}},{key:"start",value:function(){var t=this;if(!(Object.keys(this.runningTasks).length>=this.concurency)){var e=Object.values(this.tasks).filter(function(t){return 1===t.status}).sort(function(t,e){return e.priority-t.priority}).pop();e&&(this.runningTasks[e.id]=!0,e.start().then(function(){e.isCancelled()||(delete t.tasks[e.id],delete t.runningTasks[e.id],t.start())}),this.start())}}}]),t}(),og=["dodgerblue","limegreen","indianred"];function oy(t){return!!t.levels}function om(t,e,n){return oc(oc({},t),{},{level:e,colSize:t.width/t.cols,rowSize:t.width/2/t.rows,facesByCol:n.SPHERE_SEGMENTS/t.cols,facesByRow:n.SPHERE_HORIZONTAL_SEGMENTS/t.rows})}function ob(t,e,n){var i,r;return oy(t)?(r=t.levels.findIndex(function(t){return e>=t.zoomRange[0]&&e<=t.zoomRange[1]}),i=t.levels[r]):(r=0,i=oc(oc({},t),{},{zoomRange:[0,100]})),om(i,r,n)}function ow(t,e){if(!t.width||!t.cols||!t.rows)throw new p.Il("Invalid panorama configuration, are you using the right adapter?");if(t.cols>e.SPHERE_SEGMENTS)throw new p.Il("Panorama cols must not be greater than ".concat(e.SPHERE_SEGMENTS,"."));if(t.rows>e.SPHERE_HORIZONTAL_SEGMENTS)throw new p.Il("Panorama rows must not be greater than ".concat(e.SPHERE_HORIZONTAL_SEGMENTS,"."));if(!f.M8C.isPowerOfTwo(t.cols)||!f.M8C.isPowerOfTwo(t.rows))throw new p.Il("Panorama cols and rows must be powers of 2.")}var ok="originaluv";function oE(t){return"".concat(t.col,"x").concat(t.row,"/").concat(t.config.level)}var oP=p.P6.getConfigParser({backgroundColor:"#000",resolution:64,showErrorTile:!0,baseBlur:!0,antialias:!0,debug:!1,useXmpData:!1},{resolution:function(t){if(!t||!f.M8C.isPowerOfTwo(t))throw new p.Il("EquirectangularTilesAdapter resolution must be power of two");return t}}),o_=new f.iWj,ox=new f.yGw,oS=new f.Pa4,oO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oo(t,e)}(i,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=oa(i);if(e){var r=oa(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===os(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var r;return ou(this,i),(r=n.call(this,t)).state={tileConfig:null,tiles:{},faces:{},geom:null,materials:[],errorMaterial:null,inTransition:!1},r.queue=new od,r.config=oP(e),r.SPHERE_SEGMENTS=r.config.resolution,r.SPHERE_HORIZONTAL_SEGMENTS=r.SPHERE_SEGMENTS/2,r.NB_VERTICES=2*r.SPHERE_SEGMENTS*3+(r.SPHERE_HORIZONTAL_SEGMENTS-2)*r.SPHERE_SEGMENTS*6,r.NB_GROUPS=r.SPHERE_SEGMENTS*r.SPHERE_HORIZONTAL_SEGMENTS,r.viewer.config.requestHeaders&&p.P6.logWarn('EquirectangularTilesAdapter fallbacks to file loader because "requestHeaders" where provided. Consider removing "requestHeaders" if you experience performances issues.'),r}return oh(i,[{key:"init",value:function(){or(oa(i.prototype),"init",this).call(this),this.viewer.addEventListener(p.U3.PositionUpdatedEvent.type,this),this.viewer.addEventListener(p.U3.ZoomUpdatedEvent.type,this)}},{key:"destroy",value:function(){var t,e,n;this.viewer.addEventListener(p.U3.PositionUpdatedEvent.type,this),this.viewer.addEventListener(p.U3.ZoomUpdatedEvent.type,this),this.__cleanup(),null===(t=this.state.errorMaterial)||void 0===t||null===(e=t.map)||void 0===e||e.dispose(),null===(n=this.state.errorMaterial)||void 0===n||n.dispose(),delete this.state.geom,delete this.state.errorMaterial,or(oa(i.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){(t instanceof p.U3.PositionUpdatedEvent||t instanceof p.U3.ZoomUpdatedEvent)&&this.__refresh()}},{key:"supportsTransition",value:function(t){return!!t.baseUrl}},{key:"supportsPreload",value:function(t){return!!t.baseUrl}},{key:"loadTexture",value:function(t){try{!function(t,e){if("object"!==os(t)||!t.tileUrl)throw new p.Il("Invalid panorama configuration, are you using the right adapter?");oy(t)?(t.levels.forEach(function(t){return ow(t,e)}),function(t){var e=0;t.forEach(function(n,i){if(!n.zoomRange||2!==n.zoomRange.length)throw new p.Il("Tiles level ".concat(i,' is missing "zoomRange" property'));if(n.zoomRange[0]>=n.zoomRange[1]||n.zoomRange[0]!==e||0===i&&0!==n.zoomRange[0]||i===t.length-1&&100!==n.zoomRange[1])throw new p.Il('Tiles levels\' "zoomRange" are not orderer or are not covering the whole 0-100 range');e=n.zoomRange[1]})}(t.levels)):ow(t,e)}(t,this)}catch(t){return Promise.reject(t)}var e=ob(t,0,this),n={fullWidth:e.width,fullHeight:e.width/2,croppedWidth:e.width,croppedHeight:e.width/2,croppedX:0,croppedY:0,poseHeading:0,posePitch:0,poseRoll:0};return t.baseUrl?(this.adapter||(this.adapter=new p.rq(this.viewer,{backgroundColor:this.config.backgroundColor,interpolateBackground:!1,blur:this.config.baseBlur,useXmpData:!1})),this.adapter.loadTexture(t.baseUrl,t.basePanoData).then(function(e){return{panorama:t,panoData:n,cacheKey:e.cacheKey,texture:e.texture}})):Promise.resolve({panorama:t,panoData:n,cacheKey:t.tileUrl(0,0,0),texture:null})}},{key:"createMesh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=new f.xo$(p.tl.SPHERE_RADIUS*t,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS,-Math.PI/2).scale(-1,1,1).toNonIndexed();e.clearGroups();for(var n=0,i=0;n<3*this.SPHERE_SEGMENTS;n+=3)e.addGroup(n,3,i++);for(;n<this.NB_VERTICES-3*this.SPHERE_SEGMENTS;n+=6)e.addGroup(n,6,i++);for(;n<this.NB_VERTICES;n+=3)e.addGroup(n,3,i++);return e.setAttribute(ok,e.getAttribute("uv").clone()),new f.Kj0(e,[])}},{key:"setTexture",value:function(t,e,n){var i=this,r=e.texture;if(n){this.state.inTransition=!0,this.__setTexture(t,r);return}if(this.__cleanup(),this.__setTexture(t,r),this.state.materials=t.material,this.state.geom=t.geometry,this.state.geom.setAttribute("uv",this.state.geom.getAttribute(ok).clone()),this.config.debug){var o,a,s,l=(o=this.state.geom,a=new f.Uk6(o),(s=new f.ejS(a)).material.depthTest=!1,s.material.opacity=.25,s.material.transparent=!0,s);this.viewer.renderer.addObject(l),this.viewer.renderer.setSphereCorrection(this.viewer.config.sphereCorrection,l)}setTimeout(function(){return i.__refresh()})}},{key:"__setTexture",value:function(t,e){var n;n=new f.vBJ(e?{map:e}:{color:this.config.backgroundColor});for(var i=0;i<this.NB_GROUPS;i++)t.material.push(n)}},{key:"setTextureOpacity",value:function(t,e){t.material[0].opacity=e,t.material[0].transparent=e<1}},{key:"setOverlay",value:function(){throw new p.Il("EquirectangularTilesAdapter does not support overlay")}},{key:"disposeTexture",value:function(t){var e;null===(e=t.texture)||void 0===e||e.dispose()}},{key:"__refresh",value:function(){if(this.state.geom&&!this.state.inTransition){var t=this.viewer.renderer.camera;ox.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),o_.setFromProjectionMatrix(ox);for(var e=this.viewer.config.panorama,n=ob(e,this.viewer.getZoomLevel(),this),i=this.state.geom.getAttribute("position"),r={},o=0;o<this.NB_VERTICES;o+=1)if(oS.fromBufferAttribute(i,o),oS.applyEuler(this.viewer.renderer.sphereCorrection),o_.containsPoint(oS))for(var a=void 0,s=Math.floor((a=o<3*this.SPHERE_SEGMENTS?Math.floor(o/3):o<this.NB_VERTICES-3*this.SPHERE_SEGMENTS?Math.floor((o/3-this.SPHERE_SEGMENTS)/2)+this.SPHERE_SEGMENTS:Math.floor((o-this.NB_VERTICES-3*this.SPHERE_SEGMENTS)/3)+this.SPHERE_HORIZONTAL_SEGMENTS*(this.SPHERE_SEGMENTS-1))/this.SPHERE_SEGMENTS),l=a-s*this.SPHERE_SEGMENTS,c=n;c;){var u,p=Math.floor(s/c.facesByRow),h=Math.floor(l/c.facesByCol),f=oS.angleTo(this.viewer.state.direction);(0===p||p===c.rows-1)&&(f*=2);var v={row:p,col:h,angle:f,config:c,url:null},d=oE(v);if(r[d]){r[d].angle=Math.min(r[d].angle,f);break}if(v.url=e.tileUrl(h,p,c.level),v.url){r[d]=v;break}u=c.level-1,c=oy(e)&&e.levels[u]?om(e.levels[u],u,this):null}this.state.tileConfig=n,this.__loadTiles(Object.values(r))}}},{key:"__loadTiles",value:function(t){var e=this;this.queue.disableAllTasks(),t.forEach(function(t){var n=oE(t);e.state.tiles[n]?e.queue.setPriority(n,t.angle):(e.state.tiles[n]=!0,e.queue.enqueue(new ov(n,t.angle,function(n){return e.__loadTile(t,n)})))}),this.queue.start()}},{key:"__loadTile",value:function(t,e){var n=this;return this.viewer.textureLoader.loadImage(t.url,null,this.viewer.state.textureData.cacheKey).then(function(i){if(!e.isCancelled()){if(n.config.debug){var r,o,a,s,l,c;r=i,o=t.config.level,a=oE(t),(s=document.createElement("canvas")).width=r.width,s.height=r.height,(l=s.getContext("2d")).fillStyle=og[o%og.length],l.fillRect(0,0,s.width,s.height),l.globalCompositeOperation="multiply",l.drawImage(r,0,0),c=r.width/7,l.globalCompositeOperation="source-over",l.fillStyle="white",l.font="".concat(c,"px monospace"),l.textAlign="center",a.split("\n").forEach(function(t,e){l.fillText(t,r.width/2,r.height/2+c*(.3+e))}),i=s}var u=n.config.antialias&&t.config.level>0,h=new f.vBJ({map:p.P6.createTexture(i,u)});n.__swapMaterial(t,h,!1),n.viewer.needsUpdate()}}).catch(function(){if(!e.isCancelled()&&n.config.showErrorTile){if(!n.state.errorMaterial){var i,r;n.state.errorMaterial=((i=document.createElement("canvas")).width=512,i.height=512,(r=i.getContext("2d")).fillStyle="#333",r.fillRect(0,0,i.width,i.height),r.font="".concat(i.width/5,"px serif"),r.fillStyle="#a22",r.textAlign="center",r.textBaseline="middle",r.fillText("",i.width/2,i.height/2),new f.vBJ({map:p.P6.createTexture(i)}))}n.__swapMaterial(t,n.state.errorMaterial,!0),n.viewer.needsUpdate()}})}},{key:"__swapMaterial",value:function(t,e,n){for(var i=this,r=this.state.geom.getAttribute("uv"),o=0;o<t.config.facesByCol;o++)for(var a=0;a<t.config.facesByRow;a++)if("continue"===function(){var s,l=t.col*t.config.facesByCol+o,c=t.row*t.config.facesByRow+a,u=0===c,p=c===i.SPHERE_HORIZONTAL_SEGMENTS-1;if(s=u?3*l:p?i.NB_VERTICES-3*i.SPHERE_SEGMENTS+3*l:3*i.SPHERE_SEGMENTS+(c-1)*i.SPHERE_SEGMENTS*6+6*l,n&&i.state.faces[s]>-1||i.state.faces[s]>t.config.level)return"continue";i.state.faces[s]=n?-1:t.config.level;var h=i.state.geom.groups.find(function(t){return t.start===s}).materialIndex;i.state.materials[h]=e;var f=1-a/t.config.facesByRow,v=1-(a+1)/t.config.facesByRow,d=o/t.config.facesByCol,g=(o+1)/t.config.facesByCol;u?(r.setXY(s,(d+g)/2,f),r.setXY(s+1,d,v),r.setXY(s+2,g,v)):p?(r.setXY(s,g,f),r.setXY(s+1,d,f),r.setXY(s+2,(d+g)/2,v)):(r.setXY(s,g,f),r.setXY(s+1,d,f),r.setXY(s+2,g,v),r.setXY(s+3,d,f),r.setXY(s+4,d,v),r.setXY(s+5,g,v))}())continue;r.needsUpdate=!0}},{key:"__cleanup",value:function(){this.queue.clear(),this.state.tiles={},this.state.faces={},this.state.inTransition=!1,this.state.materials.forEach(function(t){var e;null==t||null===(e=t.map)||void 0===e||e.dispose(),null==t||t.dispose()}),this.state.materials.length=0}}]),i}(p.F6);function oM(t){return(oM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oT(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function oj(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==oM(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==oM(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===oM(e)?e:String(e)}(i.key),i)}}function oL(t,e,n){return e&&oj(t.prototype,e),n&&oj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oC(){return(oC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oA(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function oR(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oI(t,e)}function oI(t,e){return(oI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=oA(t);if(e){var r=oA(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===oM(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function oA(t){return(oA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}oO.id="equirectangular-tiles",oO.supportsDownload=!1,oO.supportsOverlay=!1;/*!
 * PhotoSphereViewer.EquirectangularVideoAdapter 5.4.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var oN=function(t){oR(n,t);var e=oz(n);function n(t){return oT(this,n),e.call(this,t)}return oL(n,[{key:"init",value:function(){oC(oA(n.prototype),"init",this).call(this),this.viewer.needsContinuousUpdate(!0)}},{key:"destroy",value:function(){this.__removeVideo(),oC(oA(n.prototype),"destroy",this).call(this)}},{key:"supportsPreload",value:function(){return!1}},{key:"supportsTransition",value:function(){return!1}},{key:"loadTexture",value:function(t){if("object"!==oM(t)||!t.source)return Promise.reject(new p.Il("Invalid panorama configuration, are you using the right adapter?"));if(!this.viewer.getPlugin("video"))return Promise.reject(new p.Il("Video adapters require VideoPlugin to be loaded too."));var e=this.__createVideo(t.source);return this.__videoLoadPromise(e).then(function(){return{panorama:t,texture:new f.fO1(e),cacheKey:null}})}},{key:"switchVideo",value:function(t){var e,n,i=!this.config.autoplay,r=this.config.muted,o=1;if(this.video){var a=this.video;e=a.currentTime,n=a.duration,i=a.paused,r=a.muted,o=a.volume}this.__removeVideo(),this.video=t.image,this.video.duration===n&&(this.video.currentTime=e),this.video.muted=r,this.video.volume=o,i||this.video.play()}},{key:"setTextureOpacity",value:function(t,e){t.material.opacity=e,t.material.transparent=e<1}},{key:"setOverlay",value:function(){throw new p.Il("VideoAdapter does not support overlay")}},{key:"disposeTexture",value:function(t){t.texture.dispose()}},{key:"__removeVideo",value:function(){this.video&&(this.video.pause(),this.video.remove(),delete this.video)}},{key:"__createVideo",value:function(t){var e=document.createElement("video");return e.crossOrigin=this.viewer.config.withCredentials?"use-credentials":"anonymous",e.loop=!0,e.playsInline=!0,e.muted=this.config.muted,e.preload="metadata",e.src=t,e.style.display="none",this.viewer.container.appendChild(e),e}},{key:"__videoLoadPromise",value:function(t){var e=this;return new Promise(function(n,i){t.addEventListener("loadedmetadata",function i(){e.video&&t.duration===e.video.duration?n(e.__videoBufferPromise(t,e.video.currentTime)):n(),t.removeEventListener("loadedmetadata",i)}),t.addEventListener("error",function e(n){i(n),t.removeEventListener("error",e)})})}},{key:"__videoBufferPromise",value:function(t,e){return new Promise(function(n){function i(){for(var e=t.buffered,r=0,o=e.length;r<o;r++)if(e.start(r)<=t.currentTime&&e.end(r)>=t.currentTime){t.pause(),t.removeEventListener("buffer",i),t.removeEventListener("progress",i),n();break}}t.currentTime=Math.min(e+2e3,t.duration),t.muted=!0,t.addEventListener("buffer",i),t.addEventListener("progress",i),t.play()})}}]),n}(p.F6);oN.supportsDownload=!1,oN.supportsOverlay=!1;var oU=p.P6.getConfigParser({resolution:64,autoplay:!1,muted:!1},{resolution:function(t){if(!t||!f.M8C.isPowerOfTwo(t))throw new p.Il("EquirectangularTilesAdapter resolution must be power of two");return t}}),oH=function(t){oR(n,t);var e=oz(n);function n(t,i){var r;return oT(this,n),(r=e.call(this,t)).config=oU(i),r.SPHERE_SEGMENTS=r.config.resolution,r.SPHERE_HORIZONTAL_SEGMENTS=r.SPHERE_SEGMENTS/2,r}return oL(n,[{key:"loadTexture",value:function(t){return oC(oA(n.prototype),"loadTexture",this).call(this,t).then(function(e){var n=e.texture,i=e.cacheKey,r=n.image;return{panorama:t,texture:n,panoData:{fullWidth:r.videoWidth,fullHeight:r.videoHeight,croppedWidth:r.videoWidth,croppedHeight:r.videoHeight,croppedX:0,croppedY:0,poseHeading:0,posePitch:0,poseRoll:0},cacheKey:i}})}},{key:"createMesh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=new f.xo$(p.tl.SPHERE_RADIUS*t,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS,-Math.PI/2).scale(-1,1,1),n=new f.vBJ;return new f.Kj0(e,n)}},{key:"setTexture",value:function(t,e){t.material.map=e.texture,this.switchVideo(e.texture)}}]),n}(oN);oH.id="equirectangular-video";var oB=n(3327);h('/*!\n * PhotoSphereViewer.MarkersPlugin 5.4.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-container {\n  --psv-markers-plugin-loaded: true;\n}\n.psv-markers {\n  user-select: none;\n  position: absolute;\n  z-index: 10;\n  width: 100%;\n  height: 100%;\n}\n.psv-markers-svg-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 20;\n}\n.psv-marker {\n  display: none;\n}\n.psv-marker--normal {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 30;\n  overflow: visible;\n  background-size: contain;\n  background-repeat: no-repeat;\n}\n.psv-marker--transparent {\n  display: block;\n  opacity: 0;\n}\n.psv-marker--visible {\n  display: block;\n}\n.psv-marker--has-tooltip,\n.psv-marker--has-content {\n  cursor: pointer;\n}'),h('/*!\n * PhotoSphereViewer.CompassPlugin 5.4.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-container {\n  --psv-compass-plugin-loaded: true;\n}\n.psv-compass {\n  position: absolute;\n  margin: 10px;\n  z-index: 40;\n  cursor: default;\n}\n.psv--has-navbar .psv-compass {\n  margin-bottom: calc(40px + 10px);\n}\n.psv-compass canvas,\n.psv-compass svg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.psv-compass--top-left,\n.psv-compass--top-center,\n.psv-compass--top-right {\n  top: 0;\n}\n.psv-compass--center-left,\n.psv-compass--center-center,\n.psv-compass--center-right {\n  top: 50%;\n}\n.psv-compass--bottom-left,\n.psv-compass--bottom-center,\n.psv-compass--bottom-right {\n  bottom: 0;\n}\n.psv-compass--top-left,\n.psv-compass--center-left,\n.psv-compass--bottom-left {\n  left: 0;\n}\n.psv-compass--top-center,\n.psv-compass--center-center,\n.psv-compass--bottom-center {\n  left: 50%;\n}\n.psv-compass--top-right,\n.psv-compass--center-right,\n.psv-compass--bottom-right {\n  right: 0;\n}'),h('/*!\n * PhotoSphereViewer.GalleryPlugin 5.4.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-container {\n  --psv-gallery-plugin-loaded: true;\n}\n.psv-gallery {\n  --psv-gallery-breakpoint: 500px;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  background: rgba(61, 61, 61, 0.5);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.7);\n  overflow: hidden;\n  transition: transform ease-in-out 0.1s;\n  transform: translateY(100%);\n  z-index: 90;\n  cursor: default;\n}\n.psv--has-navbar .psv-gallery {\n  bottom: 40px;\n  transform: translateY(calc(100% + 40px));\n}\n.psv-gallery--open {\n  transform: translateY(0) !important;\n}\n.psv-gallery-container {\n  display: flex;\n  align-content: flex-start;\n  padding: 15px;\n  overflow-x: auto;\n}\n.psv-gallery-item {\n  flex: none;\n  position: relative;\n  border-radius: 5px;\n  overflow: hidden;\n  cursor: pointer;\n}\n.psv-gallery-item:not(:last-child) {\n  margin-right: 15px;\n}\n.psv-gallery-item-title {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  box-sizing: border-box;\n  width: 100%;\n  height: 2.2em;\n  padding: 0.5em;\n  background: rgba(0, 0, 0, 0.6);\n  font: 16px sans-serif;\n  line-height: 1.2em;\n  color: rgba(255, 255, 255, 0.7);\n  z-index: 2;\n  transition: height ease-in-out 0.2s;\n}\n.psv-gallery-item-title span {\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  user-select: none;\n}\n.psv-gallery-item-thumb {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-position: center center;\n  background-size: cover;\n  transform: scale3d(1, 1, 1);\n  transition: transform ease-in-out 0.2s;\n  z-index: 1;\n}\n.psv-gallery-item:hover .psv-gallery-item-title {\n  height: 100%;\n}\n.psv-gallery-item:hover .psv-gallery-item-title span {\n  white-space: normal;\n}\n.psv-gallery-item:hover .psv-gallery-item-thumb {\n  transform: scale3d(1.2, 1.2, 1);\n}\n.psv-gallery-item--active::after {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  border: 3px solid white;\n  z-index: 3;\n}\n@media screen and (width <= 500px) {\n  .psv-gallery {\n    top: 0;\n  }\n  .psv-gallery-container {\n    flex-wrap: wrap;\n    height: calc(100% - 32px);\n    margin-top: 32px;\n    padding: 0 0 0 15px;\n    overflow-x: hidden;\n    overflow-y: auto;\n  }\n  .psv-gallery-item {\n    width: calc(50% - 15px) !important;\n    margin-bottom: 15px;\n  }\n  .psv-gallery .psv-panel-close-button {\n    display: block;\n    z-index: 10;\n  }\n}'),h('/*!\n * PhotoSphereViewer.SettingsPlugin 5.4.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-container {\n  --psv-settings-plugin-loaded: true;\n}\n.psv-settings {\n  position: absolute;\n  bottom: 40px;\n  background: rgba(10, 10, 10, 0.7);\n  box-shadow: 0 0 5px rgba(10, 10, 10, 0.7);\n  font: 16px sans-serif;\n  color: rgb(220, 220, 220);\n  z-index: 90;\n  opacity: 0;\n  transition: opacity 0.1s linear;\n  margin: 10px;\n}\n.psv-settings--open {\n  opacity: 1;\n}\n.psv-settings-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n.psv-settings-item {\n  height: 1.5em;\n  padding: 0.5em 1em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  cursor: pointer;\n}\n.psv-settings-item:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n.psv-settings-item:focus-visible {\n  outline: 2px solid #007cff;\n  outline-offset: -2px;\n}\n.psv-settings-item *:not(:last-child) {\n  margin-right: 1em;\n}\n.psv-settings-item-label {\n  flex: 1;\n  font-weight: bold;\n}\n.psv-settings-item-value {\n  flex: none;\n}\n.psv-settings-item-icon {\n  flex: none;\n  height: 1em;\n  width: 1em;\n}\n.psv-settings-item-icon svg {\n  width: 100%;\n  height: 100%;\n  vertical-align: initial;\n}\n.psv-settings-item--header {\n  border-bottom: 1px solid currentcolor;\n}\n.psv-settings-item--header svg {\n  transform: scaleX(-1);\n}\n.psv-settings-badge {\n  position: absolute;\n  top: 10%;\n  right: 10%;\n  border-radius: 0.2em;\n  padding: 0.2em;\n  background: #111;\n  color: white;\n  font: 10px/0.9 monospace;\n}'),h('/*!\n * PhotoSphereViewer.VideoPlugin 5.4.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-container {\n  --psv-video-plugin-loaded: true;\n}\n.psv-video-progressbar {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 20px;\n  cursor: pointer;\n  z-index: 89;\n}\n.psv--has-navbar .psv-video-progressbar {\n  bottom: 40px;\n}\n.psv-video-progressbar > * {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 3px;\n  transition: height 0.2s linear;\n}\n.psv-video-progressbar:hover > * {\n  height: 5px;\n}\n.psv-video-progressbar__progress {\n  background-color: rgba(255, 255, 255, 0.7);\n}\n.psv-video-progressbar__buffer {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n.psv-video-progressbar__handle {\n  display: none;\n  height: 9px !important;\n  width: 9px;\n  border-radius: 50%;\n  margin-bottom: -2px;\n  margin-left: -4.5px;\n  background: white;\n}\n.psv-video-time {\n  flex: 0 0 auto;\n}\n.psv-video-time .psv-caption-content {\n  min-width: 6em;\n  text-align: center;\n}\n.psv-video-volume__container {\n  position: absolute;\n  left: 0;\n  bottom: 40px;\n  padding: 20px 0;\n  width: 40px;\n  height: 0;\n  opacity: 0;\n  background: rgba(61, 61, 61, 0.5);\n  transition: opacity 0.2s linear, height 0.3s step-end;\n}\n.psv--is-touch .psv-video-volume__container {\n  display: none;\n}\n.psv-video-volume__range {\n  position: relative;\n  height: 80px;\n}\n.psv-video-volume__progress,\n.psv-video-volume__track {\n  position: absolute;\n  bottom: 0;\n  left: 17.5px;\n  width: 5px;\n  background: rgba(255, 255, 255, 0.7);\n}\n.psv-video-volume__track {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.2);\n}\n.psv-video-volume__handle {\n  position: absolute;\n  left: 17.5px;\n  height: 9px;\n  width: 9px;\n  border-radius: 50%;\n  margin-left: -2px;\n  margin-bottom: -4.5px;\n  background: white;\n}\n.psv-video-volume-button {\n  position: relative;\n}\n.psv-video-volume-button:hover .psv-video-volume__container {\n  height: 80px;\n  opacity: 1;\n  transition-timing-function: linear, step-start;\n  transition-delay: 0.2s;\n}\n.psv-video-volume-button--0 .psv-button-svg #lvl1,\n.psv-video-volume-button--0 .psv-button-svg #lvl2,\n.psv-video-volume-button--0 .psv-button-svg #lvl3 {\n  fill: none;\n}\n.psv-video-volume-button--1 .psv-button-svg #lvl0,\n.psv-video-volume-button--1 .psv-button-svg #lvl2,\n.psv-video-volume-button--1 .psv-button-svg #lvl3 {\n  fill: none;\n}\n.psv-video-volume-button--2 .psv-button-svg #lvl0,\n.psv-video-volume-button--2 .psv-button-svg #lvl3 {\n  fill: none;\n}\n.psv-video-volume-button--3 .psv-button-svg #lvl0 {\n  fill: none;\n}\n.psv-video-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 110;\n  pointer-events: none;\n}\n.psv-video-bigbutton {\n  display: block;\n  border: none;\n  background: none;\n  padding: 0;\n  color: rgba(255, 255, 255, 0.7);\n  pointer-events: auto;\n  cursor: pointer;\n  opacity: 0;\n  width: 0;\n  transition: opacity 0.2s linear, width 0.3s step-end;\n}\n.psv-video-bigbutton--pause {\n  width: 20vw;\n  opacity: 1;\n  transition-timing-function: linear, step-start;\n}\n@media (orientation: landscape) {\n  .psv-video-bigbutton--pause {\n    width: 10vw;\n  }\n}\n.psv-video-bigbutton svg {\n  width: 100%;\n}'),h('/*!\n * PhotoSphereViewer.VirtualTourPlugin 5.4.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-container {\n  --psv-virtual-tour-plugin-loaded: true;\n}\n.psv-virtual-tour-tooltip {\n  padding: 0;\n}\n.psv-virtual-tour-tooltip .psv-tooltip-content {\n  line-height: 0;\n}\n.psv-virtual-tour-tooltip h3 {\n  margin: 0;\n  padding: 0.5em 1em;\n  line-height: normal;\n}\n.psv-virtual-tour-tooltip img {\n  width: 100%;\n}\n.psv-virtual-tour-tooltip img:first-child {\n  border-radius: 4px 4px 0 0;\n}\n.psv-virtual-tour-tooltip img:last-child {\n  border-radius: 0 0 4px 4px;\n}\n.psv-virtual-tour-tooltip p {\n  margin: 0;\n  padding: 0.5em 1em;\n  line-height: normal;\n}\n.psv-virtual-tour-link {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  border: none;\n  background: none;\n  color: rgba(255, 255, 255, 0.8);\n  border-radius: 50%;\n  cursor: pointer;\n  filter: drop-shadow(0 10px 5px rgba(0, 0, 0, 0.2));\n}\n.psv-virtual-tour-link:hover {\n  animation: psv-virtual-tour-link-button-in 1s ease-out forwards;\n}\n@keyframes psv-virtual-tour-link-button-in {\n  0% {\n    box-shadow: 0 0 0 0 rgba(97, 170, 242, 0);\n  }\n  20% {\n    box-shadow: 0 0 0 5px #61aaf2;\n  }\n  100% {\n    box-shadow: 0 0 0 20px rgba(97, 170, 242, 0);\n  }\n}'),h('/*!\n * PhotoSphereViewer.MapPlugin 5.4.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-container {\n  --psv-map-plugin-loaded: true;\n}\n.psv-map {\n  position: absolute;\n  margin: 10px;\n  z-index: 40;\n  transition: all ease-in-out 0.3s;\n}\n.psv--has-navbar .psv-map {\n  margin-bottom: calc(40px + 10px);\n}\n.psv-map__container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: -1;\n  background: rgba(61, 61, 61, 0.7);\n  overflow: hidden;\n  border-radius: 50%;\n  transition: all ease-in-out 0.3s;\n}\n.psv-map__container svg,\n.psv-map__container img,\n.psv-map__container canvas {\n  width: 100%;\n  height: 100%;\n}\n.psv-map__overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n.psv-map__toolbar {\n  position: absolute;\n  bottom: 1em;\n  left: calc(50% - 3.25em);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font: 12px sans-serif;\n  padding: 0.25em;\n  border-radius: 1.5em;\n  background: #222;\n  color: white;\n  user-select: none;\n  transition: opacity ease-in-out 0.3s;\n}\n.psv-map__toolbar svg {\n  height: 1em;\n  cursor: pointer;\n}\n.psv-map__toolbar-text {\n  width: 4em;\n  text-align: center;\n}\n.psv-map__button {\n  position: absolute;\n  width: 34px;\n  aspect-ratio: 1;\n  line-height: 0;\n  background: rgba(61, 61, 61, 0.7);\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transform-origin: center;\n  color: rgba(255, 255, 255, 0.7);\n  cursor: pointer;\n  transition: all ease-in-out 0.3s;\n}\n.psv-map__button svg {\n  width: 60%;\n}\n.psv-map__button--top-left {\n  left: 14.645%;\n  top: 14.645%;\n  transform: translate(-32.021px, -32.021px);\n}\n.psv-map__button--top-right {\n  right: 14.645%;\n  top: 14.645%;\n  transform: translate(32.021px, -32.021px);\n}\n.psv-map__button--bottom-left {\n  left: 14.645%;\n  bottom: 14.645%;\n  transform: translate(-32.021px, 32.021px);\n}\n.psv-map__button--bottom-right {\n  right: 14.645%;\n  bottom: 14.645%;\n  transform: translate(32.021px, 32.021px);\n}\n.psv-map--maximized {\n  margin: 0;\n  width: 100% !important;\n  height: 100% !important;\n}\n.psv--has-navbar .psv-map--maximized {\n  height: calc(100% - 40px) !important;\n  margin-bottom: 40px;\n}\n.psv-map--maximized .psv-map__container {\n  border-radius: 0;\n}\n.psv-map--maximized .psv-map__button {\n  border: 2px solid currentcolor;\n}\n.psv-map--maximized .psv-map__button--top-left {\n  left: 44px;\n  top: 44px;\n}\n.psv-map--maximized .psv-map__button--top-right {\n  right: 44px;\n  top: 44px;\n}\n.psv-map--maximized .psv-map__button--bottom-left {\n  left: 44px;\n  bottom: 44px;\n}\n.psv-map--maximized .psv-map__button--bottom-right {\n  right: 44px;\n  bottom: 44px;\n}\n.psv-map--collapsed {\n  width: 34px !important;\n  height: 34px !important;\n}\n.psv-map--collapsed > * {\n  opacity: 0;\n}\n.psv-map--collapsed .psv-map__button-close {\n  opacity: 1;\n  transform: translate(0, 0);\n  z-index: 1;\n}\n.psv-map--top-left {\n  top: 0;\n  left: 0;\n}\n.psv-map--top-right {\n  top: 0;\n  right: 0;\n}\n.psv-map--bottom-left {\n  bottom: 0;\n  left: 0;\n}\n.psv-map--bottom-right {\n  bottom: 0;\n  right: 0;\n}');var oD={exports:{}};function oV(t){return(oV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,i,o,a){if("function"!=typeof i)throw TypeError("The listener must be a function");var s=new r(i,o||t,a),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1)),s.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},s.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,a=Array(o);r<o;r++)a[r]=i[r].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},s.prototype.emit=function(t,e,i,r,o,a){var s=n?n+t:t;if(!this._events[s])return!1;var l,c,u=this._events[s],p=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),p){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,r),!0;case 5:return u.fn.call(u.context,e,i,r,o),!0;case 6:return u.fn.call(u.context,e,i,r,o,a),!0}for(c=1,l=Array(p-1);c<p;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),p){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,i);break;case 4:u[c].fn.call(u[c].context,e,i,r);break;default:if(!l)for(h=1,l=Array(p-1);h<p;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,i,r){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||i&&s.context!==i||a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==e||r&&!s[l].once||i&&s[l].context!==i)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s}(oD);var oY=new((l=oD.exports)&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l),oG={on:function(t,e){return oY.on(t,e)},once:function(t,e){return oY.once(t,e)},off:function(t,e){return oY.off(t,e)},emit:function(t,e){return oY.emit(t,e)}};Object.freeze(oG);var oW=["src","height","width","containerClass","littlePlanet","onPositionChange","onZoomChange","onClick","onDblclick","onReady"],oq=["autorotate","zoom","fullscreen"];function oX(t){return null==t?oq:Array.isArray(t)?t:"string"==typeof t?""!==t&&[t]:!!t&&oq}var oF=(0,u.forwardRef)(function(t,e){var n,i,r,o,a=(i=(n=(0,u.useState)())[0],r=n[1],o=(0,u.useCallback)(function(t){t&&t!==i&&r(t)},[i]),[i,o]),s=a[0],l=a[1],h=(0,u.useMemo)(function(){return t},[t.src,t.navbar,t.height,t.width,t.containerClass,t.littlePlanet,t.fishEye,t.lang,t.onPositionChange,t.onZoomChange,t.onClick,t.onDblclick,t.onReady,t.moveSpeed,t.zoomSpeed,t.moveInertia,t.mousewheel,t.mousemove,t.mousewheelCtrlKey,t.touchmoveTwoFingers,t.useXmpData,t.panoData,t.requestHeaders,t.canvasBackground,t.withCredentials,t.keyboard,t.plugins,t.sphereCorrection,t.minFov,t.maxFov,t.defaultZoomLvl,t.defaultYaw,t.defaultPitch]),f=(0,u.useRef)(null),v=130,d=(0,u.useState)(-90)[0],g=(0,u.useState)(2)[0],y=(0,u.useState)(0)[0],m=(0,u.useState)(oq),b=m[0],w=m[1];return(0,u.useEffect)(function(){function t(){v=Math.floor(-((window.innerWidth/window.innerHeight-.5)*25)/1.3+140)}return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}},[]),(0,u.useEffect)(function(){var t,e,n,i,r=!0;if(s&&!f.current){var o=new p.AE(c(c({},function(t){var e=c({},t);for(var n in e)oW.includes(n)&&delete e[n];return e}(h)),{container:s,panorama:h.src,size:{height:h.height,width:h.width||"100px"},fisheye:h.littlePlanet?g:h.fisheye||!1,minFov:h.minFov||30,maxFov:h.littlePlanet?v:h.maxFov||90,defaultZoomLvl:h.littlePlanet?y:h.defaultZoomLvl||50,defaultYaw:h.defaultYaw||0,defaultPitch:h.littlePlanet?d:h.defaultPitch||0,sphereCorrection:h.sphereCorrection||{pan:0,tilt:0,roll:0},moveSpeed:h.moveSpeed||1,zoomSpeed:h.zoomSpeed||1,moveInertia:null===(t=h.moveInertia)||void 0===t||t,mousewheel:!h.littlePlanet&&(null===(e=h.mousewheel)||void 0===e||e),mousemove:null===(n=h.mousemove)||void 0===n||n,mousewheelCtrlKey:h.mousewheelCtrlKey||!1,touchmoveTwoFingers:h.touchmoveTwoFingers||!1,useXmpData:null===(i=h.useXmpData)||void 0===i||i,panoData:h.panoData||{},requestHeaders:h.requestHeaders||{},canvasBackground:h.canvasBackground||"#000",withCredentials:h.withCredentials||!1,navbar:oX(h.navbar),lang:h.lang||{},keyboard:h.keyboard||{},plugins:function(t,e,n){if(n||2==arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}([[L,{autorotatePitch:"5deg",autostartDelay:void 0,autostartOnIdle:!1}]],h.plugins?h.plugins:[],!0)}));if(o.addEventListener("ready",function(){h.onReady&&h.onReady(o)},{once:!0}),o.addEventListener("click",function(t){h.onClick&&h.onClick(t,o),h.littlePlanet&&r&&(r=!1,o.animate({yaw:0,pitch:d,zoom:75,speed:"3rpm"}).then(function(){o.animate({yaw:0,pitch:0,zoom:90,speed:"10rpm"}).then(function(){var t,e=o.getPlugin("autorotate");e&&e.start(),o.setOption("maxFov",h.maxFov||70),o.setOption("mousewheel",null===(t=h.mousewheel)||void 0===t||t)})}))}),o.addEventListener("dblclick",function(t){h.onDblclick&&h.onDblclick(t,o)}),o.addEventListener("zoom-updated",function(t){h.onZoomChange&&h.onZoomChange(t,o)}),o.addEventListener("position-updated",function(t){h.onPositionChange&&h.onPositionChange(t.position.pitch,t.position.yaw,o)}),h.littlePlanet){var a=oX(h.navbar);!1===a||a.find(function(t){return"object"===oV(t)&&(null==t?void 0:t.id)==="resetLittlePlanetButton"})||(a.push({id:"resetLittlePlanetButton",content:"\uD83E\uDE90",title:"Reset Little Planet",className:"resetLittlePlanetButton",onClick:function(){r=!0;var t=o.getPlugin("autorotate");t&&t.stop(),o.setOption("maxFov",v),o.setOption("mousewheel",!1),o.animate({yaw:0,pitch:d,zoom:y,speed:"10rpm"})}}),o.setOption("navbar",a),w(a))}oG.on("animate",function(t){o.animate(t)}).on("stop-animation",function(){o.stopAnimation()}).on("destroy",function(){o.destroy()}).on("rotate",function(t){o.rotate(t)}).on("setOption",function(t){var e=t.option,n=t.value;o.setOption(e,n)}).on("zoom",function(t){o.zoom(t)}).on("zoomIn",function(){o.zoomIn()}).on("zoomOut",function(){o.zoomOut()}).on("startAutoRotate",function(){var t=o.getPlugin("autorotate");t&&t.start()}).on("stopAutoRotate",function(){var t=o.getPlugin("autorotate");t&&t.stop()}).on("toggleAutorotate",function(){var t=o.getPlugin("autorotate");t&&t.toggle()}),f.current=o}},[s,h]),(0,u.useEffect)(function(){f.current&&f.current.setPanorama(h.src,h)},[h.src]),(0,u.useImperativeHandle)(e,function(){return{animate:function(t){oG.emit("animate",t)},destroy:function(){oG.emit("destroy",{})},rotate:function(t){oG.emit("rotate",t)},setOption:function(t,e){oG.emit("setOption",{option:t,value:e})},setOptions:function(t){var e;return null===(e=f.current)||void 0===e?void 0:e.setOptions(t)},getCurrentNavbar:function(){return b},zoom:function(t){oG.emit("zoom",t)},zoomIn:function(){oG.emit("zoomIn",{})},zoomOut:function(){oG.emit("zoomOut",{})},resize:function(t){var e;return null===(e=f.current)||void 0===e?void 0:e.resize(t)},enterFullscreen:function(){var t;return null===(t=f.current)||void 0===t?void 0:t.enterFullscreen()},exitFullscreen:function(){var t;return null===(t=f.current)||void 0===t?void 0:t.exitFullscreen()},toggleFullscreen:function(){var t;return null===(t=f.current)||void 0===t?void 0:t.toggleFullscreen()},isFullscreenEnabled:function(){var t;return null===(t=f.current)||void 0===t?void 0:t.isFullscreenEnabled()},startAutoRotate:function(){oG.emit("startAutoRotate",{})},stopAutoRotate:function(){oG.emit("stopAutoRotate",{})},getPlugin:function(t){var e;return null===(e=f.current)||void 0===e?void 0:e.getPlugin(t)},getPosition:function(){var t;return null===(t=f.current)||void 0===t?void 0:t.getPosition()},getZoomLevel:function(){var t;return null===(t=f.current)||void 0===t?void 0:t.getZoomLevel()},getSize:function(){var t;return null===(t=f.current)||void 0===t?void 0:t.getSize()},needsUpdate:function(){var t;return null===(t=f.current)||void 0===t?void 0:t.needsUpdate()},autoSize:function(){var t;return null===(t=f.current)||void 0===t?void 0:t.autoSize()},setPanorama:function(t,e){var n;return null===(n=f.current)||void 0===n?void 0:n.setPanorama(t,e)},setOverlay:function(t,e){var n;return null===(n=f.current)||void 0===n?void 0:n.setOverlay(t,e)},toggleAutorotate:function(){oG.emit("toggleAutorotate",{})},showError:function(t){var e;return null===(e=f.current)||void 0===e?void 0:e.showError(t)},hideError:function(){var t;return null===(t=f.current)||void 0===t?void 0:t.hideError()},startKeyboardControl:function(){var t;return null===(t=f.current)||void 0===t?void 0:t.startKeyboardControl()},stopKeyboardControl:function(){var t;return null===(t=f.current)||void 0===t?void 0:t.stopKeyboardControl()}}},[f.current,s,h,e]),u.createElement("div",{className:h.containerClass||"view-container",ref:l})})}}]);