"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{4418:function(t,e,n){n.d(e,{$N:function(){return t3},AE:function(){return nY},F6:function(){return e0},Il:function(){return tT},KI:function(){return nO},Of:function(){return ny},P6:function(){return q},T9:function(){return e9},U3:function(){return t2},Vw:function(){return np},Yc:function(){return nf},k8:function(){return e7},rq:function(){return e8},tl:function(){return R},we:function(){return e3}});var i,r,o,a=n(8376);function s(){s=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o,a,s=Object.create((e&&e.prototype instanceof v?e:v).prototype);return i(s,"_invoke",{value:(o=new O(r||[]),a="suspendedStart",function(e,i){if("executing"===a)throw Error("Generator is already running");if("completed"===a){if("throw"===e)throw i;return L()}for(o.method=e,o.arg=i;;){var r=o.delegate;if(r){var s=function t(e,n){var i=n.method,r=e.iterator[i];if(void 0===r)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+i+"' method")),d;var o=h(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,d):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,d)}(r,o);if(s){if(s===d)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===a)throw a="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a="executing";var c=h(t,n,o);if("normal"===c.type){if(a=o.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(a="completed",o.method="throw",o.arg=c.arg)}})}),s}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function v(){}function p(){}function f(){}var m={};u(m,o,function(){return this});var y=Object.getPrototypeOf,w=y&&y(y(M([])));w&&w!==e&&n.call(w,o)&&(m=w);var g=f.prototype=v.prototype=Object.create(m);function b(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function k(t,e){var r;i(this,"_invoke",{value:function(i,o){function a(){return new e(function(r,a){!function i(r,o,a,s){var c=h(t[r],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==T(l)&&n.call(l,"__await")?e.resolve(l.__await).then(function(t){i("next",t,a,s)},function(t){i("throw",t,a,s)}):e.resolve(l).then(function(t){u.value=t,a(u)},function(t){return i("throw",t,a,s)})}s(c.arg)}(i,o,r,a)})}return r=r?r.then(a,a):a()}})}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function M(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,i(g,"constructor",{value:f,configurable:!0}),i(f,"constructor",{value:p,configurable:!0}),p.displayName=u(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(k.prototype),u(k.prototype,a,function(){return this}),t.AsyncIterator=k,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new k(l(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},b(g),u(g,c,"Generator"),u(g,o,function(){return this}),u(g,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},t.values=M,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return a.type="throw",a.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function c(t,e,n,i,r,o,a){try{var s=t[o](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,r)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var o=t.apply(e,n);function a(t){c(o,i,r,a,s,"next",t)}function s(t){c(o,i,r,a,s,"throw",t)}a(void 0)})}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach(function(e){v(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function v(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function f(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=function(t,e){if("object"!==T(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==T(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===T(e)?e:String(e)}function y(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function w(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}function g(t){var e=E();return function(){var n,i=M(t);if(e){var r=M(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return b(t)}(this,n)}}function b(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t){var e="function"==typeof Map?new Map:void 0;return(k=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return _(t,arguments,M(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),O(n,t)})(t)}function _(t,e,n){return(_=E()?Reflect.construct.bind():function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&O(r,n.prototype),r}).apply(null,arguments)}function E(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function O(t,e){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||C(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],c=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);c=!0);}catch(t){u=!0,r=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(t,e)||C(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){if(t){if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,e)}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}/*!
 * PhotoSphereViewer 5.4.4
 * @copyright 2014-2015 Jérémy Heleine
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var I=Object.defineProperty,S=function(t,e){for(var n in e)I(t,n,{get:e[n],enumerable:!0})},R={};S(R,{ACTIONS:function(){return X},ANIMATION_MIN_DURATION:function(){return A},CAPTURE_EVENTS_CLASS:function(){return Y},CTRLZOOM_TIMEOUT:function(){return U},DBLCLICK_DELAY:function(){return D},DEFAULT_TRANSITION:function(){return H},EASINGS:function(){return K},ICONS:function(){return G},IDS:function(){return Z},INERTIA_WINDOW:function(){return F},KEY_CODES:function(){return B},LONGTOUCH_DELAY:function(){return N},MOVE_THRESHOLD:function(){return z},SPHERE_RADIUS:function(){return V},TWOFINGERSOVERLAY_DELAY:function(){return j},VIEWER_DATA:function(){return W}});var H=1500,A=500,z=4,D=300,N=500,j=100,U=2e3,F=300,V=10,W="photoSphereViewer",Y="psv--capture-event",X=((i=X||{}).ROTATE_UP="ROTATE_UP",i.ROTATE_DOWN="ROTATE_DOWN",i.ROTATE_RIGHT="ROTATE_RIGHT",i.ROTATE_LEFT="ROTATE_LEFT",i.ZOOM_IN="ZOOM_IN",i.ZOOM_OUT="ZOOM_OUT",i),Z={MENU:"menu",TWO_FINGERS:"twoFingers",CTRL_ZOOM:"ctrlZoom",ERROR:"error",DESCRIPTION:"description"},B={Enter:"Enter",Control:"Control",Escape:"Escape",Space:" ",PageUp:"PageUp",PageDown:"PageDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",Delete:"Delete",Plus:"+",Minus:"-"},G={arrow:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="40 40 432 432"><g transform="rotate(0, 256, 256)"><path fill="currentColor" d="M425.23 210.55H227.39a5 5 0 01-3.53-8.53l56.56-56.57a45.5 45.5 0 000-64.28 45.15 45.15 0 00-32.13-13.3 45.15 45.15 0 00-32.14 13.3L41.32 256l174.83 174.83a45.15 45.15 0 0032.14 13.3 45.15 45.15 0 0032.13-13.3 45.5 45.5 0 000-64.28l-56.57-56.57a5 5 0 013.54-8.53h197.84c25.06 0 45.45-20.39 45.45-45.45s-20.4-45.45-45.45-45.45z"/></g><!-- Created by Flatart from the Noun Project --></svg>\n',close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g fill="currentColor" transform=" translate(50, 50) rotate(45)"><rect x="-5" y="-65" width="10" height="130"/><rect x="-65" y="-5" width="130" height="10"/></g></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M83.3 35.6h-17V3H32.2v32.6H16.6l33.6 32.7 33-32.7z"/><path fill="currentColor" d="M83.3 64.2v16.3H16.6V64.2H-.1v32.6H100V64.2H83.3z"/><!--Created by Michael Zenaty from the Noun Project--></svg>\n',fullscreenIn:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M100 40H87.1V18.8h-21V6H100zM100 93.2H66V80.3h21.1v-21H100zM34 93.2H0v-34h12.9v21.1h21zM12.9 40H0V6h34v12.9H12.8z"/><!--Created by Garrett Knoll from the Noun Project--></svg>\n',fullscreenOut:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M66 7h13v21h21v13H66zM66 60.3h34v12.9H79v21H66zM0 60.3h34v34H21V73.1H0zM21 7h13v34H0V28h21z"/><!--Created by Garrett Knoll from the Noun Project--></svg>\n',info:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><path fill="currentColor" d="M28.3 26.1c-1 2.6-1.9 4.8-2.6 7-2.5 7.4-5 14.7-7.2 22-1.3 4.4.5 7.2 4.3 7.8 1.3.2 2.8.2 4.2-.1 8.2-2 11.9-8.6 15.7-15.2l-2.2 2a18.8 18.8 0 0 1-7.4 5.2 2 2 0 0 1-1.6-.2c-.2-.1 0-1 0-1.4l.8-1.8L41.9 28c.5-1.4.9-3 .7-4.4-.2-2.6-3-4.4-6.3-4.4-8.8.2-15 4.5-19.5 11.8-.2.3-.2.6-.3 1.3 3.7-2.8 6.8-6.1 11.8-6.2z"/><circle fill="currentColor" cx="39.3" cy="9.2" r="8.2"/><!--Created by Arafat Uddin from the Noun Project--></svg>\n',menu:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 10 80 80"><g fill="currentColor"><circle r="10" cx="20" cy="20"/><circle r="10" cx="50" cy="20"/><circle r="10" cx="80" cy="20"/><circle r="10" cx="20" cy="50"/><circle r="10" cx="50" cy="50"/><circle r="10" cx="80" cy="50"/><circle r="10" cx="20" cy="80"/><circle r="10" cx="50" cy="80"/><circle r="10" cx="80" cy="80"/></g><!-- Created by Richard Kun\xe1k from the Noun Project--></svg>\n',zoomIn:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M8.728 4.009H6.744v2.737H4.006V8.73h2.738v2.736h1.984V8.73h2.737V6.746H8.728z"/><!--Created by Ryan Canning from the Noun Project--></svg>\n',zoomOut:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M4.006 6.746h7.459V8.73H4.006z"/><!--Created by Ryan Canning from the Noun Project--></svg>\n'},K={linear:function(t){return t},inQuad:function(t){return t*t},outQuad:function(t){return t*(2-t)},inOutQuad:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},inQuart:function(t){return t*t*t*t},outQuart:function(t){return 1- --t*t*t*t},inOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return 1+--t*t*t*t*t},inOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},inSine:function(t){return 1-Math.cos(t*(Math.PI/2))},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return .5-.5*Math.cos(Math.PI*t)},inExpo:function(t){return Math.pow(2,10*(t-1))},outExpo:function(t){return 1-Math.pow(2,-10*t)},inOutExpo:function(t){return(t=2*t-1)<0?.5*Math.pow(2,10*t):1-.5*Math.pow(2,-10*t)},inCirc:function(t){return 1-Math.sqrt(1-t*t)},outCirc:function(t){return Math.sqrt(1-(t-1)*(t-1))},inOutCirc:function(t){return(t*=2)<1?.5-.5*Math.sqrt(1-t*t):.5+.5*Math.sqrt(1-(t-=2)*t)}},q={};function $(t,e){var n=t%e;return n<0&&(n+=e),n}function Q(t){return t.reduce(function(t,e){return t+e},0)}function J(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function tt(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function te(t,e){return[0,2*Math.PI,-(2*Math.PI)].reduce(function(n,i){var r=e-t+i;return Math.abs(r)<Math.abs(n)?r:n},1/0)}function tn(t,e){return Math.acos(Math.cos(t.pitch)*Math.cos(e.pitch)*Math.cos(t.yaw-e.yaw)+Math.sin(t.pitch)*Math.sin(e.pitch))}function ti(t,e){var n=x(t,2),i=n[0],r=n[1],o=x(e,2),a=o[0],s=o[1];i-a>Math.PI?i-=2*Math.PI:i-a<-Math.PI&&(i+=2*Math.PI);var c=(a-i)*Math.cos((r+s)/2),u=s-r;return Math.sqrt(c*c+u*u)}function tr(t){return"string"==typeof t?t.match(/^[a-z]/i)?document.getElementById(t):document.querySelector(t):t}function to(t,e,n){void 0===n?t.classList.toggle(e):n?t.classList.add(e):n||t.classList.remove(e)}function ta(t,e){var n;(n=t.classList).add.apply(n,L(e.split(" ")))}function ts(t,e){var n;(n=t.classList).remove.apply(n,L(e.split(" ")))}function tc(t,e){var n=t;do{if(n===e)return!0;n=n.parentElement}while(n);return!1}function tu(t,e){if(!(null!=t&&t.matches))return null;var n=t;do{if(n.matches(e))return n;n=n.parentElement}while(n);return null}function tl(t){for(var e=0,n=0,i=t;i;)e+=i.offsetLeft-i.scrollLeft+i.clientLeft,n+=i.offsetTop-i.scrollTop+i.clientTop,i=i.offsetParent;return{x:e,y:n}}function th(t,e){return window.getComputedStyle(t,null)[e]}function td(t,e){return window.getComputedStyle(t).getPropertyValue(e)}function tv(t){if(t.touches.length<2)return null;var e={x:t.touches[0].clientX,y:t.touches[0].clientY},n={x:t.touches[1].clientX,y:t.touches[1].clientY};return{distance:J(e,n),angle:tt(e,n),center:{x:(e.x+n.x)/2,y:(e.y+n.y)/2}}}function tp(t){return(document.fullscreenElement||document.webkitFullscreenElement)===t}function tf(t){(t.requestFullscreen||t.webkitRequestFullscreen).call(t)}function tm(){(document.exitFullscreen||document.webkitExitFullscreen).call(document)}function ty(t){return t.replace(/[A-Z](?:(?=[^A-Z])|[A-Z]*(?=[A-Z][^A-Z]|$))/g,function(t,e){return(e>0?"-":"")+t.toLowerCase()})}function tw(t,e){var n=!1;return function(){for(var i=this,r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n||(n=!0,setTimeout(function(){t.apply(i,o),n=!1},e))}}function tg(t){if("object"!==T(t)||null===t||"[object Object]"!==Object.prototype.toString.call(t))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function tb(t,e){return function t(n,i){return Array.isArray(i)?(n&&Array.isArray(n)?n.length=0:n=[],i.forEach(function(e,i){n[i]=t(null,e)})):"object"===T(i)?((!n||Array.isArray(n))&&(n={}),Object.keys(i).forEach(function(r){"object"===T(i[r])&&i[r]&&tg(i[r])?i[r]!==e&&(n[r]?t(n[r],i[r]):n[r]=t(null,i[r])):n[r]=i[r]})):n=i,n}(t,e)}function tk(t){return tb(null,t)}function t_(t){return!t||0===Object.keys(t).length&&t.constructor===Object}function tE(t){return null==t}function tO(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0;i<e.length;i++){var r=e[i];if(!tE(r))return r}return null}function tM(t){return"object"===T(t)&&null!==t}S(q,{Animation:function(){return tq},Dynamic:function(){return t$},MultiDynamic:function(){return tQ},PressHandler:function(){return tJ},Slider:function(){return t1},SliderDirection:function(){return t0},addClasses:function(){return ta},angle:function(){return tt},applyEulerInverse:function(){return tB},checkStylesheet:function(){return tK},cleanCssPosition:function(){return tU},clone:function(){return tk},createTexture:function(){return tX},cssPositionIsOrdered:function(){return tF},dasherize:function(){return ty},deepEqual:function(){return function t(e,n){if(e===n)return!0;if(!(tM(e)&&tM(n))||Object.keys(e).length!==Object.keys(n).length)return!1;for(var i=0,r=Object.keys(e);i<r.length;i++){var o=r[i];if(!t(e[o],n[o]))return!1}return!0}},deepmerge:function(){return tb},distance:function(){return J},exitFullscreen:function(){return tm},firstNonNull:function(){return tO},getAbortError:function(){return tC},getAngle:function(){return tn},getClosest:function(){return tu},getConfigParser:function(){return tG},getElement:function(){return tr},getPosition:function(){return tl},getShortestArc:function(){return te},getStyle:function(){return th},getStyleProperty:function(){return td},getTouchData:function(){return tv},getXMPValue:function(){return tR},greatArcDistance:function(){return ti},hasParent:function(){return tc},invertResolvableBoolean:function(){return tx},isAbortError:function(){return tP},isEmpty:function(){return t_},isExtendedPosition:function(){return tS},isFullscreenEnabled:function(){return tp},isNil:function(){return tE},isPlainObject:function(){return tg},logWarn:function(){return tI},parseAngle:function(){return tY},parsePoint:function(){return tj},parseSpeed:function(){return tV},removeClasses:function(){return ts},requestFullscreen:function(){return tf},resolveBoolean:function(){return tL},speedToDuration:function(){return tW},sum:function(){return Q},throttle:function(){return tw},toggleClass:function(){return to},wrap:function(){return $}});var tT=function(t){w(n,t);var e=g(n);function n(t){var i,r;return y(this,n),(r=e.call(this,t)).name="PSVError",null===(i=Error.captureStackTrace)||void 0===i||i.call(Error,b(r),n),r}return f(n)}(k(Error));function tL(t,e){tg(t)?(e(t.initial,!0),t.promise.then(function(t){return e(t,!1)})):e(t,!0)}function tx(t){return{initial:!t.initial,promise:t.promise.then(function(t){return!t})}}function tC(){var t=Error("Loading was aborted.");return t.name="AbortError",t}function tP(t){return(null==t?void 0:t.name)==="AbortError"}function tI(t){console.warn("PhotoSphereViewer: ".concat(t))}function tS(t){return!!t&&[["textureX","textureY"],["yaw","pitch"]].some(function(e){var n=x(e,2),i=n[0],r=n[1];return void 0!==t[i]&&void 0!==t[r]})}function tR(t,e){var n=t.match("<GPano:"+e+">(.*)</GPano:"+e+">");if(null!==n){var i=parseInt(n[1],10);return isNaN(i)?null:i}if(null!==(n=t.match("GPano:"+e+'="(.*?)"'))){var r=parseInt(n[1],10);return isNaN(r)?null:r}return null}var tH={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},tA=["left","center","right"],tz=["top","center","bottom"],tD=[].concat(tA,tz),tN="center";function tj(t){if(!t)return{x:.5,y:.5};if("object"===T(t))return t;var e=t.toLocaleLowerCase().split(" ").slice(0,2);1===e.length&&(e=tH[e[0]]?[e[0],tN]:[e[0],e[0]]);var n="left"!==e[1]&&"right"!==e[1]&&"top"!==e[0]&&"bottom"!==e[0];e=e.map(function(t){return tH[t]||t}),n||e.reverse();var i=e.join(" ").match(/^([0-9.]+)% ([0-9.]+)%$/);return i?{x:parseFloat(i[1])/100,y:parseFloat(i[2])/100}:{x:.5,y:.5}}function tU(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{allowCenter:!0,cssOrder:!0},n=e.allowCenter,i=e.cssOrder;return t?("string"==typeof t&&(t=t.split(" ")),1===t.length&&(t[0]===tN?t=[tN,tN]:-1!==tA.indexOf(t[0])?t=[tN,t[0]]:-1!==tz.indexOf(t[0])&&(t=[t[0],tN])),2!==t.length||-1===tD.indexOf(t[0])||-1===tD.indexOf(t[1]))?(tI("Unparsable position ".concat(t)),null):n||t[0]!==tN||t[1]!==tN?(i&&!tF(t)&&(t=[t[1],t[0]]),t[1]===tN&&-1!==tA.indexOf(t[0])&&(t=[tN,t[0]]),t[0]===tN&&-1!==tz.indexOf(t[1])&&(t=[t[1],tN]),t):(tI("Invalid position center center"),null):null}function tF(t){return -1!==tz.indexOf(t[0])&&-1!==tA.indexOf(t[1])}function tV(t){var e;if("string"==typeof t){var n=t.toString().trim(),i=parseFloat(n.replace(/^(-?[0-9]+(?:\.[0-9]*)?).*$/,"$1")),r=n.replace(/^-?[0-9]+(?:\.[0-9]*)?(.*)$/,"$1").trim();switch(r.match(/(pm|per minute)$/)&&(i/=60),r){case"dpm":case"degrees per minute":case"dps":case"degrees per second":e=a.M8C.degToRad(i);break;case"rdpm":case"radians per minute":case"rdps":case"radians per second":e=i;break;case"rpm":case"revolutions per minute":case"rps":case"revolutions per second":e=i*Math.PI*2;break;default:throw new tT('Unknown speed unit "'.concat(r,'"'))}}else e=t;return e}function tW(t,e){return"number"!=typeof t?e/Math.abs(tV(t))*1e3:Math.abs(t)}function tY(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;if("string"==typeof t){var r=t.toLowerCase().trim().match(/^(-?[0-9]+(?:\.[0-9]*)?)(.*)$/);if(!r)throw new tT('Unknown angle "'.concat(t,'"'));var o=parseFloat(r[1]),s=r[2];if(s)switch(s){case"deg":case"degs":e=a.M8C.degToRad(o);break;case"rad":case"rads":e=o;break;default:throw new tT('Unknown angle unit "'.concat(s,'"'))}else e=o}else if("number"!=typeof t||isNaN(t))throw new tT('Unknown angle "'.concat(t,'"'));else e=t;return e=$(n?e+Math.PI:e,2*Math.PI),n?a.M8C.clamp(e-Math.PI,-Math.PI/(i?2:1),Math.PI/(i?2:1)):e}function tX(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new a.xEZ(t);return n.needsUpdate=!0,n.minFilter=e?a.D1R:a.wem,n.generateMipmaps=e,n.anisotropy=e?2:1,n}var tZ=new a._fP;function tB(t,e){tZ.setFromEuler(e).invert(),t.applyQuaternion(tZ)}function tG(t,e){var n=function(n){if(!n)return tk(t);for(var i=tk(d(d({},t),n)),r={},o=0,a=Object.entries(i);o<a.length;o++){var s=x(a[o],2),c=s[0],u=s[1];if(e&&c in e)u=e[c](u,{rawConfig:i,defValue:t[c]});else if(!(c in t)){tI("Unknown option ".concat(c));continue}r[c]=u}return r};return n.defaults=t,n.parsers=e||{},n}function tK(t,e){"true"!==td(t,"--psv-".concat(e,"-loaded"))&&console.error('PhotoSphereViewer: stylesheet "@photo-sphere-viewer/'.concat(e,'/index.css" is not loaded'))}var tq=function(){function t(e){var n=this;y(this,t),this.easing=K.linear,this.callbacks=[],this.resolved=!1,this.cancelled=!1,this.options=e,e?(e.easing&&(this.easing="function"==typeof e.easing?e.easing:K[e.easing]||K.linear),this.delayTimeout=setTimeout(function(){n.delayTimeout=void 0,n.animationFrame=window.requestAnimationFrame(function(t){return n.__run(t)})},e.delay||0)):this.resolved=!0}return f(t,[{key:"__run",value:function(t){var e=this;if(!this.cancelled){this.start||(this.start=t);var n=(t-this.start)/this.options.duration,i={};if(n<1){for(var r=0,o=Object.entries(this.options.properties);r<o.length;r++){var a=x(o[r],2),s=a[0],c=a[1];if(c){var u=c.start+(c.end-c.start)*this.easing(n);i[s]=u}}this.options.onTick(i,n),this.animationFrame=window.requestAnimationFrame(function(t){return e.__run(t)})}else{for(var l=0,h=Object.entries(this.options.properties);l<h.length;l++){var d=x(h[l],2),v=d[0],p=d[1];p&&(i[v]=p.end)}this.options.onTick(i,1),this.__resolve(!0),this.animationFrame=void 0}}}},{key:"__resolve",value:function(t){t?this.resolved=!0:this.cancelled=!0,this.callbacks.forEach(function(e){return e(t)}),this.callbacks.length=0}},{key:"then",value:function(t){var e=this;return this.resolved||this.cancelled?Promise.resolve(this.resolved).then(t):new Promise(function(t){e.callbacks.push(t)}).then(t)}},{key:"cancel",value:function(){this.cancelled||this.resolved||(this.__resolve(!1),this.delayTimeout&&(window.clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.animationFrame&&(window.cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0))}}]),t}(),t$=function(){function t(e,n){if(y(this,t),this.fn=e,this.mode=0,this.speed=0,this.speedMult=0,this.currentSpeed=0,this.target=0,this.__current=0,this.min=n.min,this.max=n.max,this.wrap=n.wrap,this.current=n.defaultValue,this.wrap&&0!==this.min)throw new tT("invalid config");this.fn&&this.fn(this.current)}return f(t,[{key:"current",get:function(){return this.__current},set:function(t){this.__current=t}},{key:"setSpeed",value:function(t){this.speed=t}},{key:"goto",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.mode=2,this.target=this.wrap?$(t,this.max):a.M8C.clamp(t,this.min,this.max),this.speedMult=e}},{key:"step",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;0===e?this.setValue(this.current+t):(2!==this.mode&&(this.target=this.current),this.goto(this.target+t,e))}},{key:"roll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.mode=1,this.target=t?-1/0:1/0,this.speedMult=e}},{key:"stop",value:function(){this.mode=0}},{key:"setValue",value:function(t){return this.target=this.wrap?$(t,this.max):a.M8C.clamp(t,this.min,this.max),this.mode=0,this.currentSpeed=0,this.target!==this.current&&(this.current=this.target,this.fn&&this.fn(this.current),!0)}},{key:"update",value:function(t){if(2===this.mode){this.wrap&&Math.abs(this.target-this.current)>this.max/2&&(this.current=this.current<this.target?this.current+this.max:this.current-this.max);var e=this.currentSpeed*this.currentSpeed/(this.speed*this.speedMult*4);Math.abs(this.target-this.current)<=e&&(this.mode=0)}var n=0===this.mode?0:this.speed*this.speedMult;this.target<this.current&&(n=-n),this.currentSpeed<n?this.currentSpeed=Math.min(n,this.currentSpeed+t/1e3*this.speed*this.speedMult*2):this.currentSpeed>n&&(this.currentSpeed=Math.max(n,this.currentSpeed-t/1e3*this.speed*this.speedMult*2));var i=null;return this.current>this.target&&this.currentSpeed?i=Math.max(this.target,this.current+this.currentSpeed*t/1e3):this.current<this.target&&this.currentSpeed&&(i=Math.min(this.target,this.current+this.currentSpeed*t/1e3)),null!==i&&(i=this.wrap?$(i,this.max):a.M8C.clamp(i,this.min,this.max))!==this.current&&(this.current=i,this.fn&&this.fn(this.current),!0)}}]),t}(),tQ=function(){function t(e,n){y(this,t),this.fn=e,this.dynamics=n,this.fn&&this.fn(this.current)}return f(t,[{key:"current",get:function(){return Object.entries(this.dynamics).reduce(function(t,e){var n=x(e,2),i=n[0],r=n[1];return t[i]=r.current,t},{})}},{key:"setSpeed",value:function(t){for(var e=0,n=Object.values(this.dynamics);e<n.length;e++)n[e].setSpeed(t)}},{key:"goto",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=Object.entries(t);n<i.length;n++){var r=x(i[n],2),o=r[0],a=r[1];this.dynamics[o].goto(a,e)}}},{key:"step",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0===n)this.setValue(Object.keys(t).reduce(function(n,i){return n[i]=t[i]+e.dynamics[i].current,n},{}));else for(var i=0,r=Object.entries(t);i<r.length;i++){var o=x(r[i],2),a=o[0],s=o[1];this.dynamics[a].step(s,n)}}},{key:"roll",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=Object.entries(t);n<i.length;n++){var r=x(i[n],2),o=r[0],a=r[1];this.dynamics[o].roll(a,e)}}},{key:"stop",value:function(){for(var t=0,e=Object.values(this.dynamics);t<e.length;t++)e[t].stop()}},{key:"setValue",value:function(t){for(var e=!1,n=0,i=Object.entries(t);n<i.length;n++){var r=x(i[n],2),o=r[0],a=r[1];e=this.dynamics[o].setValue(a)||e}return e&&this.fn&&this.fn(this.current),e}},{key:"update",value:function(t){for(var e=!1,n=0,i=Object.values(this.dynamics);n<i.length;n++)e=i[n].update(t)||e;return e&&this.fn&&this.fn(this.current),e}}]),t}(),tJ=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;y(this,t),this.delay=e,this.time=0,this.delay=e}return f(t,[{key:"pending",get:function(){return 0!==this.time}},{key:"down",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.time=new Date().getTime()}},{key:"up",value:function(t){var e=this;this.time&&(Date.now()-this.time<this.delay?this.timeout=setTimeout(function(){t(),e.timeout=void 0,e.time=0},this.delay):(t(),this.time=0))}}]),t}(),t0=((r=t0||{}).VERTICAL="VERTICAL",r.HORIZONTAL="HORIZONTAL",r),t1=function(){function t(e,n,i){y(this,t),this.container=e,this.direction=n,this.listener=i,this.mousedown=!1,this.mouseover=!1,this.container.addEventListener("click",this),this.container.addEventListener("mousedown",this),this.container.addEventListener("mouseenter",this),this.container.addEventListener("mouseleave",this),this.container.addEventListener("touchstart",this),this.container.addEventListener("mousemove",this,!0),this.container.addEventListener("touchmove",this,!0),window.addEventListener("mouseup",this),window.addEventListener("touchend",this)}return f(t,[{key:"isVertical",get:function(){return"VERTICAL"===this.direction}},{key:"isHorizontal",get:function(){return"HORIZONTAL"===this.direction}},{key:"destroy",value:function(){window.removeEventListener("mouseup",this),window.removeEventListener("touchend",this)}},{key:"handleEvent",value:function(t){switch(t.type){case"click":t.stopPropagation();break;case"mousedown":this.__onMouseDown(t);break;case"mouseenter":this.__onMouseEnter(t);break;case"mouseleave":this.__onMouseLeave(t);break;case"touchstart":this.__onTouchStart(t);break;case"mousemove":this.__onMouseMove(t);break;case"touchmove":this.__onTouchMove(t);break;case"mouseup":this.__onMouseUp(t);break;case"touchend":this.__onTouchEnd(t)}}},{key:"__onMouseDown",value:function(t){this.mousedown=!0,this.__update(t.clientX,t.clientY,!0)}},{key:"__onMouseEnter",value:function(t){this.mouseover=!0,this.__update(t.clientX,t.clientY,!0)}},{key:"__onTouchStart",value:function(t){this.mouseover=!0,this.mousedown=!0;var e=t.changedTouches[0];this.__update(e.clientX,e.clientY,!0)}},{key:"__onMouseMove",value:function(t){(this.mousedown||this.mouseover)&&(t.stopPropagation(),this.__update(t.clientX,t.clientY,!0))}},{key:"__onTouchMove",value:function(t){if(this.mousedown||this.mouseover){t.stopPropagation();var e=t.changedTouches[0];this.__update(e.clientX,e.clientY,!0)}}},{key:"__onMouseUp",value:function(t){this.mousedown&&(this.mousedown=!1,this.__update(t.clientX,t.clientY,!1))}},{key:"__onMouseLeave",value:function(t){this.mouseover&&(this.mouseover=!1,this.__update(t.clientX,t.clientY,!0))}},{key:"__onTouchEnd",value:function(t){if(this.mousedown){this.mouseover=!1,this.mousedown=!1;var e=t.changedTouches[0];this.__update(e.clientX,e.clientY,!1)}}},{key:"__update",value:function(t,e,n){var i=this.container.getBoundingClientRect(),r=this.isVertical?e:t,o=i[this.isVertical?"bottom":"left"],a=i[this.isVertical?"height":"width"];this.listener({value:Math.abs((o-r)/a),click:!n,mousedown:this.mousedown,mouseover:this.mouseover,cursor:{clientX:t,clientY:e}})}}]),t}(),t2={};S(t2,{BeforeAnimateEvent:function(){return t7},BeforeRenderEvent:function(){return t9},BeforeRotateEvent:function(){return ee},ClickEvent:function(){return ei},ConfigChangedEvent:function(){return eo},DoubleClickEvent:function(){return es},FullscreenEvent:function(){return eu},HideNotificationEvent:function(){return eh},HideOverlayEvent:function(){return ev},HidePanelEvent:function(){return ef},HideTooltipEvent:function(){return ey},KeypressEvent:function(){return eg},LoadProgressEvent:function(){return ek},ObjectEnterEvent:function(){return eG},ObjectEvent:function(){return eZ},ObjectHoverEvent:function(){return eQ},ObjectLeaveEvent:function(){return eq},PanoramaErrorEvent:function(){return eM},PanoramaLoadedEvent:function(){return eE},PositionUpdatedEvent:function(){return eL},ReadyEvent:function(){return eC},RenderEvent:function(){return eI},ShowNotificationEvent:function(){return eR},ShowOverlayEvent:function(){return eA},ShowPanelEvent:function(){return eD},ShowTooltipEvent:function(){return ej},SizeUpdatedEvent:function(){return eF},StopAllEvent:function(){return eW},ViewerEvent:function(){return t4},ZoomUpdatedEvent:function(){return eX}});var t3=function(t){w(n,t);var e=g(n);function n(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y(this,n),e.call(this,t,{cancelable:i})}return f(n)}(k(Event)),t5=function(t){w(n,t);var e=g(n);function n(){return y(this,n),e.apply(this,arguments)}return f(n,[{key:"dispatchEvent",value:function(t){return l(M(n.prototype),"dispatchEvent",this).call(this,t)}},{key:"addEventListener",value:function(t,e,i){l(M(n.prototype),"addEventListener",this).call(this,t,e,i)}},{key:"removeEventListener",value:function(t,e,i){l(M(n.prototype),"removeEventListener",this).call(this,t,e,i)}}]),n}(k(EventTarget)),t4=function(t){w(n,t);var e=g(n);function n(){return y(this,n),e.apply(this,arguments)}return f(n)}(t3),t8=function(t){w(n,t);var e=g(n);function n(t,i){var r;return y(this,n),(r=e.call(this,n.type,!0)).position=t,r.zoomLevel=i,r}return f(n)}(t4);t8.type="before-animate";var t7=t8,t6=function(t){w(n,t);var e=g(n);function n(t,i){var r;return y(this,n),(r=e.call(this,n.type)).timestamp=t,r.elapsed=i,r}return f(n)}(t4);t6.type="before-render";var t9=t6,et=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type,!0)).position=t,i}return f(n)}(t4);et.type="before-rotate";var ee=et,en=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).data=t,i}return f(n)}(t4);en.type="click";var ei=en,er=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).options=t,i}return f(n,[{key:"containsOptions",value:function(){for(var t=this,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.some(function(e){return t.options.includes(e)})}}]),n}(t4);er.type="config-changed";var eo=er,ea=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).data=t,i}return f(n)}(t4);ea.type="dblclick";var es=ea,ec=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).fullscreenEnabled=t,i}return f(n)}(t4);ec.type="fullscreen";var eu=ec,el=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).notificationId=t,i}return f(n)}(t4);el.type="hide-notification";var eh=el,ed=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).overlayId=t,i}return f(n)}(t4);ed.type="hide-overlay";var ev=ed,ep=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).panelId=t,i}return f(n)}(t4);ep.type="hide-panel";var ef=ep,em=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).tooltipData=t,i}return f(n)}(t4);em.type="hide-tooltip";var ey=em,ew=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type,!0)).key=t,i}return f(n)}(t4);ew.type="key-press";var eg=ew,eb=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).progress=t,i}return f(n)}(t4);eb.type="load-progress";var ek=eb,e_=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).data=t,i}return f(n)}(t4);e_.type="panorama-loaded";var eE=e_,eO=function(t){w(n,t);var e=g(n);function n(t,i){var r;return y(this,n),(r=e.call(this,n.type)).panorama=t,r.error=i,r}return f(n)}(t4);eO.type="panorama-error";var eM=eO,eT=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).position=t,i}return f(n)}(t4);eT.type="position-updated";var eL=eT,ex=function(t){w(n,t);var e=g(n);function n(){return y(this,n),e.call(this,n.type)}return f(n)}(t4);ex.type="ready";var eC=ex,eP=function(t){w(n,t);var e=g(n);function n(){return y(this,n),e.call(this,n.type)}return f(n)}(t4);eP.type="render";var eI=eP,eS=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).notificationId=t,i}return f(n)}(t4);eS.type="show-notification";var eR=eS,eH=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).overlayId=t,i}return f(n)}(t4);eH.type="show-overlay";var eA=eH,ez=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).panelId=t,i}return f(n)}(t4);ez.type="show-panel";var eD=ez,eN=function(t){w(n,t);var e=g(n);function n(t,i){var r;return y(this,n),(r=e.call(this,n.type)).tooltip=t,r.tooltipData=i,r}return f(n)}(t4);eN.type="show-tooltip";var ej=eN,eU=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).size=t,i}return f(n)}(t4);eU.type="size-updated";var eF=eU,eV=function(t){w(n,t);var e=g(n);function n(){return y(this,n),e.call(this,n.type)}return f(n)}(t4);eV.type="stop-all";var eW=eV,eY=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,n.type)).zoomLevel=t,i}return f(n)}(t4);eY.type="zoom-updated";var eX=eY,eZ=function(t){w(n,t);var e=g(n);function n(t,i,r,o,a){var s;return y(this,n),(s=e.call(this,t)).originalEvent=i,s.object=r,s.viewerPoint=o,s.userDataKey=a,s}return f(n)}(t4),eB=function(t){w(n,t);var e=g(n);function n(t,i,r,o){return y(this,n),e.call(this,n.type,t,i,r,o)}return f(n)}(eZ);eB.type="enter-object";var eG=eB,eK=function(t){w(n,t);var e=g(n);function n(t,i,r,o){return y(this,n),e.call(this,n.type,t,i,r,o)}return f(n)}(eZ);eK.type="leave-object";var eq=eK,e$=function(t){w(n,t);var e=g(n);function n(t,i,r,o){return y(this,n),e.call(this,n.type,t,i,r,o)}return f(n)}(eZ);e$.type="hover-object";var eQ=e$,eJ=function(){function t(e){y(this,t),this.viewer=e}return f(t,[{key:"init",value:function(){}},{key:"destroy",value:function(){}},{key:"supportsTransition",value:function(t){return!1}},{key:"supportsPreload",value:function(t){return!1}}],[{key:"createOverlayMaterial",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.additionalUniforms,r=n.overrideVertexShader;return new a.jyz({uniforms:d(d({},i),{},(v(e={},t.OVERLAY_UNIFORMS.panorama,{value:null}),v(e,t.OVERLAY_UNIFORMS.overlay,{value:null}),v(e,t.OVERLAY_UNIFORMS.globalOpacity,{value:1}),v(e,t.OVERLAY_UNIFORMS.overlayOpacity,{value:0}),e)),vertexShader:r||"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix *  modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D ".concat(t.OVERLAY_UNIFORMS.panorama,";\nuniform sampler2D ").concat(t.OVERLAY_UNIFORMS.overlay,";\nuniform float ").concat(t.OVERLAY_UNIFORMS.globalOpacity,";\nuniform float ").concat(t.OVERLAY_UNIFORMS.overlayOpacity,";\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 tColor1 = texture2D( ").concat(t.OVERLAY_UNIFORMS.panorama,", vUv );\n  vec4 tColor2 = texture2D( ").concat(t.OVERLAY_UNIFORMS.overlay,", vUv );\n  gl_FragColor = vec4(\n    mix( tColor1.rgb, tColor2.rgb, tColor2.a * ").concat(t.OVERLAY_UNIFORMS.overlayOpacity," ),\n    ").concat(t.OVERLAY_UNIFORMS.globalOpacity,"\n  );\n}")})}}]),t}();eJ.supportsDownload=!1,eJ.supportsOverlay=!1,eJ.OVERLAY_UNIFORMS={panorama:"panorama",overlay:"overlay",globalOpacity:"globalOpacity",overlayOpacity:"overlayOpacity"};var e0=eJ;function e1(t){if(t)for(var e=0,n=[["_",t]].concat(L(Object.entries(t)));e<n.length;e++){var i=x(n[e],2)[1];if(i.prototype instanceof e0)return i}return null}var e2="".concat(W,"_touchSupport"),e3={loaded:!1,pixelRatio:1,isWebGLSupported:!1,maxTextureWidth:0,isTouchEnabled:null,fullscreenEvent:null,__maxCanvasWidth:null,get maxCanvasWidth(){return null===this.__maxCanvasWidth&&(this.__maxCanvasWidth=function(t){var e=document.createElement("canvas"),n=e.getContext("2d");for(e.width=t,e.height=t/2;e.width>1024;){n.fillStyle="white",n.fillRect(0,0,1,1);try{if(n.getImageData(0,0,1,1).data[0]>0)return e.width}catch(t){}e.width/=2,e.height/=2}throw new tT("Unable to detect system capabilities")}(this.maxTextureWidth)),this.__maxCanvasWidth},load:function(){if(!this.loaded){var t,e,n,i,r=(t=document.createElement("canvas"),e=null,t.getContext&&["webgl2","webgl","experimental-webgl","moz-webgl","webkit-3d"].some(function(n){try{return e=t.getContext(n),null!==e}catch(t){return!1}})?e:null);this.pixelRatio=window.devicePixelRatio||1,this.isWebGLSupported=null!==r,this.maxTextureWidth=r?r.getParameter(r.MAX_TEXTURE_SIZE):0,this.isTouchEnabled=(n="ontouchstart"in window||navigator.maxTouchPoints>0,e2 in localStorage&&(n="true"===localStorage[e2]),i=new Promise(function(t){var e=function(){window.removeEventListener("mousedown",i),window.removeEventListener("touchstart",r),clearTimeout(o)},i=function(){e(),localStorage[e2]=!1,t(!1)},r=function(){e(),localStorage[e2]=!0,t(!0)};window.addEventListener("mousedown",i,!1),window.addEventListener("touchstart",r,!1);var o=setTimeout(function(){e(),localStorage[e2]=n,t(n)},1e4)}),{initial:n,promise:i}),this.fullscreenEvent="exitFullscreen"in document?"fullscreenchange":"webkitExitFullscreen"in document?"webkitfullscreenchange":null,this.loaded=!0}if(!e3.isWebGLSupported)throw new tT("WebGL is not supported.");if(0===e3.maxTextureWidth)throw new tT("Unable to detect system capabilities")}},e5=URL.createObjectURL(new Blob(["(",(function(){function t(t){return"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")")}function e(t,e){return{r:Math.round(t.r/2+e.r/2),g:Math.round(t.g/2+e.g/2),b:Math.round(t.b/2+e.b/2)}}function n(e,n,i,r,o){var a=e.createLinearGradient(n,0,i,0);return a.addColorStop(0,t(r)),a.addColorStop(1,t(o)),a}function i(t,e,n,i,r,o){o=Math.round(o);for(var a=0,s=0,c=0,u=0,l=t.getImageData(e,n,i,r),h=0;h<r;h+=o)for(var d=0;d<i;d+=o){var v=4*(h*i+d);a+=l.data[v],s+=l.data[v+1],c+=l.data[v+2],u++}return{r:a=Math.round(a/u),g:s=Math.round(s/u),b:c=Math.round(c/u)}}self.onmessage=function(r){var o=r.data.panoData,a=new OffscreenCanvas(o.fullWidth,o.fullHeight),s=a.getContext("2d"),c=new OffscreenCanvas(o.croppedWidth,o.croppedHeight);c.getContext("2d").putImageData(r.data.image,0,0),function(r,o,a){var s=a.fullHeight-a.croppedHeight-a.croppedY,c=a.fullWidth-a.croppedWidth-a.croppedX,u=a.croppedY+a.croppedHeight/2,l=r.width/32,h="blur(".concat(l,"px)"),d=r.getContext("2d");if(d.drawImage(o,a.croppedX,a.croppedY,a.croppedWidth,a.croppedHeight),a.croppedY>0){if(a.croppedX>0||c>0){d.filter="none";var v=i(d,a.croppedX,a.croppedY,10,10,2),p=i(d,r.width-c-11,a.croppedY,10,10,2),f=e(v,p);a.croppedX>0&&(d.fillStyle=n(d,0,a.croppedX,f,v),d.fillRect(-l,-l,a.croppedX+2*l,u+l)),c>0&&(d.fillStyle=n(d,r.width-c,r.width,p,f),d.fillRect(r.width-c-l,-l,c+2*l,u+l))}d.filter=h,d.drawImage(o,0,0,o.width,10,a.croppedX,-l,a.croppedWidth,a.croppedY+2*l),d.fillStyle=t(i(d,0,0,r.width,10,10)),d.fillRect(-l,-l,r.width+2*l,2*l)}if(s>0){if(a.croppedX>0||c>0){d.filter="none";var m=i(d,a.croppedX,r.height-s-1-10,10,10,2),y=i(d,r.width-c-1-10,r.height-s-1-10,10,10,2),w=e(m,y);a.croppedX>0&&(d.fillStyle=n(d,0,a.croppedX,w,m),d.fillRect(-l,u,a.croppedX+2*l,r.height-u+l)),c>0&&(d.fillStyle=n(d,r.width-c,r.width,y,w),d.fillRect(r.width-c-l,u,c+2*l,r.height-u+l))}d.filter=h,d.drawImage(o,0,o.height-10,o.width,10,a.croppedX,r.height-s-l,a.croppedWidth,s+2*l),d.fillStyle=t(i(d,0,r.height-1-10,r.width,10,10)),d.fillRect(-l,r.height-l,r.width+2*l,2*l)}a.croppedX>0&&(d.filter=h,d.drawImage(o,o.width-10,0,10,o.height,-l,a.croppedY,2*l,a.croppedHeight),d.drawImage(o,0,0,10,o.height,0,a.croppedY,a.croppedX+l,a.croppedHeight)),c>0&&(d.filter=h,d.drawImage(o,0,0,10,o.height,r.width-l,a.croppedY,2*l,a.croppedHeight),d.drawImage(o,o.width-10,0,10,o.height,r.width-c-l,a.croppedY,c+l,a.croppedHeight)),d.filter="none",d.drawImage(o,a.croppedX,a.croppedY,a.croppedWidth,a.croppedHeight)}(a,c,o),postMessage(s.getImageData(0,0,a.width,a.height))}}).toString(),")()"],{type:"application/javascript"})),e4=tG({backgroundColor:"#000",interpolateBackground:!1,resolution:64,useXmpData:!0,blur:!1},{resolution:function(t){if(!t||!a.M8C.isPowerOfTwo(t))throw new tT("EquirectangularAdapter resolution must be power of two");return t}}),e8=function(t){w(r,t);var e,n,i=g(r);function r(t,e){var n;return y(this,r),(n=i.call(this,t)).config=e4(e),tE(n.viewer.config.useXmpData)||(n.config.useXmpData=n.viewer.config.useXmpData),tE(n.viewer.config.canvasBackground)||(n.config.backgroundColor=n.viewer.config.canvasBackground),n.config.interpolateBackground&&(window.Worker?n.interpolationWorker=new Worker(e5):(tI("Web Worker API not available"),n.config.interpolateBackground=!1)),n.SPHERE_SEGMENTS=n.config.resolution,n.SPHERE_HORIZONTAL_SEGMENTS=n.SPHERE_SEGMENTS/2,n}return f(r,[{key:"supportsTransition",value:function(){return!0}},{key:"supportsPreload",value:function(){return!0}},{key:"destroy",value:function(){var t;null===(t=this.interpolationWorker)||void 0===t||t.terminate(),l(M(r.prototype),"destroy",this).call(this)}},{key:"loadTexture",value:(e=u(s().mark(function t(e,n){var i,r,o,a,c,u,l,h,d,v,p,f,m,y,w,g=this,b=arguments;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(v=b.length>2&&void 0!==b[2]?b[2]:this.config.useXmpData,!("string"!=typeof e)){t.next=3;break}return t.abrupt("return",Promise.reject(new tT("Invalid panorama url, are you using the right adapter?")));case 3:return t.next=5,this.viewer.textureLoader.loadFile(e,function(t){return g.viewer.loader.setProgress(t)},e);case 5:if(p=t.sent,!v){t.next=12;break}return t.next=9,this.loadXMP(p);case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=null;case 13:return f=t.t0,t.next=16,this.viewer.textureLoader.blobToImage(p);case 16:return m=t.sent,"function"==typeof n&&(n=n(m,f)),n||f||(n=this.__defaultPanoData(m)),((y={fullWidth:tO(null===(i=n)||void 0===i?void 0:i.fullWidth,null==f?void 0:f.fullWidth,m.width),fullHeight:tO(null===(r=n)||void 0===r?void 0:r.fullHeight,null==f?void 0:f.fullHeight,m.height),croppedWidth:tO(null===(o=n)||void 0===o?void 0:o.croppedWidth,null==f?void 0:f.croppedWidth,m.width),croppedHeight:tO(null===(a=n)||void 0===a?void 0:a.croppedHeight,null==f?void 0:f.croppedHeight,m.height),croppedX:tO(null===(c=n)||void 0===c?void 0:c.croppedX,null==f?void 0:f.croppedX,0),croppedY:tO(null===(u=n)||void 0===u?void 0:u.croppedY,null==f?void 0:f.croppedY,0),poseHeading:tO(null===(l=n)||void 0===l?void 0:l.poseHeading,null==f?void 0:f.poseHeading,0),posePitch:tO(null===(h=n)||void 0===h?void 0:h.posePitch,null==f?void 0:f.posePitch,0),poseRoll:tO(null===(d=n)||void 0===d?void 0:d.poseRoll,null==f?void 0:f.poseRoll,0)}).croppedWidth!==m.width||y.croppedHeight!==m.height)&&tI("Invalid panoData, croppedWidth/croppedHeight is not coherent with the loaded image.\n            panoData: ".concat(y.croppedWidth,"x").concat(y.croppedHeight,", image: ").concat(m.width,"x").concat(m.height)),Math.abs(y.fullWidth-2*y.fullHeight)>1&&(tI("Invalid panoData, fullWidth should be twice fullHeight"),y.fullWidth=2*y.fullHeight),y.croppedX+y.croppedWidth>y.fullWidth&&(tI("Invalid panoData, croppedX + croppedWidth > fullWidth"),y.croppedX=y.fullWidth-y.croppedWidth),y.croppedY+y.croppedHeight>y.fullHeight&&(tI("Invalid panoData, croppedY + croppedHeight > fullHeight"),y.croppedY=y.fullHeight-y.croppedHeight),w=this.createEquirectangularTexture(m,y),t.abrupt("return",{panorama:e,texture:w,panoData:y,cacheKey:e});case 26:case"end":return t.stop()}},t,this)})),function(t,n){return e.apply(this,arguments)})},{key:"loadXMP",value:(n=u(s().mark(function t(e){var n,i,r,o;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadBlobAsString(e);case 2:if(i=(n=t.sent).indexOf("<x:xmpmeta"),r=n.indexOf("</x:xmpmeta>"),o=n.substring(i,r),!(-1!==i&&-1!==r&&o.includes("GPano:"))){t.next=8;break}return t.abrupt("return",{fullWidth:tR(o,"FullPanoWidthPixels"),fullHeight:tR(o,"FullPanoHeightPixels"),croppedWidth:tR(o,"CroppedAreaImageWidthPixels"),croppedHeight:tR(o,"CroppedAreaImageHeightPixels"),croppedX:tR(o,"CroppedAreaLeftPixels"),croppedY:tR(o,"CroppedAreaTopPixels"),poseHeading:tR(o,"PoseHeadingDegrees"),posePitch:tR(o,"PosePitchDegrees"),poseRoll:tR(o,"PoseRollDegrees")});case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"loadBlobAsString",value:function(t){return new Promise(function(e,n){var i=new FileReader;i.onload=function(){return e(i.result)},i.onerror=n,i.readAsText(t)})}},{key:"createEquirectangularTexture",value:function(t,e){var n=this;if(this.config.blur||e.fullWidth>e3.maxTextureWidth||e.croppedWidth!==e.fullWidth||e.croppedHeight!==e.fullHeight){var i=Math.min(1,e3.maxCanvasWidth/e.fullWidth),r={fullWidth:e.fullWidth*i,fullHeight:e.fullHeight*i,croppedWidth:e.croppedWidth*i,croppedHeight:e.croppedHeight*i,croppedX:e.croppedX*i,croppedY:e.croppedY*i},o=document.createElement("canvas");o.width=r.fullWidth,o.height=r.fullHeight;var a=o.getContext("2d");this.config.backgroundColor&&(a.fillStyle=this.config.backgroundColor,a.fillRect(0,0,o.width,o.height)),this.config.blur&&(a.filter="blur(".concat(o.width/2048,"px)")),a.drawImage(t,r.croppedX,r.croppedY,r.croppedWidth,r.croppedHeight);var s=tX(o);return this.config.interpolateBackground&&(e.croppedWidth!==e.fullWidth||e.croppedHeight!==e.fullHeight)&&(this.interpolationWorker.postMessage({image:a.getImageData(r.croppedX,r.croppedY,r.croppedWidth,r.croppedHeight),panoData:r}),this.interpolationWorker.onmessage=function(t){a.putImageData(t.data,0,0),s.needsUpdate=!0,n.viewer.needsUpdate()}),s}return tX(t)}},{key:"createMesh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=new a.xo$(V*t,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS,-Math.PI/2).scale(-1,1,1),n=e0.createOverlayMaterial();return new a.Kj0(e,n)}},{key:"setTexture",value:function(t,e){this.__setUniform(t,e0.OVERLAY_UNIFORMS.panorama,e.texture)}},{key:"setOverlay",value:function(t,e,n){this.__setUniform(t,e0.OVERLAY_UNIFORMS.overlayOpacity,n),e?this.__setUniform(t,e0.OVERLAY_UNIFORMS.overlay,e.texture):this.__setUniform(t,e0.OVERLAY_UNIFORMS.overlay,null)}},{key:"setTextureOpacity",value:function(t,e){this.__setUniform(t,e0.OVERLAY_UNIFORMS.globalOpacity,e),t.material.transparent=e<1}},{key:"disposeTexture",value:function(t){var e;null===(e=t.texture)||void 0===e||e.dispose()}},{key:"__setUniform",value:function(t,e,n){t.material.uniforms[e].value=n}},{key:"__defaultPanoData",value:function(t){var e=Math.max(t.width,2*t.height),n=Math.round(e/2),i=Math.round((e-t.width)/2),r=Math.round((n-t.height)/2);return{fullWidth:e,fullHeight:n,croppedWidth:t.width,croppedHeight:t.height,croppedX:i,croppedY:r}}}]),r}(e0);e8.id="equirectangular",e8.supportsDownload=!0,e8.supportsOverlay=!0;var e7=function(){function t(e,n){y(this,t),this.parent=e,this.children=[],this.container=document.createElement("div"),this.state={visible:!0},this.viewer=e instanceof t?e.viewer:e,this.container.className=n.className||"",this.parent.children.push(this),this.parent.container.appendChild(this.container)}return f(t,[{key:"destroy",value:function(){this.parent.container.removeChild(this.container);var t=this.parent.children.indexOf(this);-1!==t&&this.parent.children.splice(t,1),this.children.slice().forEach(function(t){return t.destroy()}),this.children.length=0}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.isVisible();t?this.show():this.hide()}},{key:"hide",value:function(t){this.container.style.display="none",this.state.visible=!1}},{key:"show",value:function(t){this.container.style.display="",this.state.visible=!0}},{key:"isVisible",value:function(){return this.state.visible}}]),t}(),e6=tG({id:null,className:null,title:null,hoverScale:!1,collapsable:!1,tabbable:!0,icon:null,iconActive:null}),e9=function(t){w(n,t);var e=g(n);function n(t,i){var r;return y(this,n),(r=e.call(this,t,{className:"psv-button ".concat(i.hoverScale?"psv-button--hover-scale":""," ").concat(i.className||"")})).state={visible:!0,enabled:!0,supported:!0,collapsed:!1,active:!1,width:0},r.config=e6(i),r.config.id=r.constructor.id,i.icon&&r.__setIcon(i.icon),r.state.width=r.container.offsetWidth,r.config.title?r.container.title=r.config.title:r.id&&r.id in r.viewer.config.lang&&(r.container.title=r.viewer.config.lang[r.id]),i.tabbable&&(r.container.tabIndex=0),r.container.addEventListener("click",function(t){r.state.enabled&&r.onClick(),t.stopPropagation()}),r.container.addEventListener("keydown",function(t){t.key===B.Enter&&r.state.enabled&&(r.onClick(),t.stopPropagation())}),r}return f(n,[{key:"id",get:function(){return this.config.id}},{key:"title",get:function(){return this.container.title}},{key:"content",get:function(){return this.container.innerHTML}},{key:"width",get:function(){return this.state.width}},{key:"collapsable",get:function(){return this.config.collapsable}},{key:"show",value:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];!this.isVisible()&&(this.state.visible=!0,this.state.collapsed||(this.container.style.display=""),t&&this.viewer.navbar.autoSize())}},{key:"hide",value:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.isVisible()&&(this.state.visible=!1,this.container.style.display="none",t&&this.viewer.navbar.autoSize())}},{key:"checkSupported",value:function(){var t=this;tL(this.isSupported(),function(e,n){t.state&&(t.state.supported=e,n?e||t.hide():t.toggle(e))})}},{key:"autoSize",value:function(){}},{key:"isSupported",value:function(){return!0}},{key:"toggleActive",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.state.active;t!==this.state.active&&(this.state.active=t,to(this.container,"psv-button--active",this.state.active),this.config.iconActive&&this.__setIcon(this.state.active?this.config.iconActive:this.config.icon))}},{key:"disable",value:function(){this.container.classList.add("psv-button--disabled"),this.state.enabled=!1}},{key:"enable",value:function(){this.container.classList.remove("psv-button--disabled"),this.state.enabled=!0}},{key:"collapse",value:function(){this.state.collapsed=!0,this.container.style.display="none"}},{key:"uncollapse",value:function(){this.state.collapsed=!1,this.state.visible&&(this.container.style.display="")}},{key:"__setIcon",value:function(t){this.container.innerHTML=t,ta(this.container.querySelector("svg"),"psv-button-svg")}}]),n}(e7),nt=function(t){w(n,t);var e=g(n);function n(t,i){var r;return y(this,n),(r=e.call(this,t,{className:"psv-custom-button ".concat(i.className||""),hoverScale:!1,collapsable:!1!==i.collapsable,tabbable:!1!==i.tabbable,title:i.title})).customOnClick=i.onClick,i.id?r.config.id=i.id:r.config.id="psvButton-"+Math.random().toString(36).substring(2),i.content&&(r.container.innerHTML=i.content),r.state.width=r.container.offsetWidth,i.disabled&&r.disable(),!1===i.visible&&r.hide(),r}return f(n,[{key:"onClick",value:function(){var t;null===(t=this.customOnClick)||void 0===t||t.call(this,this.viewer)}}]),n}(e9),ne=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,t,{className:"psv-description-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:G.info})).mode=0,i.viewer.addEventListener(eh.type,b(i)),i.viewer.addEventListener(eR.type,b(i)),i.viewer.addEventListener(ef.type,b(i)),i.viewer.addEventListener(eD.type,b(i)),i.viewer.addEventListener(eo.type,b(i)),i}return f(n,[{key:"destroy",value:function(){this.viewer.removeEventListener(eh.type,this),this.viewer.removeEventListener(eR.type,this),this.viewer.removeEventListener(ef.type,this),this.viewer.removeEventListener(eD.type,this),this.viewer.removeEventListener(eo.type,this),l(M(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){if(t instanceof eo){t.containsOptions("description")&&this.autoSize(!0);return}if(this.mode){var e=!1;t instanceof eh?e=1===this.mode:t instanceof eR?e=1===this.mode&&t.notificationId!==Z.DESCRIPTION:t instanceof ef?e=2===this.mode:t instanceof eD&&(e=2===this.mode&&t.panelId!==Z.DESCRIPTION),e&&(this.toggleActive(!1),this.mode=0)}}},{key:"onClick",value:function(){this.mode?this.__close():this.__open()}},{key:"hide",value:function(t){l(M(n.prototype),"hide",this).call(this,t),this.mode&&this.__close()}},{key:"autoSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t){var e=this.viewer.navbar.getButton("caption",!1),n=e&&!e.isVisible(),i=!!this.viewer.config.description;n||i?this.show(!1):this.hide(!1)}}},{key:"__close",value:function(){switch(this.mode){case 1:this.viewer.notification.hide(Z.DESCRIPTION);break;case 2:this.viewer.panel.hide(Z.DESCRIPTION)}}},{key:"__open",value:function(){this.toggleActive(!0),this.viewer.config.description?(this.mode=2,this.viewer.panel.show({id:Z.DESCRIPTION,content:(this.viewer.config.caption?"<p>".concat(this.viewer.config.caption,"</p>"):"")+this.viewer.config.description})):(this.mode=1,this.viewer.notification.show({id:Z.DESCRIPTION,content:this.viewer.config.caption}))}}]),n}(e9);ne.id="description";var nn=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,t,{className:"psv-download-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:G.download})).viewer.addEventListener(eo.type,b(i)),i}return f(n,[{key:"destroy",value:function(){this.viewer.removeEventListener(eo.type,this),l(M(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){t instanceof eo&&t.containsOptions("downloadUrl")&&this.checkSupported()}},{key:"onClick",value:function(){var t=this,e=document.createElement("a");e.href=this.viewer.config.downloadUrl||this.viewer.config.panorama,e.href.startsWith("data:")&&!this.viewer.config.downloadName?e.download="panorama."+e.href.substring(0,e.href.indexOf(";")).split("/").pop():e.download=this.viewer.config.downloadName||e.href.split("/").pop(),e.target="_blank",this.viewer.container.appendChild(e),e.click(),setTimeout(function(){t.viewer.container.removeChild(e)},100)}},{key:"checkSupported",value:function(){this.viewer.adapter.constructor.supportsDownload||this.viewer.config.downloadUrl?this.show():this.hide()}}]),n}(e9);nn.id="download";var ni=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,t,{className:"psv-fullscreen-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:G.fullscreenIn,iconActive:G.fullscreenOut})).viewer.addEventListener(eu.type,b(i)),i}return f(n,[{key:"destroy",value:function(){this.viewer.removeEventListener(eu.type,this),l(M(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){t instanceof eu&&this.toggleActive(t.fullscreenEnabled)}},{key:"onClick",value:function(){this.viewer.toggleFullscreen()}}]),n}(e9);ni.id="fullscreen";var nr=function(t){w(n,t);var e=g(n);function n(t){var i,r;return y(this,n),(r=e.call(this,t,{className:"psv-menu-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:G.menu})).viewer.addEventListener(eD.type,b(r)),r.viewer.addEventListener(ef.type,b(r)),l((i=b(r),M(n.prototype)),"hide",i).call(i),r}return f(n,[{key:"destroy",value:function(){this.viewer.removeEventListener(eD.type,this),this.viewer.removeEventListener(ef.type,this),l(M(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){t instanceof eD?this.toggleActive(t.panelId===Z.MENU):t instanceof ef&&this.toggleActive(!1)}},{key:"onClick",value:function(){this.state.active?this.__hideMenu():this.__showMenu()}},{key:"hide",value:function(t){l(M(n.prototype),"hide",this).call(this,t),this.__hideMenu()}},{key:"show",value:function(t){l(M(n.prototype),"show",this).call(this,t),this.state.active&&this.__showMenu()}},{key:"__showMenu",value:function(){var t,e,n=this;this.viewer.panel.show({id:Z.MENU,content:(t=this.viewer.navbar.collapsed,e=this.viewer.config.lang.menu,'\n<div class="psv-panel-menu psv-panel-menu--stripped">\n  <h1 class="psv-panel-menu-title">'.concat(G.menu," ").concat(e,'</h1>\n  <ul class="psv-panel-menu-list">\n    ').concat(t.map(function(t){return'\n    <li data-psv-button="'.concat(t.id,'" class="psv-panel-menu-item" tabindex="0">\n      <span class="psv-panel-menu-item-icon">').concat(t.content,'</span>\n      <span class="psv-panel-menu-item-label">').concat(t.title,"</span>\n    </li>\n    ")}).join(""),"\n  </ul>\n</div>\n")),noMargin:!0,clickHandler:function(t){var e=t?tu(t,"li"):void 0,i=e?e.dataset.psvButton:void 0;i&&(n.viewer.navbar.getButton(i).onClick(),n.__hideMenu())}})}},{key:"__hideMenu",value:function(){this.viewer.panel.hide(Z.MENU)}}]),n}(e9);nr.id="menu";var no=function(t){w(n,t);var e=g(n);function n(t,i){var r;return y(this,n),(r=e.call(this,t,{className:"psv-move-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:function(t){var e=0;switch(t){case 0:e=90;break;case 1:e=-90;break;case 3:e=180;break;default:e=0}return G.arrow.replace("rotate(0","rotate(".concat(e))}(i)})).direction=i,r.handler=new tJ,r.container.addEventListener("mousedown",b(r)),r.container.addEventListener("keydown",b(r)),r.container.addEventListener("keyup",b(r)),r.viewer.container.addEventListener("mouseup",b(r)),r.viewer.container.addEventListener("touchend",b(r)),r}return f(n,[{key:"destroy",value:function(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),l(M(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){switch(t.type){case"mousedown":this.__onMouseDown();break;case"mouseup":case"touchend":this.__onMouseUp();break;case"keydown":t.key===B.Enter&&this.__onMouseDown();break;case"keyup":t.key===B.Enter&&this.__onMouseUp()}}},{key:"onClick",value:function(){}},{key:"isSupported",value:function(){return tx(e3.isTouchEnabled)}},{key:"__onMouseDown",value:function(){if(this.state.enabled){var t={};switch(this.direction){case 0:t.pitch=!1;break;case 1:t.pitch=!0;break;case 3:t.yaw=!1;break;default:t.yaw=!0}this.viewer.stopAll(),this.viewer.dynamics.position.roll(t),this.handler.down()}}},{key:"__onMouseUp",value:function(){var t=this;this.state.enabled&&this.handler.up(function(){t.viewer.dynamics.position.stop(),t.viewer.resetIdleTimer()})}}]),n}(e9);no.groupId="move";var na=function(t){w(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,t,1)}return f(n)}(no);na.id="moveDown";var ns=function(t){w(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,t,2)}return f(n)}(no);ns.id="moveLeft";var nc=function(t){w(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,t,3)}return f(n)}(no);nc.id="moveRight";var nu=function(t){w(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,t,0)}return f(n)}(no);nu.id="moveUp";var nl=function(t){w(n,t);var e=g(n);function n(t,i,r){var o;return y(this,n),(o=e.call(this,t,{className:"psv-zoom-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:i})).direction=r,o.handler=new tJ,o.container.addEventListener("mousedown",b(o)),o.container.addEventListener("keydown",b(o)),o.container.addEventListener("keyup",b(o)),o.viewer.container.addEventListener("mouseup",b(o)),o.viewer.container.addEventListener("touchend",b(o)),o}return f(n,[{key:"destroy",value:function(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),l(M(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){switch(t.type){case"mousedown":this.__onMouseDown();break;case"mouseup":case"touchend":this.__onMouseUp();break;case"keydown":t.key===B.Enter&&this.__onMouseDown();break;case"keyup":t.key===B.Enter&&this.__onMouseUp()}}},{key:"onClick",value:function(){}},{key:"isSupported",value:function(){return tx(e3.isTouchEnabled)}},{key:"__onMouseDown",value:function(){this.state.enabled&&(this.viewer.dynamics.zoom.roll(1===this.direction),this.handler.down())}},{key:"__onMouseUp",value:function(){var t=this;this.state.enabled&&this.handler.up(function(){return t.viewer.dynamics.zoom.stop()})}}]),n}(e9);nl.groupId="zoom";var nh=function(t){w(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,t,G.zoomIn,0)}return f(n)}(nl);nh.id="zoomIn";var nd=function(t){w(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,t,G.zoomOut,1)}return f(n)}(nl);nd.id="zoomOut";var nv=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,t,{className:"psv-zoom-range",hoverScale:!1,collapsable:!1,tabbable:!1})).zoomRange=document.createElement("div"),i.zoomRange.className="psv-zoom-range-line",i.container.appendChild(i.zoomRange),i.zoomValue=document.createElement("div"),i.zoomValue.className="psv-zoom-range-handle",i.zoomRange.appendChild(i.zoomValue),i.slider=new t1(i.container,"HORIZONTAL",function(t){return i.__onSliderUpdate(t)}),i.mediaMinWidth=parseInt(td(i.container,"max-width"),10),i.viewer.addEventListener(eX.type,b(i)),i.viewer.state.ready?i.__moveZoomValue(i.viewer.getZoomLevel()):i.viewer.addEventListener(eC.type,b(i)),i}return f(n,[{key:"destroy",value:function(){this.slider.destroy(),this.viewer.removeEventListener(eX.type,this),this.viewer.removeEventListener(eC.type,this),l(M(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){t instanceof eX?this.__moveZoomValue(t.zoomLevel):t instanceof eC&&this.__moveZoomValue(this.viewer.getZoomLevel())}},{key:"onClick",value:function(){}},{key:"isSupported",value:function(){return tx(e3.isTouchEnabled)}},{key:"autoSize",value:function(){this.state.supported&&(this.viewer.state.size.width<=this.mediaMinWidth&&this.state.visible?this.hide(!1):this.viewer.state.size.width>this.mediaMinWidth&&!this.state.visible&&this.show(!1))}},{key:"__moveZoomValue",value:function(t){this.zoomValue.style.left=t/100*this.zoomRange.offsetWidth-this.zoomValue.offsetWidth/2+"px"}},{key:"__onSliderUpdate",value:function(t){t.mousedown&&this.viewer.zoom(100*t.value)}}]),n}(e9);nv.id="zoomRange",nv.groupId="zoom";var np=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this)).viewer=t,i}return f(n,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),n}(t5),nf=function(t){w(n,t);var e=g(n);function n(t,i){var r;return y(this,n),(r=e.call(this,t)).config=r.constructor.configParser(i),r}return f(n,[{key:"setOption",value:function(t,e){this.setOptions(v({},t,e))}},{key:"setOptions",value:function(t){for(var e=d(d({},this.config),t),n=this.constructor,i=n.configParser,r=n.readonlyOptions,o=n.id,a=0,s=Object.entries(t);a<s.length;a++){var c=x(s[a],2),u=c[0],l=c[1];if(!(u in i.defaults)){tI("".concat(o,': Unknown option "').concat(u,'"'));continue}if(r.includes(u)){tI("".concat(o,': Option "').concat(u,'" cannot be updated'));continue}u in i.parsers&&(l=i.parsers[u](l,{rawConfig:e,defValue:i.defaults[u]})),this.config[u]=l}}}]),n}(np);function nm(t){if(t)for(var e=0,n=[["_",t]].concat(L(Object.entries(t)));e<n.length;e++){var i=x(n[e],2)[1];if(i.prototype instanceof np)return i}return null}nf.readonlyOptions=[];var ny={panorama:null,overlay:null,overlayOpacity:1,container:null,adapter:[e8,null],plugins:[],caption:null,description:null,downloadUrl:null,downloadName:null,loadingImg:null,loadingTxt:"Loading...",size:null,fisheye:0,minFov:30,maxFov:90,defaultZoomLvl:50,defaultYaw:0,defaultPitch:0,sphereCorrection:null,moveSpeed:1,zoomSpeed:1,moveInertia:!0,mousewheel:!0,mousemove:!0,mousewheelCtrlKey:!1,touchmoveTwoFingers:!1,useXmpData:null,panoData:null,requestHeaders:null,canvasBackground:null,rendererParameters:{alpha:!0,antialias:!0},withCredentials:!1,navbar:["zoom","move","download","description","caption","fullscreen"],lang:{zoom:"Zoom",zoomOut:"Zoom out",zoomIn:"Zoom in",moveUp:"Move up",moveDown:"Move down",moveLeft:"Move left",moveRight:"Move right",download:"Download",fullscreen:"Fullscreen",menu:"Menu",close:"Close",twoFingers:"Use two fingers to navigate",ctrlZoom:"Use ctrl + scroll to zoom the image",loadError:"The panorama can't be loaded"},keyboard:"fullscreen",keyboardActions:(v(o={},B.ArrowUp,"ROTATE_UP"),v(o,B.ArrowDown,"ROTATE_DOWN"),v(o,B.ArrowRight,"ROTATE_RIGHT"),v(o,B.ArrowLeft,"ROTATE_LEFT"),v(o,B.PageUp,"ZOOM_IN"),v(o,B.PageDown,"ZOOM_OUT"),v(o,B.Plus,"ZOOM_IN"),v(o,B.Minus,"ZOOM_OUT"),o)},nw={panorama:"Use setPanorama method to change the panorama",panoData:"Use setPanorama method to change the panorama",overlay:"Use setOverlay method to changer the overlay",overlayOpacity:"Use setOverlay method to changer the overlay",container:"Cannot change viewer container",adapter:"Cannot change adapter",plugins:"Cannot change plugins"},ng={container:function(t){if(!t)throw new tT("No value given for container.");return t},adapter:function(t,e){var n=e.defValue;if(!(t=t?Array.isArray(t)?[e1(t[0]),t[1]]:[e1(t),null]:n)[0])throw new tT("An undefined value was given for adapter.");if(!t[0].id)throw new tT("Adapter has no id.");return t},overlayOpacity:function(t){return a.M8C.clamp(t,0,1)},defaultYaw:function(t){return tY(t)},defaultPitch:function(t){return tY(t,!0)},defaultZoomLvl:function(t){return a.M8C.clamp(t,0,100)},minFov:function(t,e){var n=e.rawConfig;return n.maxFov<t&&(tI("maxFov cannot be lower than minFov"),t=n.maxFov),a.M8C.clamp(t,1,179)},maxFov:function(t,e){var n=e.rawConfig;return t<n.minFov&&(t=n.minFov),a.M8C.clamp(t,1,179)},lang:function(t){return Array.isArray(t.twoFingers)&&(tI("lang.twoFingers must not be an array"),t.twoFingers=t.twoFingers[0]),d(d({},ny.lang),t)},keyboard:function(t){return!!t&&("object"===T(t)?(tI("Use keyboardActions to configure the keyboard actions, keyboard option must be either true, false, 'fullscreen' or 'always'"),"fullscreen"):"always"===t?"always":"fullscreen")},keyboardActions:function(t,e){var n=e.rawConfig;return n.keyboard&&"object"===T(n.keyboard)?n.keyboard:t},fisheye:function(t){return!0===t?1:!1===t?0:t},requestHeaders:function(t){return t&&"object"===T(t)?function(){return t}:"function"==typeof t?t:null},rendererParameters:function(t,e){var n=e.defValue;return d(d({},t),n)},plugins:function(t){return t.map(function(t,e){if(!(t=Array.isArray(t)?[nm(t[0]),t[1]]:[nm(t),null])[0])throw new tT("An undefined value was given for plugin ".concat(e,"."));if(!t[0].id)throw new tT("Plugin ".concat(e," has no id."));return t})},navbar:function(t){return!1===t?null:!0===t?tk(ny.navbar):"string"==typeof t?t.split(/[ ,]/):t},useXmpData:function(t){return null!==t&&tI("Global useXmpData is deprecated, it is now configured on the adapter."),t},canvasBackground:function(t){return null!==t&&tI("Global canvasBackground is deprecated, it is now configured on the adapter."),t}},nb=tG(ny,ng),nk=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,t,{className:"psv-caption",hoverScale:!1,collapsable:!1,tabbable:!0})).contentWidth=0,i.state.width=0,i.contentElt=document.createElement("div"),i.contentElt.className="psv-caption-content",i.container.appendChild(i.contentElt),i.setCaption(i.viewer.config.caption),i}return f(n,[{key:"hide",value:function(){this.contentElt.style.display="none",this.state.visible=!1}},{key:"show",value:function(){this.contentElt.style.display="",this.state.visible=!0}},{key:"onClick",value:function(){}},{key:"setCaption",value:function(t){this.show(),this.contentElt.innerHTML=null!=t?t:"",this.contentElt.innerHTML?this.contentWidth=this.contentElt.offsetWidth:this.contentWidth=0,this.autoSize()}},{key:"autoSize",value:function(){this.toggle(this.container.offsetWidth>=this.contentWidth),this.__refreshButton()}},{key:"__refreshButton",value:function(){var t;null===(t=this.viewer.navbar.getButton(ne.id,!1))||void 0===t||t.autoSize(!0)}}]),n}(e9);nk.id="caption";var n_={},nE={};function nO(t,e){if(!t.id)throw new tT("Button id is required");if(n_[t.id]=t,t.groupId&&(nE[t.groupId]=nE[t.groupId]||[]).push(t),e){var n=ny.navbar;switch(e){case"start":n.unshift(t.id);break;case"end":n.push(t.id);break;default:var i=x(e.split(":"),2),r=i[0],o=i[1],a=n.indexOf(r);if(!r||!o||-1===a)throw new tT("Invalid defaultPosition ".concat(e));n.splice(a+("right"===o?1:0),0,t.id)}}}[nd,nv,nh,ne,nk,nn,ni,ns,nc,nu,na].forEach(function(t){return nO(t)});var nM=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,t,{className:"psv-navbar ".concat(Y)})).collapsed=[],i.state.visible=!1,i}return f(n,[{key:"show",value:function(){this.viewer.container.classList.add("psv--has-navbar"),this.container.classList.add("psv-navbar--open"),this.state.visible=!0}},{key:"hide",value:function(){this.viewer.container.classList.remove("psv--has-navbar"),this.container.classList.remove("psv-navbar--open"),this.state.visible=!1}},{key:"setButtons",value:function(t){var e=this;this.children.slice().forEach(function(t){return t.destroy()}),this.children.length=0,-1!==t.indexOf(nk.id)&&-1===t.indexOf(ne.id)&&t.splice(t.indexOf(nk.id),0,ne.id),t.forEach(function(t){"object"===T(t)?new nt(e,t):n_[t]?new n_[t](e):nE[t]?nE[t].forEach(function(t){new t(e)}):tI("Unknown button ".concat(t))}),new nr(this),this.children.forEach(function(t){t instanceof e9&&t.checkSupported()}),this.autoSize()}},{key:"setCaption",value:function(t){this.children.some(function(e){return e instanceof nk&&(e.setCaption(t),!0)})}},{key:"getButton",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=this.children.find(function(e){return e instanceof e9&&e.id===t});return!n&&e&&tI('button "'.concat(t,'" not found in the navbar')),n}},{key:"autoSize",value:function(){this.children.forEach(function(t){t instanceof e9&&t.autoSize()});var t,e=this.container.offsetWidth,n=0,i=[];this.children.forEach(function(t){t.isVisible()&&t instanceof e9&&(n+=t.width,t.collapsable&&i.push(t))}),0!==n&&(e<n&&i.length>0?(i.forEach(function(t){return t.collapse()}),this.collapsed=i,this.getButton(nr.id).show(!1)):e>=n&&this.collapsed.length>0&&(this.collapsed.forEach(function(t){return t.uncollapse()}),this.collapsed=[],this.getButton(nr.id).hide(!1)),null===(t=this.getButton(nk.id,!1))||void 0===t||t.autoSize())}}]),n}(e7),nT=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,t,{className:"psv-loader-container"})).loader=document.createElement("div"),i.loader.className="psv-loader",i.container.appendChild(i.loader),i.size=i.loader.offsetWidth,i.canvas=document.createElementNS("http://www.w3.org/2000/svg","svg"),i.canvas.setAttribute("class","psv-loader-canvas"),i.canvas.setAttribute("viewBox","0 0 ".concat(i.size," ").concat(i.size)),i.loader.appendChild(i.canvas),i.textColor=td(i.loader,"color"),i.color=td(i.canvas,"color"),i.border=parseInt(td(i.loader,"--psv-loader-border"),10),i.thickness=parseInt(td(i.loader,"--psv-loader-tickness"),10),i.viewer.addEventListener(eo.type,b(i)),i.__updateContent(),i.hide(),i}return f(n,[{key:"destroy",value:function(){this.viewer.removeEventListener(eo.type,this),l(M(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){t instanceof eo&&t.containsOptions("loadingImg","loadingTxt")&&this.__updateContent()}},{key:"setProgress",value:function(t){var e=Math.min(t,99.999)/100*Math.PI*2,n=this.size/2,i=this.thickness/2+this.border,r=(this.size-this.thickness)/2-this.border,o=Math.sin(e)*r+n,a=-Math.cos(e)*r+n;this.canvas.innerHTML='\n            <circle cx="'.concat(n,'" cy="').concat(n,'" r="').concat(n,'" fill="').concat(this.color,'"/>\n            <path d="M ').concat(n," ").concat(i," A ").concat(r," ").concat(r," 0 ").concat(t>50?"1":"0"," 1 ").concat(o," ").concat(a,'" \n                  fill="none" stroke="').concat(this.textColor,'" stroke-width="').concat(this.thickness,'" stroke-linecap="round"/>\n        '),this.viewer.dispatchEvent(new ek(Math.round(t)))}},{key:"__updateContent",value:function(){var t,e=this.loader.querySelector(".psv-loader-image, .psv-loader-text");if(e&&this.loader.removeChild(e),this.viewer.config.loadingImg?((t=document.createElement("img")).className="psv-loader-image",t.src=this.viewer.config.loadingImg):this.viewer.config.loadingTxt&&((t=document.createElement("div")).className="psv-loader-text",t.innerHTML=this.viewer.config.loadingTxt),t){var n=Math.round(Math.sqrt(2*Math.pow(this.size/2-this.thickness/2-this.border,2)));t.style.maxWidth=n+"px",t.style.maxHeight=n+"px",this.loader.appendChild(t)}}}]),n}(e7),nL=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,t,{className:"psv-notification"})).state={visible:!1,contentId:null,timeout:null},i.content=document.createElement("div"),i.content.className="psv-notification-content",i.container.appendChild(i.content),i.content.addEventListener("click",function(){return i.hide()}),i}return f(n,[{key:"isVisible",value:function(t){return this.state.visible&&(!t||!this.state.contentId||this.state.contentId===t)}},{key:"toggle",value:function(){throw new tT("Notification cannot be toggled")}},{key:"show",value:function(t){var e=this;this.state.timeout&&(clearTimeout(this.state.timeout),this.state.timeout=null),"string"==typeof t&&(t={content:t}),this.state.contentId=t.id||null,this.content.innerHTML=t.content,this.container.classList.add("psv-notification--visible"),this.state.visible=!0,this.viewer.dispatchEvent(new eR(t.id)),t.timeout&&(this.state.timeout=setTimeout(function(){return e.hide(e.state.contentId)},t.timeout))}},{key:"hide",value:function(t){if(this.isVisible(t)){var e=this.state.contentId;this.container.classList.remove("psv-notification--visible"),this.state.visible=!1,this.state.contentId=null,this.viewer.dispatchEvent(new eh(e))}}}]),n}(e7),nx=function(t){w(n,t);var e=g(n);function n(t){var i,r;return y(this,n),(r=e.call(this,t,{className:"psv-overlay ".concat(Y)})).state={visible:!1,contentId:null,dissmisable:!0},r.image=document.createElement("div"),r.image.className="psv-overlay-image",r.container.appendChild(r.image),r.title=document.createElement("div"),r.title.className="psv-overlay-title",r.container.appendChild(r.title),r.text=document.createElement("div"),r.text.className="psv-overlay-text",r.container.appendChild(r.text),r.container.addEventListener("click",b(r)),r.viewer.addEventListener(eg.type,b(r)),l((i=b(r),M(n.prototype)),"hide",i).call(i),r}return f(n,[{key:"destroy",value:function(){this.viewer.removeEventListener(eg.type,this),l(M(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){"click"===t.type?this.isVisible()&&this.state.dissmisable&&(this.hide(),t.stopPropagation()):t instanceof eg&&this.isVisible()&&this.state.dissmisable&&t.key===B.Escape&&(this.hide(),t.preventDefault())}},{key:"isVisible",value:function(t){return this.state.visible&&(!t||!this.state.contentId||this.state.contentId===t)}},{key:"toggle",value:function(){throw new tT("Overlay cannot be toggled")}},{key:"show",value:function(t){"string"==typeof t&&(t={title:t}),this.state.contentId=t.id||null,this.state.dissmisable=!1!==t.dissmisable,this.image.innerHTML=t.image||"",this.title.innerHTML=t.title||"",this.text.innerHTML=t.text||"",l(M(n.prototype),"show",this).call(this),this.viewer.dispatchEvent(new eA(t.id))}},{key:"hide",value:function(t){if(this.isVisible(t)){var e=this.state.contentId;l(M(n.prototype),"hide",this).call(this),this.state.contentId=null,this.viewer.dispatchEvent(new ev(e))}}}]),n}(e7),nC="psv-panel-content--no-interaction",nP=function(t){w(n,t);var e=g(n);function n(t){y(this,n),(i=e.call(this,t,{className:"psv-panel ".concat(Y)})).state={visible:!1,contentId:null,mouseX:0,mouseY:0,mousedown:!1,clickHandler:null,keyHandler:null,width:{}};var i,r=document.createElement("div");r.className="psv-panel-resizer",i.container.appendChild(r);var o=document.createElement("div");return o.className="psv-panel-close-button",o.innerHTML=G.close,o.title=t.config.lang.close,i.container.appendChild(o),i.content=document.createElement("div"),i.content.className="psv-panel-content",i.container.appendChild(i.content),i.container.addEventListener("wheel",function(t){return t.stopPropagation()}),o.addEventListener("click",function(){return i.hide()}),r.addEventListener("mousedown",b(i)),r.addEventListener("touchstart",b(i)),i.viewer.container.addEventListener("mouseup",b(i)),i.viewer.container.addEventListener("touchend",b(i)),i.viewer.container.addEventListener("mousemove",b(i)),i.viewer.container.addEventListener("touchmove",b(i)),i.viewer.addEventListener(eg.type,b(i)),i}return f(n,[{key:"destroy",value:function(){this.viewer.removeEventListener(eg.type,this),this.viewer.container.removeEventListener("mousemove",this),this.viewer.container.removeEventListener("touchmove",this),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),l(M(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){switch(t.type){case"mousedown":this.__onMouseDown(t);break;case"touchstart":this.__onTouchStart(t);break;case"mousemove":this.__onMouseMove(t);break;case"touchmove":this.__onTouchMove(t);break;case"mouseup":this.__onMouseUp(t);break;case"touchend":this.__onTouchEnd(t);break;case eg.type:this.__onKeyPress(t)}}},{key:"isVisible",value:function(t){return this.state.visible&&(!t||!this.state.contentId||this.state.contentId===t)}},{key:"toggle",value:function(){throw new tT("Panel cannot be toggled")}},{key:"show",value:function(t){var e=this;"string"==typeof t&&(t={content:t});var n=this.isVisible(t.id);this.state.contentId=t.id||null,this.state.visible=!0,this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.content.removeEventListener("keydown",this.state.keyHandler),this.state.clickHandler=null,this.state.keyHandler=null),t.id&&this.state.width[t.id]?this.container.style.width=this.state.width[t.id]:t.width?this.container.style.width=t.width:this.container.style.width=null,this.content.innerHTML=t.content,this.content.scrollTop=0,this.container.classList.add("psv-panel--open"),to(this.content,"psv-panel-content--no-margin",!0===t.noMargin),t.clickHandler&&(this.state.clickHandler=function(e){t.clickHandler(e.target)},this.state.keyHandler=function(e){e.key===B.Enter&&t.clickHandler(e.target)},this.content.addEventListener("click",this.state.clickHandler),this.content.addEventListener("keydown",this.state.keyHandler),n||setTimeout(function(){var t;null===(t=e.content.querySelector("a,button,[tabindex]"))||void 0===t||t.focus()},300)),this.viewer.dispatchEvent(new eD(t.id))}},{key:"hide",value:function(t){if(this.isVisible(t)){var e=this.state.contentId;this.state.visible=!1,this.state.contentId=null,this.content.innerHTML=null,this.container.classList.remove("psv-panel--open"),this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.state.clickHandler=null),this.viewer.dispatchEvent(new ef(e))}}},{key:"__onMouseDown",value:function(t){t.stopPropagation(),this.__startResize(t.clientX,t.clientY)}},{key:"__onTouchStart",value:function(t){if(t.stopPropagation(),1===t.touches.length){var e=t.touches[0];this.__startResize(e.clientX,e.clientY)}}},{key:"__onMouseUp",value:function(t){this.state.mousedown&&(t.stopPropagation(),this.state.mousedown=!1,this.content.classList.remove(nC))}},{key:"__onTouchEnd",value:function(t){this.state.mousedown&&(t.stopPropagation(),0===t.touches.length&&(this.state.mousedown=!1,this.content.classList.remove(nC)))}},{key:"__onMouseMove",value:function(t){this.state.mousedown&&(t.stopPropagation(),this.__resize(t.clientX,t.clientY))}},{key:"__onTouchMove",value:function(t){if(this.state.mousedown){var e=t.touches[0];this.__resize(e.clientX,e.clientY)}}},{key:"__onKeyPress",value:function(t){this.isVisible()&&t.key===B.Escape&&(this.hide(),t.preventDefault())}},{key:"__startResize",value:function(t,e){this.state.mouseX=t,this.state.mouseY=e,this.state.mousedown=!0,this.content.classList.add(nC)}},{key:"__resize",value:function(t,e){var n=Math.max(200,this.container.offsetWidth-(t-this.state.mouseX))+"px";this.state.contentId&&(this.state.width[this.state.contentId]=n),this.container.style.width=n,this.state.mouseX=t,this.state.mouseY=e}}]),n}(e7),nI=function(t){w(n,t);var e=g(n);function n(t,i){var r;return y(this,n),(r=e.call(this,t,{className:"psv-tooltip"})).state={visible:!0,arrow:0,border:0,state:0,width:0,height:0,pos:"",config:null,data:null},r.content=document.createElement("div"),r.content.className="psv-tooltip-content",r.container.appendChild(r.content),r.arrow=document.createElement("div"),r.arrow.className="psv-tooltip-arrow",r.container.appendChild(r.arrow),r.container.addEventListener("transitionend",b(r)),r.container.addEventListener("touchdown",function(t){return t.stopPropagation()}),r.container.addEventListener("mousedown",function(t){return t.stopPropagation()}),r.container.style.top="-1000px",r.container.style.left="-1000px",r.show(i),r}return f(n,[{key:"handleEvent",value:function(t){"transitionend"===t.type&&this.__onTransitionEnd(t)}},{key:"destroy",value:function(){delete this.state.data,l(M(n.prototype),"destroy",this).call(this)}},{key:"toggle",value:function(){throw new tT("Tooltip cannot be toggled")}},{key:"show",value:function(t){if(0!==this.state.state)throw new tT("Initialized tooltip cannot be re-initialized");t.className&&ta(this.container,t.className),t.style&&Object.assign(this.container.style,t.style),this.state.state=3,this.update(t.content,t),this.state.data=t.data,this.state.state=1,this.viewer.dispatchEvent(new ej(this,this.state.data)),this.__waitImages()}},{key:"update",value:function(t,e){this.content.innerHTML=t;var n=this.container.getBoundingClientRect();this.state.width=n.right-n.left,this.state.height=n.bottom-n.top,this.state.arrow=parseInt(td(this.arrow,"border-top-width"),10),this.state.border=parseInt(td(this.container,"border-top-left-radius"),10),this.move(null!=e?e:this.state.config)}},{key:"move",value:function(t){if(1!==this.state.state&&3!==this.state.state)throw new tT("Uninitialized tooltip cannot be moved");t.box=null!==(e=null!==(n=t.box)&&void 0!==n?n:null===(i=this.state.config)||void 0===i?void 0:i.box)&&void 0!==e?e:{width:0,height:0},this.state.config=t;var e,n,i,r=this.container,o=this.arrow,a={posClass:tU(t.position,{allowCenter:!1,cssOrder:!1})||["top","center"],width:this.state.width,height:this.state.height,top:0,left:0,arrowTop:0,arrowLeft:0};this.__computeTooltipPosition(a,t);var s=null,c=null;if(a.top<0?s="bottom":a.top+a.height>this.viewer.state.size.height&&(s="top"),a.left<0?c="right":a.left+a.width>this.viewer.state.size.width&&(c="left"),c||s){var u=tF(a.posClass);s&&(a.posClass[u?0:1]=s),c&&(a.posClass[u?1:0]=c),this.__computeTooltipPosition(a,t)}r.style.top=a.top+"px",r.style.left=a.left+"px",o.style.top=a.arrowTop+"px",o.style.left=a.arrowLeft+"px";var l=a.posClass.join("-");l!==this.state.pos&&(r.classList.remove("psv-tooltip--".concat(this.state.pos)),this.state.pos=l,r.classList.add("psv-tooltip--".concat(this.state.pos)))}},{key:"hide",value:function(){this.container.classList.remove("psv-tooltip--visible"),this.state.state=2,this.viewer.dispatchEvent(new ey(this.state.data))}},{key:"__onTransitionEnd",value:function(t){if("transform"===t.propertyName)switch(this.state.state){case 1:this.container.classList.add("psv-tooltip--visible"),this.state.state=3;break;case 2:this.state.state=0,this.destroy()}}},{key:"__computeTooltipPosition",value:function(t,e){var n=this.state.arrow,i=e.top,r=t.height,o=e.left,a=t.width,s=n+this.state.border,c=e.box.width/2+2*n,u=e.box.height/2+2*n;switch(t.posClass.join("-")){case"top-left":t.top=i-u-r,t.left=o+s-a,t.arrowTop=r,t.arrowLeft=a-s-n;break;case"top-center":t.top=i-u-r,t.left=o-a/2,t.arrowTop=r,t.arrowLeft=a/2-n;break;case"top-right":t.top=i-u-r,t.left=o-s,t.arrowTop=r,t.arrowLeft=n;break;case"bottom-left":t.top=i+u,t.left=o+s-a,t.arrowTop=-(2*n),t.arrowLeft=a-s-n;break;case"bottom-center":t.top=i+u,t.left=o-a/2,t.arrowTop=-(2*n),t.arrowLeft=a/2-n;break;case"bottom-right":t.top=i+u,t.left=o-s,t.arrowTop=-(2*n),t.arrowLeft=n;break;case"left-top":t.top=i+s-r,t.left=o-c-a,t.arrowTop=r-s-n,t.arrowLeft=a;break;case"center-left":t.top=i-r/2,t.left=o-c-a,t.arrowTop=r/2-n,t.arrowLeft=a;break;case"left-bottom":t.top=i-s,t.left=o-c-a,t.arrowTop=n,t.arrowLeft=a;break;case"right-top":t.top=i+s-r,t.left=o+c,t.arrowTop=r-s-n,t.arrowLeft=-(2*n);break;case"center-right":t.top=i-r/2,t.left=o+c,t.arrowTop=r/2-n,t.arrowLeft=-(2*n);break;case"right-bottom":t.top=i-s,t.left=o+c,t.arrowTop=n,t.arrowLeft=-(2*n)}}},{key:"__waitImages",value:function(){var t=this,e=this.content.querySelectorAll("img");if(e.length>0){var n=[];e.forEach(function(t){n.push(new Promise(function(e){t.onload=e,t.onerror=e}))}),Promise.all(n).then(function(){if(1===t.state.state||3===t.state.state){var e=t.container.getBoundingClientRect();t.state.width=e.right-e.left,t.state.height=e.bottom-e.top,t.move(t.state.config)}})}}}]),n}(e7),nS={enabled:!0,maxItems:10,ttl:600,items:{},purgeInterval:null,init:function(){var t=this;a.CtF.enabled&&(tI("ThreeJS cache should be disabled"),a.CtF.enabled=!1),!this.purgeInterval&&this.enabled&&(this.purgeInterval=setInterval(function(){return t.purge()},6e4))},add:function(t,e,n){if(this.enabled&&e){var i;this.items[e]=null!==(i=this.items[e])&&void 0!==i?i:{files:{},lastAccess:null},this.items[e].files[t]=n,this.items[e].lastAccess=Date.now()}},get:function(t,e){if(this.enabled&&e&&this.items[e])return this.items[e].lastAccess=Date.now(),this.items[e].files[t]},remove:function(t,e){this.enabled&&e&&this.items[e]&&(delete this.items[e].files[t],0===Object.keys(this.items[e].files).length&&delete this.items[e])},purge:function(){var t=this;Object.entries(this.items).sort(function(t,e){var n=x(t,2)[1];return x(e,2)[1].lastAccess-n.lastAccess}).forEach(function(e,n){var i=x(e,2),r=i[0],o=i[1].lastAccess;n>0&&(Date.now()-o>=1e3*t.ttl||n>=t.maxItems)&&delete t.items[r]})}},nR=function(){function t(e){y(this,t),this.viewer=e,this.config=e.config,this.state=e.state}return f(t,[{key:"destroy",value:function(){}}]),t}(),nH=new a.Pa4,nA=new a.USm(0,0,0,"ZXY"),nz=function(t){w(n,t);var e=g(n);function n(t){return y(this,n),e.call(this,t)}return f(n,[{key:"fovToZoomLevel",value:function(t){var e=Math.round((t-this.config.minFov)/(this.config.maxFov-this.config.minFov)*100);return e-2*(e-50)}},{key:"zoomLevelToFov",value:function(t){return this.config.maxFov+t/100*(this.config.minFov-this.config.maxFov)}},{key:"vFovToHFov",value:function(t){return a.M8C.radToDeg(2*Math.atan(Math.tan(a.M8C.degToRad(t)/2)*this.state.aspect))}},{key:"getAnimationProperties",value:function(t,e,n){var i,r=!tE(e),o=!tE(n),a={};if(r){var s=this.viewer.getPosition(),c=te(s.yaw,e.yaw);a.yaw={start:s.yaw,end:s.yaw+c},a.pitch={start:s.pitch,end:e.pitch},i=tW(t,tn(s,e))}if(o){var u=this.viewer.getZoomLevel(),l=Math.abs(n-u);a.zoom={start:u,end:n},i||(i=tW(t,Math.PI/4*l/100))}return{duration:i=Math.max(A,i),properties:a}}},{key:"textureCoordsToSphericalCoords",value:function(t){var e=this.state.panoData;if(!e)throw new tT("Current adapter does not support texture coordinates.");var n=(t.textureX+e.croppedX)/e.fullWidth*Math.PI*2,i={yaw:n>=Math.PI?n-Math.PI:n+Math.PI,pitch:Math.PI/2-(t.textureY+e.croppedY)/e.fullHeight*Math.PI};return nA.equals(this.viewer.renderer.panoramaPose)&&nA.equals(this.viewer.renderer.sphereCorrection)?i:(this.sphericalCoordsToVector3(i,nH),nH.applyEuler(this.viewer.renderer.panoramaPose),nH.applyEuler(this.viewer.renderer.sphereCorrection),this.vector3ToSphericalCoords(nH))}},{key:"sphericalCoordsToTextureCoords",value:function(t){var e=this.state.panoData;if(!e)throw new tT("Current adapter does not support texture coordinates.");nA.equals(this.viewer.renderer.panoramaPose)&&nA.equals(this.viewer.renderer.sphereCorrection)||(this.sphericalCoordsToVector3(t,nH),tB(nH,this.viewer.renderer.sphereCorrection),tB(nH,this.viewer.renderer.panoramaPose),t=this.vector3ToSphericalCoords(nH));var n=t.yaw/Math.PI/2*e.fullWidth,i=t.pitch/Math.PI*e.fullHeight;return{textureX:Math.round(t.yaw<Math.PI?n+e.fullWidth/2:n-e.fullWidth/2)-e.croppedX,textureY:Math.round(e.fullHeight/2-i)-e.croppedY}}},{key:"sphericalCoordsToVector3",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V;return e||(e=new a.Pa4),e.x=-(n*Math.cos(t.pitch))*Math.sin(t.yaw),e.y=n*Math.sin(t.pitch),e.z=n*Math.cos(t.pitch)*Math.cos(t.yaw),e}},{key:"vector3ToSphericalCoords",value:function(t){var e=Math.acos(t.y/Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)),n=Math.atan2(t.x,t.z);return{yaw:n<0?-n:2*Math.PI-n,pitch:Math.PI/2-e}}},{key:"viewerCoordsToVector3",value:function(t){var e=this.viewer.renderer.getIntersections(t).filter(function(t){return t.object.userData[W]});return e.length?e[0].point:null}},{key:"viewerCoordsToSphericalCoords",value:function(t){var e=this.viewerCoordsToVector3(t);return e?this.vector3ToSphericalCoords(e):null}},{key:"vector3ToViewerCoords",value:function(t){var e=t.clone();return e.project(this.viewer.renderer.camera),{x:Math.round((e.x+1)/2*this.state.size.width),y:Math.round((1-e.y)/2*this.state.size.height)}}},{key:"sphericalCoordsToViewerCoords",value:function(t){return this.sphericalCoordsToVector3(t,nH),this.vector3ToViewerCoords(nH)}},{key:"isPointVisible",value:function(t){var e,n;if(t instanceof a.Pa4)e=t,n=this.vector3ToViewerCoords(t);else{if(!tS(t))return!1;e=this.sphericalCoordsToVector3(t,nH),n=this.vector3ToViewerCoords(e)}return e.dot(this.viewer.state.direction)>0&&n.x>=0&&n.x<=this.viewer.state.size.width&&n.y>=0&&n.y<=this.viewer.state.size.height}},{key:"cleanPosition",value:function(t){return void 0!==t.textureX&&void 0!==t.textureY?this.textureCoordsToSphericalCoords(t):{yaw:tY(t.yaw),pitch:tY(t.pitch,!this.state.littlePlanet)}}},{key:"cleanSphereCorrection",value:function(t){return{pan:tY((null==t?void 0:t.pan)||0),tilt:tY((null==t?void 0:t.tilt)||0,!0),roll:tY((null==t?void 0:t.roll)||0,!0,!1)}}},{key:"cleanPanoramaPose",value:function(t){return{pan:a.M8C.degToRad((null==t?void 0:t.poseHeading)||0),tilt:a.M8C.degToRad((null==t?void 0:t.posePitch)||0),roll:a.M8C.degToRad((null==t?void 0:t.poseRoll)||0)}}}]),n}(nR),nD=function(){function t(){y(this,t),this.$=t.IDLE}return f(t,[{key:"is",value:function(){for(var t=this,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.some(function(e){return t.$&e})}},{key:"set",value:function(t){this.$=t}},{key:"add",value:function(t){this.$|=t}},{key:"remove",value:function(t){this.$&=~t}}]),t}();nD.IDLE=0,nD.CLICK=1,nD.MOVING=2,nD.INERTIA=4;var nN=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,t)).data={startMouseX:0,startMouseY:0,mouseX:0,mouseY:0,mouseHistory:[],pinchDist:0,ctrlKeyDown:!1,dblclickData:null,dblclickTimeout:null,longtouchTimeout:null,twofingersTimeout:null,ctrlZoomTimeout:null},i.step=new nD,i.keyHandler=new tJ,i.resizeObserver=new ResizeObserver(tw(function(){return i.viewer.autoSize()},50)),i.moveThreshold=z*e3.pixelRatio,i}return f(n,[{key:"init",value:function(){window.addEventListener("keydown",this,{passive:!1}),window.addEventListener("keyup",this),this.viewer.container.addEventListener("mousedown",this),window.addEventListener("mousemove",this,{passive:!1}),window.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchstart",this,{passive:!1}),window.addEventListener("touchmove",this,{passive:!1}),window.addEventListener("touchend",this,{passive:!1}),this.viewer.container.addEventListener("wheel",this,{passive:!1}),document.addEventListener(e3.fullscreenEvent,this),this.resizeObserver.observe(this.viewer.container)}},{key:"destroy",value:function(){window.removeEventListener("keydown",this),window.removeEventListener("keyup",this),this.viewer.container.removeEventListener("mousedown",this),window.removeEventListener("mousemove",this),window.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchstart",this),window.removeEventListener("touchmove",this),window.removeEventListener("touchend",this),this.viewer.container.removeEventListener("wheel",this),document.removeEventListener(e3.fullscreenEvent,this),this.resizeObserver.disconnect(),clearTimeout(this.data.dblclickTimeout),clearTimeout(this.data.longtouchTimeout),clearTimeout(this.data.twofingersTimeout),clearTimeout(this.data.ctrlZoomTimeout),l(M(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){switch(t.type){case"keydown":this.__onKeyDown(t);break;case"keyup":this.__onKeyUp();break;case"mousemove":this.__onMouseMove(t);break;case"mouseup":this.__onMouseUp(t);break;case"touchmove":this.__onTouchMove(t);break;case"touchend":this.__onTouchEnd(t);break;case e3.fullscreenEvent:this.__onFullscreenChange()}if(!tu(t.target,"."+Y))switch(t.type){case"mousedown":this.__onMouseDown(t);break;case"touchstart":this.__onTouchStart(t);break;case"wheel":this.__onMouseWheel(t)}}},{key:"__onKeyDown",value:function(t){if(this.config.mousewheelCtrlKey&&(this.data.ctrlKeyDown=t.key===B.Control,this.data.ctrlKeyDown&&(clearTimeout(this.data.ctrlZoomTimeout),this.viewer.overlay.hide(Z.CTRL_ZOOM))),this.viewer.dispatchEvent(new eg(t.key))&&this.state.keyboardEnabled){var e,n=null===(e=this.config.keyboardActions)||void 0===e?void 0:e[t.key];if("function"==typeof n)n(this.viewer),t.preventDefault();else if(n&&!this.keyHandler.pending){switch("ZOOM_IN"!==n&&"ZOOM_OUT"!==n&&this.viewer.stopAll(),n){case"ROTATE_UP":this.viewer.dynamics.position.roll({pitch:!1});break;case"ROTATE_DOWN":this.viewer.dynamics.position.roll({pitch:!0});break;case"ROTATE_RIGHT":this.viewer.dynamics.position.roll({yaw:!1});break;case"ROTATE_LEFT":this.viewer.dynamics.position.roll({yaw:!0});break;case"ZOOM_IN":this.viewer.dynamics.zoom.roll(!1);break;case"ZOOM_OUT":this.viewer.dynamics.zoom.roll(!0)}this.keyHandler.down(),t.preventDefault()}}}},{key:"__onKeyUp",value:function(){var t=this;this.data.ctrlKeyDown=!1,this.state.keyboardEnabled&&this.keyHandler.up(function(){t.viewer.dynamics.position.stop(),t.viewer.dynamics.zoom.stop(),t.viewer.resetIdleTimer()})}},{key:"__onMouseDown",value:function(t){this.step.add(nD.CLICK),this.data.startMouseX=t.clientX,this.data.startMouseY=t.clientY}},{key:"__onMouseUp",value:function(t){this.step.is(nD.CLICK,nD.MOVING)&&this.__stopMove(t.clientX,t.clientY,t.target,2===t.button)}},{key:"__onMouseMove",value:function(t){this.config.mousemove&&this.step.is(nD.CLICK,nD.MOVING)&&(t.preventDefault(),this.__doMove(t.clientX,t.clientY)),this.__handleObjectsEvents(t)}},{key:"__onTouchStart",value:function(t){var e=this;1===t.touches.length?(this.step.add(nD.CLICK),this.data.startMouseX=t.touches[0].clientX,this.data.startMouseY=t.touches[0].clientY,this.data.longtouchTimeout||(this.data.longtouchTimeout=setTimeout(function(){var n=t.touches[0];e.__stopMove(n.clientX,n.clientY,n.target,!0),e.data.longtouchTimeout=null},N))):2===t.touches.length&&(this.step.set(nD.IDLE),this.__cancelLongTouch(),this.config.mousemove&&(this.__cancelTwoFingersOverlay(),this.__startMoveZoom(t),t.preventDefault()))}},{key:"__onTouchEnd",value:function(t){if(this.__cancelLongTouch(),this.step.is(nD.CLICK,nD.MOVING)){if(t.preventDefault(),this.__cancelTwoFingersOverlay(),1===t.touches.length)this.__stopMove(this.data.mouseX,this.data.mouseY);else if(0===t.touches.length){var e=t.changedTouches[0];this.__stopMove(e.clientX,e.clientY,e.target)}}}},{key:"__onTouchMove",value:function(t){var e=this;if(this.__cancelLongTouch(),this.config.mousemove){if(1===t.touches.length){if(this.config.touchmoveTwoFingers)this.step.is(nD.CLICK)&&!this.data.twofingersTimeout&&(this.data.twofingersTimeout=setTimeout(function(){e.viewer.overlay.show({id:Z.TWO_FINGERS,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M33.38 33.2a1.96 1.96 0 0 0 1.5-3.23 10.61 10.61 0 0 1 7.18-17.51c.7-.06 1.31-.49 1.61-1.12a13.02 13.02 0 0 1 11.74-7.43c7.14 0 12.96 5.8 12.96 12.9 0 3.07-1.1 6.05-3.1 8.38-.7.82-.61 2.05.21 2.76.83.7 2.07.6 2.78-.22a16.77 16.77 0 0 0 4.04-10.91C72.3 7.54 64.72 0 55.4 0a16.98 16.98 0 0 0-14.79 8.7 14.6 14.6 0 0 0-12.23 14.36c0 3.46 1.25 6.82 3.5 9.45.4.45.94.69 1.5.69m45.74 43.55a22.13 22.13 0 0 1-5.23 12.4c-4 4.55-9.53 6.86-16.42 6.86-12.6 0-20.1-10.8-20.17-10.91a1.82 1.82 0 0 0-.08-.1c-5.3-6.83-14.55-23.82-17.27-28.87-.05-.1 0-.21.02-.23a6.3 6.3 0 0 1 8.24 1.85l9.38 12.59a1.97 1.97 0 0 0 3.54-1.17V25.34a4 4 0 0 1 1.19-2.87 3.32 3.32 0 0 1 2.4-.95c1.88.05 3.4 1.82 3.4 3.94v24.32a1.96 1.96 0 0 0 3.93 0v-33.1a3.5 3.5 0 0 1 7 0v35.39a1.96 1.96 0 0 0 3.93 0v-.44c.05-2.05 1.6-3.7 3.49-3.7 1.93 0 3.5 1.7 3.5 3.82v5.63c0 .24.04.48.13.71l.1.26a1.97 1.97 0 0 0 3.76-.37c.33-1.78 1.77-3.07 3.43-3.07 1.9 0 3.45 1.67 3.5 3.74l-1.77 18.1zM77.39 51c-1.25 0-2.45.32-3.5.9v-.15c0-4.27-3.33-7.74-7.42-7.74-1.26 0-2.45.33-3.5.9V16.69a7.42 7.42 0 0 0-14.85 0v1.86a7 7 0 0 0-3.28-.94 7.21 7.21 0 0 0-5.26 2.07 7.92 7.92 0 0 0-2.38 5.67v37.9l-5.83-7.82a10.2 10.2 0 0 0-13.35-2.92 4.1 4.1 0 0 0-1.53 5.48C20 64.52 28.74 80.45 34.07 87.34c.72 1.04 9.02 12.59 23.4 12.59 7.96 0 14.66-2.84 19.38-8.2a26.06 26.06 0 0 0 6.18-14.6l1.78-18.2v-.2c0-4.26-3.32-7.73-7.42-7.73z"/><!--Created by AomAm from the Noun Project--></svg>\n',title:e.config.lang.twoFingers})},j));else if(this.step.is(nD.CLICK,nD.MOVING)){t.preventDefault();var n=t.touches[0];this.__doMove(n.clientX,n.clientY)}}else this.__doMoveZoom(t),this.__cancelTwoFingersOverlay()}}},{key:"__cancelLongTouch",value:function(){this.data.longtouchTimeout&&(clearTimeout(this.data.longtouchTimeout),this.data.longtouchTimeout=null)}},{key:"__cancelTwoFingersOverlay",value:function(){this.config.touchmoveTwoFingers&&(this.data.twofingersTimeout&&(clearTimeout(this.data.twofingersTimeout),this.data.twofingersTimeout=null),this.viewer.overlay.hide(Z.TWO_FINGERS))}},{key:"__onMouseWheel",value:function(t){var e=this;if(this.config.mousewheel&&t.deltaY){if(this.config.mousewheelCtrlKey&&!this.data.ctrlKeyDown){this.viewer.overlay.show({id:Z.CTRL_ZOOM,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 17 79 79"><path fill="currentColor" d="M38.1 29.27c-.24 0-.44.2-.44.45v10.7a.45.45 0 00.9 0v-10.7c0-.25-.2-.45-.45-.45zm10.2 26.66a11.54 11.54 0 01-8.48-6.14.45.45 0 10-.8.41 12.45 12.45 0 009.22 6.62.45.45 0 00.07-.9zm24.55-13.08a23.04 23.04 0 00-22.56-23v7.07l-.01.05a2.83 2.83 0 012.39 2.78v14.03l.09-.02h8.84v-9.22a.45.45 0 11.9 0v9.22h10.35v-.9zm0 27.33V44.66H62.5c-.02 2.01-.52 4-1.47 5.76a.45.45 0 01-.61.18.45.45 0 01-.19-.61 11.54 11.54 0 001.36-5.33h-8.83l-.1-.01a2.83 2.83 0 01-2.83 2.84h-.04-.04a2.83 2.83 0 01-2.83-2.83v-14.9a2.82 2.82 0 012.47-2.8v-7.11a23.04 23.04 0 00-22.57 23v.91h14.72V29.88a8.2 8.2 0 015.02-7.57c.22-.1.5.01.59.24.1.23-.01.5-.24.6a7.3 7.3 0 00-4.47 6.73v13.88h3.9a.45.45 0 110 .9h-3.9v.15a7.32 7.32 0 0011.23 6.17.45.45 0 01.49.76 8.22 8.22 0 01-12.62-6.93v-.15H26.82v25.52a23.04 23.04 0 0023.01 23.01 23.04 23.04 0 0023.02-23.01zm1.8-27.33v27.33A24.85 24.85 0 0149.84 95a24.85 24.85 0 01-24.82-24.82V42.85a24.85 24.85 0 0124.82-24.82 24.85 24.85 0 0124.83 24.82zM57.98 29.88v9.36a.45.45 0 11-.9 0v-9.36a7.28 7.28 0 00-3.4-6.17.45.45 0 01.49-.76 8.18 8.18 0 013.8 6.93z"/><!-- Created by Icon Island from the Noun Project --></svg>\n',title:this.config.lang.ctrlZoom}),clearTimeout(this.data.ctrlZoomTimeout),this.data.ctrlZoomTimeout=setTimeout(function(){return e.viewer.overlay.hide(Z.CTRL_ZOOM)},U);return}t.preventDefault(),t.stopPropagation();var n=t.deltaY/Math.abs(t.deltaY)*5*this.config.zoomSpeed;0!==n&&this.viewer.dynamics.zoom.step(-n,5)}}},{key:"__onFullscreenChange",value:function(){var t=this.viewer.isFullscreenEnabled();"fullscreen"===this.config.keyboard&&(t?this.viewer.startKeyboardControl():this.viewer.stopKeyboardControl()),this.viewer.dispatchEvent(new eu(t))}},{key:"__resetMove",value:function(){this.step.set(nD.IDLE),this.data.mouseX=0,this.data.mouseY=0,this.data.startMouseX=0,this.data.startMouseY=0,this.data.mouseHistory.length=0}},{key:"__startMoveZoom",value:function(t){this.viewer.stopAll(),this.__resetMove();var e=tv(t);this.step.set(nD.MOVING),this.data.pinchDist=e.distance;var n=e.center;this.data.mouseX=n.x,this.data.mouseY=n.y,this.__logMouseMove(this.data.mouseX,this.data.mouseY)}},{key:"__stopMove",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.step.is(nD.MOVING)?this.config.moveInertia?(this.__logMouseMove(t,e),this.__stopMoveInertia(t,e)):(this.__resetMove(),this.viewer.resetIdleTimer()):(this.step.is(nD.CLICK)&&!this.__moveThresholdReached(t,e)&&this.__doClick(t,e,n,i),this.step.remove(nD.CLICK),this.step.is(nD.INERTIA)||(this.__resetMove(),this.viewer.resetIdleTimer()))}},{key:"__stopMoveInertia",value:function(t,e){var n=this,i=new a.gti(this.data.mouseHistory.map(function(t){var e=x(t,3),n=e[1],i=e[2];return new a.FM8(n,i)})).getTangent(1),r=this.data.mouseHistory.reduce(function(t,e){var n=t.total,i=t.prev;return{total:i?n+J({x:i[1],y:i[2]},{x:e[1],y:e[2]})/(e[0]-i[0]):0,prev:e}},{total:0,prev:null}).total/this.data.mouseHistory.length;if(!r){this.__resetMove(),this.viewer.resetIdleTimer();return}this.step.set(nD.INERTIA);var o=t,s=e;this.state.animation=new tq({properties:{speed:{start:r,end:0}},duration:1e3,easing:"outQuad",onTick:function(t){o+=t.speed*i.x*3*e3.pixelRatio,s+=t.speed*i.y*3*e3.pixelRatio,n.__applyMove(o,s)}}),this.state.animation.then(function(t){n.state.animation=null,t&&(n.__resetMove(),n.viewer.resetIdleTimer())})}},{key:"__doClick",value:function(t,e,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.viewer.container.getBoundingClientRect(),a=t-o.left,s=e-o.top,c=this.viewer.renderer.getIntersections({x:a,y:s}),u=c.find(function(t){return t.object.userData[W]});if(u){var l=this.viewer.dataHelper.vector3ToSphericalCoords(u.point),h={rightclick:r,target:n,clientX:t,clientY:e,viewerX:a,viewerY:s,yaw:l.yaw,pitch:l.pitch,objects:c.map(function(t){return t.object}).filter(function(t){return!t.userData[W]})};try{var d=this.viewer.dataHelper.sphericalCoordsToTextureCoords(h);h.textureX=d.textureX,h.textureY=d.textureY}catch(t){h.textureX=NaN,h.textureY=NaN}this.data.dblclickTimeout?(Math.abs(this.data.dblclickData.clientX-h.clientX)<this.moveThreshold&&Math.abs(this.data.dblclickData.clientY-h.clientY)<this.moveThreshold&&this.viewer.dispatchEvent(new es(this.data.dblclickData)),clearTimeout(this.data.dblclickTimeout),this.data.dblclickTimeout=null,this.data.dblclickData=null):(this.viewer.dispatchEvent(new ei(h)),this.data.dblclickData=tk(h),this.data.dblclickTimeout=setTimeout(function(){i.data.dblclickTimeout=null,i.data.dblclickData=null},D))}}},{key:"__handleObjectsEvents",value:function(t){var e=this;if(!t_(this.state.objectsObservers)&&tc(t.target,this.viewer.container))for(var n=tl(this.viewer.container),i={x:t.clientX-n.x,y:t.clientY-n.y},r=this.viewer.renderer.getIntersections(i),o=function(n,r,o){e.viewer.dispatchEvent(new o(t,n,i,r))},a=0,s=Object.entries(this.state.objectsObservers);a<s.length;a++)!function(){var t=x(s[a],2),n=t[0],i=t[1],c=r.find(function(t){return t.object.userData[n]});c?(i&&c.object!==i&&(o(i,n,eq),e.state.objectsObservers[n]=null),i?o(c.object,n,eQ):(e.state.objectsObservers[n]=c.object,o(c.object,n,eG))):i&&(o(i,n,eq),e.state.objectsObservers[n]=null)}()}},{key:"__doMove",value:function(t,e){this.step.is(nD.CLICK)&&this.__moveThresholdReached(t,e)?(this.viewer.stopAll(),this.__resetMove(),this.step.set(nD.MOVING),this.data.mouseX=t,this.data.mouseY=e,this.__logMouseMove(t,e)):this.step.is(nD.MOVING)&&(this.__applyMove(t,e),this.__logMouseMove(t,e))}},{key:"__moveThresholdReached",value:function(t,e){return Math.abs(t-this.data.startMouseX)>=this.moveThreshold||Math.abs(e-this.data.startMouseY)>=this.moveThreshold}},{key:"__applyMove",value:function(t,e){var n={yaw:this.config.moveSpeed*((t-this.data.mouseX)/this.state.size.width)*a.M8C.degToRad(this.state.littlePlanet?90:this.state.hFov),pitch:this.config.moveSpeed*((e-this.data.mouseY)/this.state.size.height)*a.M8C.degToRad(this.state.littlePlanet?90:this.state.vFov)},i=this.viewer.getPosition();this.viewer.rotate({yaw:i.yaw-n.yaw,pitch:i.pitch+n.pitch}),this.data.mouseX=t,this.data.mouseY=e}},{key:"__doMoveZoom",value:function(t){if(this.step.is(nD.MOVING)){t.preventDefault();var e=tv(t),n=(e.distance-this.data.pinchDist)/e3.pixelRatio*this.config.zoomSpeed;this.viewer.zoom(this.viewer.getZoomLevel()+n),this.__doMove(e.center.x,e.center.y),this.data.pinchDist=e.distance}}},{key:"__logMouseMove",value:function(t,e){var n=Date.now(),i=this.data.mouseHistory.length?this.data.mouseHistory[this.data.mouseHistory.length-1]:[0,-1,-1];i[1]===t&&i[2]===e?i[0]=n:n===i[0]?(i[1]=t,i[2]=e):this.data.mouseHistory.push([n,t,e]);for(var r=null,o=0;o<this.data.mouseHistory.length;)this.data.mouseHistory[o][0]<n-F?this.data.mouseHistory.splice(o,1):r&&this.data.mouseHistory[o][0]-r>F/10?(this.data.mouseHistory.splice(0,o),o=0,r=this.data.mouseHistory[o][0]):(r=this.data.mouseHistory[o][0],o++)}}]),n}(nR),nj=new a.FM8,nU=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,t)).renderer=new a.CP7(i.config.rendererParameters),i.renderer.setPixelRatio(e3.pixelRatio),i.renderer.outputColorSpace=a.GUF,i.renderer.domElement.className="psv-canvas",i.scene=new a.xsS,i.camera=new a.cPb(50,16/9,.1,2*V),i.camera.matrixWorldAutoUpdate=!1,i.mesh=i.viewer.adapter.createMesh(),i.mesh.userData=v({},W,!0),i.meshContainer=new a.ZAu,i.meshContainer.add(i.mesh),i.scene.add(i.meshContainer),i.raycaster=new a.iMs,i.container=document.createElement("div"),i.container.className="psv-canvas-container",i.container.appendChild(i.renderer.domElement),i.viewer.container.appendChild(i.container),i.viewer.addEventListener(eF.type,b(i)),i.viewer.addEventListener(eX.type,b(i)),i.viewer.addEventListener(eL.type,b(i)),i.viewer.addEventListener(eo.type,b(i)),i.hide(),i}return f(n,[{key:"panoramaPose",get:function(){return this.mesh.rotation}},{key:"sphereCorrection",get:function(){return this.meshContainer.rotation}},{key:"init",value:function(){var t=this;this.show(),this.renderer.setAnimationLoop(function(e){return t.__renderLoop(e)})}},{key:"destroy",value:function(){this.renderer.setAnimationLoop(null),this.cleanScene(this.scene),this.viewer.container.removeChild(this.container),this.viewer.removeEventListener(eF.type,this),this.viewer.removeEventListener(eX.type,this),this.viewer.removeEventListener(eL.type,this),this.viewer.removeEventListener(eo.type,this),l(M(n.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(t){switch(t.type){case eF.type:this.__onSizeUpdated();break;case eX.type:this.__onZoomUpdated();break;case eL.type:this.__onPositionUpdated();break;case eo.type:t.containsOptions("fisheye")&&this.__onPositionUpdated(),t.containsOptions("canvasBackground")&&(this.container.style.background=this.config.canvasBackground)}}},{key:"hide",value:function(){this.container.style.opacity="0"}},{key:"show",value:function(){this.container.style.opacity="1"}},{key:"setCustomRenderer",value:function(t){t?this.customRenderer=t(this.renderer):this.customRenderer=null,this.viewer.needsUpdate()}},{key:"__onSizeUpdated",value:function(){this.renderer.setSize(this.state.size.width,this.state.size.height),this.camera.aspect=this.state.aspect,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate()}},{key:"__onZoomUpdated",value:function(){this.camera.fov=this.state.vFov,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate()}},{key:"__onPositionUpdated",value:function(){this.camera.position.set(0,0,0),this.camera.lookAt(this.state.direction),this.config.fisheye&&this.camera.position.copy(this.state.direction).multiplyScalar(this.config.fisheye/2).negate(),this.camera.updateMatrixWorld(),this.viewer.needsUpdate()}},{key:"__renderLoop",value:function(t){var e=this.timestamp?t-this.timestamp:0;this.timestamp=t,this.viewer.dispatchEvent(new t9(t,e)),this.viewer.dynamics.update(e),(this.state.needsUpdate||this.state.continuousUpdateCount>0)&&((this.customRenderer||this.renderer).render(this.scene,this.camera),this.viewer.dispatchEvent(new eI),this.state.needsUpdate=!1)}},{key:"setTexture",value:function(t){this.viewer.adapter.constructor.supportsOverlay&&this.setOverlay(null,0),this.state.textureData&&this.viewer.adapter.disposeTexture(this.state.textureData),this.state.textureData=t,this.state.panoData=t.panoData,this.viewer.adapter.setTexture(this.mesh,t),this.viewer.needsUpdate()}},{key:"setOverlay",value:function(t,e){this.state.overlayData&&this.viewer.adapter.disposeTexture(this.state.overlayData),this.state.overlayData=t,this.viewer.adapter.setOverlay(this.mesh,t,e),this.viewer.needsUpdate()}},{key:"setPanoramaPose",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mesh,n=this.viewer.dataHelper.cleanPanoramaPose(t);e.rotation.set(-n.tilt,-n.pan,-n.roll,"ZXY")}},{key:"setSphereCorrection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.meshContainer,n=this.viewer.dataHelper.cleanSphereCorrection(t);e.rotation.set(n.tilt,n.pan,n.roll,"ZXY")}},{key:"transition",value:function(t,e){var n=this,i=!tE(e.position),r=!tE(e.zoom),o=new t7(i?this.viewer.dataHelper.cleanPosition(e.position):void 0,e.zoom);this.viewer.dispatchEvent(o);var s=new a.ZAu,c=this.viewer.adapter.createMesh(.5);if(this.viewer.adapter.setTexture(c,t,!0),this.viewer.adapter.setTextureOpacity(c,0),this.setPanoramaPose(t.panoData,c),this.setSphereCorrection(e.sphereCorrection,s),i&&"fade-only"===e.transition){var u=this.viewer.getPosition(),l=new a.Pa4(0,1,0);s.rotateOnWorldAxis(l,o.position.yaw-u.yaw);var h=new a.Pa4(0,1,0).cross(this.camera.getWorldDirection(new a.Pa4)).normalize();s.rotateOnWorldAxis(h,o.position.pitch-u.pitch)}s.add(c),this.scene.add(s),this.renderer.setRenderTarget(new a.dd2),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(null);var v=this.viewer.dataHelper.getAnimationProperties(e.transition,!0===e.transition?o.position:null,o.zoomLevel),p=v.duration,f=v.properties,m=new tq({properties:d(d({},f),{},{opacity:{start:0,end:1}}),duration:p,easing:"inOutCubic",onTick:function(t){n.viewer.adapter.setTextureOpacity(c,t.opacity),i&&!0===e.transition&&n.viewer.dynamics.position.setValue({yaw:t.yaw,pitch:t.pitch}),r&&n.viewer.dynamics.zoom.setValue(t.zoom),n.viewer.needsUpdate()}});return m.then(function(r){r?(n.setTexture(t),n.viewer.adapter.setTextureOpacity(n.mesh,1),n.setPanoramaPose(t.panoData),n.setSphereCorrection(e.sphereCorrection),i&&"fade-only"===e.transition&&n.viewer.rotate(e.position)):n.viewer.adapter.disposeTexture(t),n.scene.remove(s),c.geometry.dispose(),c.geometry=null}),m}},{key:"getIntersections",value:function(t){nj.x=2*t.x/this.state.size.width-1,nj.y=-2*t.y/this.state.size.height+1,this.raycaster.setFromCamera(nj,this.camera);var e,n=this.raycaster.intersectObjects(this.scene.children,!0).filter(function(t){return t.object.isMesh&&!!t.object.userData});return null!==(e=this.customRenderer)&&void 0!==e&&e.getIntersections&&n.push.apply(n,L(this.customRenderer.getIntersections(this.raycaster,nj))),n}},{key:"addObject",value:function(t){this.scene.add(t)}},{key:"removeObject",value:function(t){this.scene.remove(t)}},{key:"cleanScene",value:function(t){var e=this;t.traverse(function(n){n.geometry&&n.geometry.dispose(),n.material&&(Array.isArray(n.material)?n.material.forEach(function(t){t.map&&t.map.dispose(),t.dispose()}):(n.material.map&&n.material.map.dispose(),n.material.dispose())),!n.dispose||n instanceof a.xsS||n.dispose(),n!==t&&e.cleanScene(n)})}}]),n}(nR),nF=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,t)).fileLoader=new a.hH6,i.fileLoader.setResponseType("blob"),i.imageLoader=new a.S3k,i.config.withCredentials&&(i.fileLoader.setWithCredentials(!0),i.imageLoader.setCrossOrigin("use-credentials")),i}return f(n,[{key:"destroy",value:function(){this.abortLoading(),l(M(n.prototype),"destroy",this).call(this)}},{key:"abortLoading",value:function(){}},{key:"loadFile",value:function(t,e,n){var i=this,r=nS.get(t,n);if(r){if(r instanceof Blob)return null==e||e(100),Promise.resolve(r);nS.remove(t,n)}return this.config.requestHeaders&&this.fileLoader.setRequestHeader(this.config.requestHeaders(t)),new Promise(function(r,o){var a=0;null==e||e(a),i.fileLoader.load(t,function(i){a=100,null==e||e(a),nS.add(t,n,i),r(i)},function(t){if(t.lengthComputable){var n=t.loaded/t.total*100;n>a&&(a=n,null==e||e(a))}},function(t){o(t)})})}},{key:"loadImage",value:function(t,e,n){var i=this,r=nS.get(t,n);return r?(null==e||e(100),r instanceof Blob)?this.blobToImage(r):Promise.resolve(r):e||this.config.requestHeaders?this.loadFile(t,e,n).then(function(t){return i.blobToImage(t)}):this.imageLoader.loadAsync(t).then(function(e){return nS.add(t,n,e),e})}},{key:"blobToImage",value:function(t){return new Promise(function(e,n){var i=document.createElement("img");i.onload=function(){URL.revokeObjectURL(i.src),e(i)},i.onerror=n,i.src=URL.createObjectURL(t)})}},{key:"preloadPanorama",value:function(t){return this.viewer.adapter.supportsPreload(t)?this.viewer.adapter.loadTexture(t):Promise.reject(new tT("Current adapter does not support preload"))}}]),n}(nR),nV=function(t){w(n,t);var e=g(n);function n(t){var i;return y(this,n),(i=e.call(this,t)).zoom=new t$(function(t){i.viewer.state.vFov=i.viewer.dataHelper.zoomLevelToFov(t),i.viewer.state.hFov=i.viewer.dataHelper.vFovToHFov(i.viewer.state.vFov),i.viewer.dispatchEvent(new eX(t))},{defaultValue:i.viewer.config.defaultZoomLvl,min:0,max:100,wrap:!1}),i.position=new tQ(function(t){i.viewer.dataHelper.sphericalCoordsToVector3(t,i.viewer.state.direction),i.viewer.dispatchEvent(new eL(t))},{yaw:new t$(null,{defaultValue:i.config.defaultYaw,min:0,max:2*Math.PI,wrap:!0}),pitch:new t$(null,{defaultValue:i.config.defaultPitch,min:i.viewer.state.littlePlanet?0:-Math.PI/2,max:i.viewer.state.littlePlanet?2*Math.PI:Math.PI/2,wrap:i.viewer.state.littlePlanet})}),i.updateSpeeds(),i}return f(n,[{key:"updateSpeeds",value:function(){this.zoom.setSpeed(50*this.config.zoomSpeed),this.position.setSpeed(a.M8C.degToRad(50*this.config.moveSpeed))}},{key:"update",value:function(t){this.zoom.update(t),this.position.update(t)}}]),n}(nR),nW=f(function t(){y(this,t),this.ready=!1,this.needsUpdate=!1,this.continuousUpdateCount=0,this.keyboardEnabled=!1,this.direction=new a.Pa4(0,0,V),this.vFov=60,this.hFov=60,this.aspect=1,this.animation=null,this.transitionAnimation=null,this.loadingPromise=null,this.littlePlanet=!1,this.idleTime=-1,this.objectsObservers={},this.size={width:0,height:0},this.panoData={fullWidth:0,fullHeight:0,croppedWidth:0,croppedHeight:0,croppedX:0,croppedY:0,poseHeading:0,posePitch:0,poseRoll:0}}),nY=function(t){w(n,t);var e=g(n);function n(t){y(this,n),(s=e.call(this)).plugins={},s.children=[],s.onResize=tw(function(){return s.navbar.autoSize()},500),nS.init(),e3.load(),s.state=new nW,s.config=nb(t),s.parent=tr(t.container),s.parent[W]=b(s),s.container=document.createElement("div"),s.container.classList.add("psv-container"),s.parent.appendChild(s.container),tK(s.container,"core"),s.adapter=new s.config.adapter[0](b(s),s.config.adapter[1]),s.renderer=new nU(b(s)),s.textureLoader=new nF(b(s)),s.eventsHandler=new nN(b(s)),s.dataHelper=new nz(b(s)),s.dynamics=new nV(b(s)),null===(o=(a=s.adapter).init)||void 0===o||o.call(a),s.loader=new nT(b(s)),s.navbar=new nM(b(s)),s.panel=new nP(b(s)),s.notification=new nL(b(s)),s.overlay=new nx(b(s)),s.resize(s.config.size),s.setCursor(null),tL(e3.isTouchEnabled,function(t){to(s.container,"psv--is-touch",t)}),s.config.plugins.forEach(function(t){var e=x(t,2),n=e[0],i=e[1];s.plugins[n.id]=new n(b(s),i)});for(var i=0,r=Object.values(s.plugins);i<r.length;i++){var o,a,s,c,u=r[i];null===(c=u.init)||void 0===c||c.call(u)}return s.config.navbar&&s.navbar.setButtons(s.config.navbar),s.state.loadingPromise||(s.config.panorama?s.setPanorama(s.config.panorama):s.loader.show()),s}return f(n,[{key:"destroy",value:function(){this.stopAll(),this.stopKeyboardControl(),this.exitFullscreen();for(var t=0,e=Object.entries(this.plugins);t<e.length;t++){var n=x(e[t],2),i=n[0];n[1].destroy(),delete this.plugins[i]}this.children.slice().forEach(function(t){return t.destroy()}),this.children.length=0,this.eventsHandler.destroy(),this.renderer.destroy(),this.textureLoader.destroy(),this.dataHelper.destroy(),this.adapter.destroy(),this.dynamics.destroy(),this.parent.removeChild(this.container),delete this.parent[W]}},{key:"init",value:function(){this.eventsHandler.init(),this.renderer.init(),this.config.navbar&&this.navbar.show(),"always"===this.config.keyboard&&this.startKeyboardControl(),this.resetIdleTimer(),this.state.ready=!0,this.dispatchEvent(new eC)}},{key:"resetIdleTimer",value:function(){this.state.idleTime=performance.now()}},{key:"disableIdleTimer",value:function(){this.state.idleTime=-1}},{key:"getPlugin",value:function(t){if("string"==typeof t)return this.plugins[t];var e=nm(t);return e?this.plugins[e.id]:null}},{key:"getPosition",value:function(){return this.dataHelper.cleanPosition(this.dynamics.position.current)}},{key:"getZoomLevel",value:function(){return this.dynamics.zoom.current}},{key:"getSize",value:function(){return d({},this.state.size)}},{key:"isFullscreenEnabled",value:function(){return tp(this.parent)}},{key:"needsUpdate",value:function(){this.state.needsUpdate=!0}},{key:"needsContinuousUpdate",value:function(t){t?this.state.continuousUpdateCount++:this.state.continuousUpdateCount>0&&this.state.continuousUpdateCount--}},{key:"autoSize",value:function(){(this.container.clientWidth!==this.state.size.width||this.container.clientHeight!==this.state.size.height)&&(this.state.size.width=Math.round(this.container.clientWidth),this.state.size.height=Math.round(this.container.clientHeight),this.state.aspect=this.state.size.width/this.state.size.height,this.state.hFov=this.dataHelper.vFovToHFov(this.state.vFov),this.dispatchEvent(new eF(this.getSize())),this.onResize())}},{key:"setPanorama",value:function(t){var e,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.textureLoader.abortLoading(),null===(e=this.state.transitionAnimation)||void 0===e||e.cancel(),this.state.ready||["sphereCorrection","panoData","overlay","overlayOpacity"].forEach(function(t){t in i||(i[t]=n.config[t])}),tS(i)&&(tI("PanoramaOptions.yaw and PanoramaOptions.pitch are deprecated, use PanoramaOptions.position instead"),i.position=this.dataHelper.cleanPosition(i)),"number"==typeof i.transition&&(tI("Use PanoramaOptions.speed to define the speed/duration of the transition"),i.speed=i.transition,i.transition=!0),void 0===i.transition&&(i.transition=!0),void 0===i.speed&&(i.speed=H),void 0===i.showLoader&&(i.showLoader=!0),void 0===i.caption&&(i.caption=this.config.caption),void 0===i.description&&(i.description=this.config.description),i.panoData||"function"!=typeof this.config.panoData||(i.panoData=this.config.panoData);var r=!tE(i.position),o=!tE(i.zoom);(r||o)&&this.stopAll(),this.hideError(),this.resetIdleTimer(),this.config.panorama=t,this.config.caption=i.caption,this.config.description=i.description;var a=function(e){if(n.loader.hide(),n.state.loadingPromise=null,tP(e))return!1;if(!e)return n.setOverlay(i.overlay,i.overlayOpacity),n.navbar.setCaption(n.config.caption),!0;throw n.navbar.setCaption(""),n.showError(n.config.lang.loadError),console.error(e),n.dispatchEvent(new eM(t,e)),e};this.navbar.setCaption("<em>".concat(this.config.loadingTxt||"","</em>")),(i.showLoader||!this.state.ready)&&this.loader.show();var s=this.adapter.loadTexture(this.config.panorama,i.panoData).then(function(t){if(t.panorama!==n.config.panorama)throw n.adapter.disposeTexture(t),tC();return t});return i.transition&&this.state.ready&&this.adapter.supportsTransition(this.config.panorama)?this.state.loadingPromise=s.then(function(t){return n.loader.hide(),n.dispatchEvent(new eE(t)),n.state.transitionAnimation=n.renderer.transition(t,i),n.state.transitionAnimation}).then(function(t){if(n.state.transitionAnimation=null,!t)throw tC()}).then(function(){return a()},function(t){return a(t)}):this.state.loadingPromise=s.then(function(t){n.renderer.show(),n.renderer.setTexture(t),n.renderer.setPanoramaPose(t.panoData),n.renderer.setSphereCorrection(i.sphereCorrection),n.state.ready||n.init(),n.dispatchEvent(new eE(t)),o&&n.zoom(i.zoom),r&&n.rotate(i.position)}).then(function(){return a()},function(t){return a(t)}),this.state.loadingPromise}},{key:"setOverlay",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.overlayOpacity,i=this.adapter.constructor.supportsOverlay;return t?i?this.adapter.loadTexture(t,function(t){var n=e.state.panoData,i=t.width/n.croppedWidth;return{fullWidth:i*n.fullWidth,fullHeight:i*n.fullHeight,croppedWidth:i*n.croppedWidth,croppedHeight:i*n.croppedHeight,croppedX:i*n.croppedX,croppedY:i*n.croppedY}},!1).then(function(t){e.renderer.setOverlay(t,n)}):Promise.reject(new tT("Current adapter does not supports overlay")):(i&&this.renderer.setOverlay(null,0),Promise.resolve())}},{key:"setOptions",value:function(t){for(var e=d(d({},this.config),t),n=0,i=Object.entries(t);n<i.length;n++){var r=x(i[n],2),o=r[0],a=r[1];if(!(o in ny)){tI("Unknown option ".concat(o));continue}if(o in nw){tI(nw[o]);continue}switch(o in ng&&(a=ng[o](a,{rawConfig:e,defValue:ny[o]})),this.config[o]=a,o){case"mousemove":this.state.cursorOverride||this.setCursor(null);break;case"caption":this.navbar.setCaption(this.config.caption);break;case"size":this.resize(this.config.size);break;case"sphereCorrection":this.renderer.setSphereCorrection(this.config.sphereCorrection);break;case"navbar":case"lang":this.navbar.setButtons(this.config.navbar);break;case"moveSpeed":case"zoomSpeed":this.dynamics.updateSpeeds();break;case"minFov":case"maxFov":this.dynamics.zoom.setValue(this.dataHelper.fovToZoomLevel(this.state.vFov)),this.dispatchEvent(new eX(this.getZoomLevel()));break;case"keyboard":"always"===this.config.keyboard?this.startKeyboardControl():this.stopKeyboardControl()}}this.needsUpdate(),this.dispatchEvent(new eo(Object.keys(t)))}},{key:"setOption",value:function(t,e){this.setOptions(v({},t,e))}},{key:"showError",value:function(t){this.overlay.show({id:Z.ERROR,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="15 15 70 70"><path fill="currentColor" d="M50,16.2c-18.6,0-33.8,15.1-33.8,33.8S31.4,83.7,50,83.7S83.8,68.6,83.8,50S68.6,16.2,50,16.2z M50,80.2c-16.7,0-30.2-13.6-30.2-30.2S33.3,19.7,50,19.7S80.3,33.3,80.3,50S66.7,80.2,50,80.2z"/><rect fill="currentColor" x="48" y="31.7" width="4" height="28"/><rect fill="currentColor" x="48" y="63.2" width="4" height="5"/><!--Created by Shastry from the Noun Project--></svg>\n',title:t,dissmisable:!1})}},{key:"hideError",value:function(){this.overlay.hide(Z.ERROR)}},{key:"rotate",value:function(t){var e=new ee(this.dataHelper.cleanPosition(t));this.dispatchEvent(e),e.defaultPrevented||this.dynamics.position.setValue(e.position)}},{key:"zoom",value:function(t){this.dynamics.zoom.setValue(t)}},{key:"zoomIn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.dynamics.zoom.step(t)}},{key:"zoomOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.dynamics.zoom.step(-t)}},{key:"animate",value:function(t){var e=this,n=tS(t),i=!tE(t.zoom),r=new t7(n?this.dataHelper.cleanPosition(t):void 0,t.zoom);if(this.dispatchEvent(r),!r.defaultPrevented){this.stopAll();var o=this.dataHelper.getAnimationProperties(t.speed,r.position,r.zoomLevel),a=o.duration,s=o.properties;return a?(this.state.animation=new tq({properties:s,duration:a,easing:"inOutSine",onTick:function(t){n&&e.dynamics.position.setValue({yaw:t.yaw,pitch:t.pitch}),i&&e.dynamics.zoom.setValue(t.zoom)}}),this.state.animation.then(function(){e.state.animation=null,e.resetIdleTimer()}),this.state.animation):(n&&this.rotate(r.position),i&&this.zoom(r.zoomLevel),new tq(null))}}},{key:"stopAnimation",value:function(){return this.state.animation?(this.state.animation.cancel(),this.state.animation):Promise.resolve()}},{key:"resize",value:function(t){var e=this;["width","height"].forEach(function(n){t&&t[n]&&(/^[0-9.]+$/.test(t[n])&&(t[n]+="px"),e.parent.style[n]=t[n])}),this.autoSize()}},{key:"enterFullscreen",value:function(){this.isFullscreenEnabled()||tf(this.parent)}},{key:"exitFullscreen",value:function(){this.isFullscreenEnabled()&&tm()}},{key:"toggleFullscreen",value:function(){this.isFullscreenEnabled()?this.exitFullscreen():this.enterFullscreen()}},{key:"startKeyboardControl",value:function(){this.state.keyboardEnabled=!0}},{key:"stopKeyboardControl",value:function(){this.state.keyboardEnabled=!1}},{key:"createTooltip",value:function(t){return new nI(this,t)}},{key:"setCursor",value:function(t){this.state.cursorOverride=t,t?this.container.style.cursor=t:this.container.style.cursor=this.config.mousemove?"move":"default"}},{key:"observeObjects",value:function(t){this.state.objectsObservers[t]||(this.state.objectsObservers[t]=null)}},{key:"unobserveObjects",value:function(t){delete this.state.objectsObservers[t]}},{key:"stopAll",value:function(){return this.dispatchEvent(new eW),this.disableIdleTimer(),this.stopAnimation()}}]),n}(t5);a.CtF.enabled=!1,a.epp.enabled=!1}}]);